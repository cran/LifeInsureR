<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />


<meta name="date" content="2025-06-15" />

<title>Using the LifeInsureR Package</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>
<script>$(document).ready(function(){
    if (typeof $('[data-toggle="tooltip"]').tooltip === 'function') {
        $('[data-toggle="tooltip"]').tooltip();
    }
    if ($('[data-toggle="popover"]').popover === 'function') {
        $('[data-toggle="popover"]').popover();
    }
});
</script>
<style type="text/css">
.lightable-minimal {
border-collapse: separate;
border-spacing: 16px 1px;
width: 100%;
margin-bottom: 10px;
}
.lightable-minimal td {
margin-left: 5px;
margin-right: 5px;
}
.lightable-minimal th {
margin-left: 5px;
margin-right: 5px;
}
.lightable-minimal thead tr:last-child th {
border-bottom: 2px solid #00000050;
empty-cells: hide;
}
.lightable-minimal tbody tr:first-child td {
padding-top: 0.5em;
}
.lightable-minimal.lightable-hover tbody tr:hover {
background-color: #f5f5f5;
}
.lightable-minimal.lightable-striped tbody tr:nth-child(even) {
background-color: #f5f5f5;
}
.lightable-classic {
border-top: 0.16em solid #111111;
border-bottom: 0.16em solid #111111;
width: 100%;
margin-bottom: 10px;
margin: 10px 5px;
}
.lightable-classic tfoot tr td {
border: 0;
}
.lightable-classic tfoot tr:first-child td {
border-top: 0.14em solid #111111;
}
.lightable-classic caption {
color: #222222;
}
.lightable-classic td {
padding-left: 5px;
padding-right: 5px;
color: #222222;
}
.lightable-classic th {
padding-left: 5px;
padding-right: 5px;
font-weight: normal;
color: #222222;
}
.lightable-classic thead tr:last-child th {
border-bottom: 0.10em solid #111111;
}
.lightable-classic.lightable-hover tbody tr:hover {
background-color: #F9EEC1;
}
.lightable-classic.lightable-striped tbody tr:nth-child(even) {
background-color: #f5f5f5;
}
.lightable-classic-2 {
border-top: 3px double #111111;
border-bottom: 3px double #111111;
width: 100%;
margin-bottom: 10px;
}
.lightable-classic-2 tfoot tr td {
border: 0;
}
.lightable-classic-2 tfoot tr:first-child td {
border-top: 3px double #111111;
}
.lightable-classic-2 caption {
color: #222222;
}
.lightable-classic-2 td {
padding-left: 5px;
padding-right: 5px;
color: #222222;
}
.lightable-classic-2 th {
padding-left: 5px;
padding-right: 5px;
font-weight: normal;
color: #222222;
}
.lightable-classic-2 tbody tr:last-child td {
border-bottom: 3px double #111111;
}
.lightable-classic-2 thead tr:last-child th {
border-bottom: 1px solid #111111;
}
.lightable-classic-2.lightable-hover tbody tr:hover {
background-color: #F9EEC1;
}
.lightable-classic-2.lightable-striped tbody tr:nth-child(even) {
background-color: #f5f5f5;
}
.lightable-material {
min-width: 100%;
white-space: nowrap;
table-layout: fixed;
font-family: Roboto, sans-serif;
border: 1px solid #EEE;
border-collapse: collapse;
margin-bottom: 10px;
}
.lightable-material tfoot tr td {
border: 0;
}
.lightable-material tfoot tr:first-child td {
border-top: 1px solid #EEE;
}
.lightable-material th {
height: 56px;
padding-left: 16px;
padding-right: 16px;
}
.lightable-material td {
height: 52px;
padding-left: 16px;
padding-right: 16px;
border-top: 1px solid #eeeeee;
}
.lightable-material.lightable-hover tbody tr:hover {
background-color: #f5f5f5;
}
.lightable-material.lightable-striped tbody tr:nth-child(even) {
background-color: #f5f5f5;
}
.lightable-material.lightable-striped tbody td {
border: 0;
}
.lightable-material.lightable-striped thead tr:last-child th {
border-bottom: 1px solid #ddd;
}
.lightable-material-dark {
min-width: 100%;
white-space: nowrap;
table-layout: fixed;
font-family: Roboto, sans-serif;
border: 1px solid #FFFFFF12;
border-collapse: collapse;
margin-bottom: 10px;
background-color: #363640;
}
.lightable-material-dark tfoot tr td {
border: 0;
}
.lightable-material-dark tfoot tr:first-child td {
border-top: 1px solid #FFFFFF12;
}
.lightable-material-dark th {
height: 56px;
padding-left: 16px;
padding-right: 16px;
color: #FFFFFF60;
}
.lightable-material-dark td {
height: 52px;
padding-left: 16px;
padding-right: 16px;
color: #FFFFFF;
border-top: 1px solid #FFFFFF12;
}
.lightable-material-dark.lightable-hover tbody tr:hover {
background-color: #FFFFFF12;
}
.lightable-material-dark.lightable-striped tbody tr:nth-child(even) {
background-color: #FFFFFF12;
}
.lightable-material-dark.lightable-striped tbody td {
border: 0;
}
.lightable-material-dark.lightable-striped thead tr:last-child th {
border-bottom: 1px solid #FFFFFF12;
}
.lightable-paper {
width: 100%;
margin-bottom: 10px;
color: #444;
}
.lightable-paper tfoot tr td {
border: 0;
}
.lightable-paper tfoot tr:first-child td {
border-top: 1px solid #00000020;
}
.lightable-paper thead tr:last-child th {
color: #666;
vertical-align: bottom;
border-bottom: 1px solid #00000020;
line-height: 1.15em;
padding: 10px 5px;
}
.lightable-paper td {
vertical-align: middle;
border-bottom: 1px solid #00000010;
line-height: 1.15em;
padding: 7px 5px;
}
.lightable-paper.lightable-hover tbody tr:hover {
background-color: #F9EEC1;
}
.lightable-paper.lightable-striped tbody tr:nth-child(even) {
background-color: #00000008;
}
.lightable-paper.lightable-striped tbody td {
border: 0;
}
</style>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Using the LifeInsureR Package</h1>
<h4 class="author">Reinhold Kainhofer</h4>
<address class="author_afil">
Open Tools<br><a class="author_email" href="mailto:#"><a href="mailto:reinhold@kainhofer.com" class="email">reinhold@kainhofer.com</a></a>
</address>
<h4 class="date">2025-06-15</h4>


<div id="TOC">
<ul>
<li><a href="#general-overview-of-the-concepts" id="toc-general-overview-of-the-concepts"><span class="toc-section-number">1</span> General Overview of the
Concepts</a></li>
<li><a href="#a-simple-example-term-life-insurance" id="toc-a-simple-example-term-life-insurance"><span class="toc-section-number">2</span> A simple example: Term life
insurance</a>
<ul>
<li><a href="#product-description" id="toc-product-description"><span class="toc-section-number">2.1</span> Product description</a></li>
<li><a href="#tariff-implementation-insurancetarif" id="toc-tariff-implementation-insurancetarif"><span class="toc-section-number">2.2</span> Tariff implementation
(InsuranceTarif)</a></li>
<li><a href="#creating-a-contract" id="toc-creating-a-contract"><span class="toc-section-number">2.3</span> Creating a contract</a></li>
<li><a href="#creating-tables-with-various-parameters" id="toc-creating-tables-with-various-parameters"><span class="toc-section-number">2.4</span> Creating tables with various
parameters</a></li>
</ul></li>
<li><a href="#all-possible-parameters" id="toc-all-possible-parameters"><span class="toc-section-number">3</span> All possible parameters</a></li>
<li><a href="#tarif-and-contract-specification" id="toc-tarif-and-contract-specification"><span class="toc-section-number">4</span> Tarif and Contract Specification</a>
<ul>
<li><a href="#creating-the-tariff" id="toc-creating-the-tariff"><span class="toc-section-number">4.1</span> Creating the tariff</a>
<ul>
<li><a href="#sample-tariffs-for-the-most-common-life-insurance-types" id="toc-sample-tariffs-for-the-most-common-life-insurance-types"><span class="toc-section-number">4.1.1</span> Sample tariffs for the most
common life insurance types</a></li>
</ul></li>
<li><a href="#creating-a-contract-1" id="toc-creating-a-contract-1"><span class="toc-section-number">4.2</span> Creating a contract</a></li>
<li><a href="#determining-sum-insured-from-the-premium" id="toc-determining-sum-insured-from-the-premium"><span class="toc-section-number">4.3</span> Determining Sum Insured from the
premium</a></li>
<li><a href="#providing-additional-capital-at-contract-inception" id="toc-providing-additional-capital-at-contract-inception"><span class="toc-section-number">4.4</span> Providing additional capital at
contract inception</a></li>
<li><a href="#premium-waivers" id="toc-premium-waivers"><span class="toc-section-number">4.5</span> Premium Waivers</a></li>
</ul></li>
<li><a href="#calculation-approach" id="toc-calculation-approach"><span class="toc-section-number">5</span> Calculation Approach</a>
<ul>
<li><a href="#valuation" id="toc-valuation"><span class="toc-section-number">5.1</span> Valuation</a></li>
<li><a href="#cash-flows" id="toc-cash-flows"><span class="toc-section-number">5.2</span> Cash Flows</a></li>
</ul></li>
<li><a href="#cost-structure" id="toc-cost-structure"><span class="toc-section-number">6</span> Cost structure</a>
<ul>
<li><a href="#frequency-charges" id="toc-frequency-charges"><span class="toc-section-number">6.1</span> Frequency charges</a></li>
<li><a href="#security-loadings" id="toc-security-loadings"><span class="toc-section-number">6.2</span> Security loadings</a></li>
</ul></li>
<li><a href="#rounding-values" id="toc-rounding-values"><span class="toc-section-number">7</span> Rounding values</a></li>
<li><a href="#creating-premium-and-contract-grids" id="toc-creating-premium-and-contract-grids"><span class="toc-section-number">8</span> Creating premium and contract
grids</a></li>
<li><a href="#exporting-contract-data-to-excel" id="toc-exporting-contract-data-to-excel"><span class="toc-section-number">9</span> Exporting contract data to
Excel</a></li>
<li><a href="#creating-examples-for-the-austrian-financial-market-authority" id="toc-creating-examples-for-the-austrian-financial-market-authority"><span class="toc-section-number">10</span> Creating examples for the Austrian
Financial Market Authority</a></li>
<li><a href="#contracts-combining-multiple-contract-layers-slices" id="toc-contracts-combining-multiple-contract-layers-slices"><span class="toc-section-number">11</span> Contracts combining multiple
contract layers / slices</a>
<ul>
<li><a href="#dynamic-increases" id="toc-dynamic-increases"><span class="toc-section-number">11.1</span> Dynamic increases</a></li>
<li><a href="#general-biometric-riders" id="toc-general-biometric-riders"><span class="toc-section-number">11.2</span> General biometric riders</a></li>
<li><a href="#extending-a-contract-beyond-its-maturity" id="toc-extending-a-contract-beyond-its-maturity"><span class="toc-section-number">11.3</span> Extending a contract beyond its
maturity</a></li>
</ul></li>
<li><a href="#handling-contracts-with-increases" id="toc-handling-contracts-with-increases"><span class="toc-section-number">12</span> Handling contracts with
increases</a>
<ul>
<li><a href="#fixed-yearly-premium-increases" id="toc-fixed-yearly-premium-increases"><span class="toc-section-number">12.1</span> Fixed yearly premium
increases</a></li>
<li><a href="#fixed-yearly-benefit-increases-with-constant-premium" id="toc-fixed-yearly-benefit-increases-with-constant-premium"><span class="toc-section-number">12.2</span> Fixed yearly benefit increases
with constant premium</a></li>
<li><a href="#dynamic-increases-1" id="toc-dynamic-increases-1"><span class="toc-section-number">12.3</span> Dynamic Increases</a></li>
</ul></li>
<li><a href="#profit-participation" id="toc-profit-participation"><span class="toc-section-number">13</span> Profit participation</a>
<ul>
<li><a href="#advance-profit-participation-premium-rebate" id="toc-advance-profit-participation-premium-rebate"><span class="toc-section-number">13.1</span> Advance profit participation
(premium rebate)</a></li>
<li><a href="#the-profitparticiption-class" id="toc-the-profitparticiption-class"><span class="toc-section-number">13.2</span> The ProfitParticiption class</a>
<ul>
<li><a href="#existing-functions-to-use" id="toc-existing-functions-to-use"><span class="toc-section-number">13.2.1</span> Existing functions to
use</a></li>
<li><a href="#example-profit-scheme" id="toc-example-profit-scheme"><span class="toc-section-number">13.2.2</span> Example profit scheme</a></li>
<li><a href="#using-the-profit-scheme-in-a-tariff-or-contract" id="toc-using-the-profit-scheme-in-a-tariff-or-contract"><span class="toc-section-number">13.2.3</span> Using the profit scheme in a
tariff or contract</a></li>
</ul></li>
</ul></li>
<li><a href="#modifying-the-default-calculation-approach" id="toc-modifying-the-default-calculation-approach"><span class="toc-section-number">14</span> Modifying the default calculation
approach</a></li>
</ul>
</div>

<p>The LifeInsureR package provides a full-featured framework to model
classical life insurance contracts (non-unit linked). Mathematically, a
general life insurance contracts can be defined using death and survival
(and disability) benefit vectors to define the cash flows and calculate
all premiums and reserves recursively. This powerful approach is taken
by the LifeInsureR package to provide the most flexible contract
modelling framework in R.</p>
<div id="general-overview-of-the-concepts" class="section level1" number="1">
<h1><span class="header-section-number">1</span> General Overview of the
Concepts</h1>
<p>An insurance contract is described by three different objects;</p>
<ul>
<li><code>InsuranceContract</code>: The object describing the actual
contract with all contract-specific parameters (age, maturity, sum
insured, etc.).</li>
<li><code>InsuranceTarif</code>: The general (contract-independent)
description of the insurance product (benefits, present values /
reserves, premium calculation, premium waivers, surrender value, reserve
calculation, premium decomposition). It does not store any values (only
tarif-provided default values for the insurance contract), but provides
all calculation functions. The implementation is based on a general
approach using cash flows (depending on the type of insurance). Once the
cash flows (survival, death and guaranteed) are defined for all time
steps, all further calculations are idential for all different kinds of
life insurance.</li>
<li><code>ProfitParticipation</code>: For contracts with profit sharing
mechanisms, this object describes the profit participation (like the
<code>InsuranceTarif</code> object describes the guaranteed payments)
and us used by the <code>InsuranceContract</code> object.</li>
</ul>
<p>The tariff and the profit scheme are purely descriptional and their
creation does not trigger any calculations. However, when one creates a
contract for a given tariff, the following steps are done to calculate
all values relevant for the contract:</p>
<ul>
<li>Extract the transition probabilities (mortality)</li>
<li>Set up all cash flow time series (premiums, guaranteed payments,
survival payments, death payments, disease payments, charged cost cash
flows)</li>
<li>Calculate all present values for each time for all the cash flows
(benefits, premiums and costs)</li>
<li>Use the actuarial equivalence principle and the present values at
time <span class="math inline">\(t=0\)</span> to calculate the premium
of the contract</li>
<li>Express all cash flows also in absolute (monetary) terms</li>
<li>Calculate the reserves at every moment</li>
<li>Calculate the premium decomposition</li>
<li>Apply the (optional) profit participation scheme with the given
profit scenario</li>
<li>Optionally apply contract changes (premiums waivers, dynamic) and
further profit scenarios</li>
</ul>
<p>All steps after the cash flow setup are implemented in a very generic
way, as the cash flows fully determine an insurance contract and as soon
as the cash flows are fixed, the valuation and reserve calculation can
be expressed in terms of expected present values of the cash flows
only.</p>
<p>While this might at first seem a bit complicated, it allows for very
generic implementations of life insurance products and contracts.</p>
</div>
<div id="a-simple-example-term-life-insurance" class="section level1" number="2">
<h1><span class="header-section-number">2</span> A simple example: Term
life insurance</h1>
<p>To understand how the package implements life insurance contracts,
let us look at a simple example:</p>
<div id="product-description" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Product
description</h2>
<p>Term Life Insurance</p>
<ul>
<li>Public product name ‘<strong>DeathPlus - Short Term Life
Insurance</strong>’, Internal ID ‘<strong>L71-U</strong>’</li>
<li>Only <strong>death benefits</strong>, no survival benefits</li>
<li><strong>Mortality table</strong>: Austrian 2010/12 census table
unisex (mixed 65:35 from the male:female tables)</li>
<li><strong>Guaranteed interest rate</strong>: 0.5%</li>
<li>Default contract duration: 5 years (to keep the example short)</li>
<li><strong>Regular premium</strong> payments (constant premiums) during
the whole contract
<!-- * premiums paid more often than once a year in advance get the following surcharge: -->
<!--     * yearly premiums: 0% surcharge -->
<!--     * half-yearly premiums: 1% surcharge -->
<!--     * quarterly premiums: 1.5% surcharge -->
<!--     * monthly premiums: 2% surcharge --></li>
</ul>
<p><strong>Costs</strong>:</p>
<ul>
<li>Aquisition costs: 5% of the total premium sum</li>
<li>Administration cost: 1% of the sum insured per year (both during
premium payments as well as for paid-up contracts)</li>
<li>Unit costs: 10 Euro per year (fixed) during premium payments</li>
<li>Tax: 4% insurance tax (default)</li>
</ul>
<p>Surrender Value:</p>
<ul>
<li>Reserve minus 10% surrender penalty, also applied on premium
waiver</li>
</ul>
</div>
<div id="tariff-implementation-insurancetarif" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Tariff implementation
(InsuranceTarif)</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(MortalityTables)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">library</span>(LifeInsureR)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">mortalityTables.load</span>(<span class="st">&quot;Austria_Census&quot;</span>)</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>Tarif.L71U <span class="ot">=</span> InsuranceTarif<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">&quot;L71-U&quot;</span>,</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">&quot;wholelife&quot;</span>,</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>    <span class="at">tarif =</span> <span class="st">&quot;DeathPlus - Short Term Life Insurance&quot;</span>,</span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>    <span class="at">desc =</span> <span class="st">&quot;Term Life insurance (5 years) with constant sum insured and regular premiums&quot;</span>,</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a>    <span class="at">policyPeriod =</span> <span class="dv">5</span>, <span class="at">premiumPeriod =</span> <span class="dv">5</span>,  <span class="co"># premiumPeriod not needed, defaults to maturity</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a>    <span class="at">mortalityTable =</span> <span class="fu">mortalityTable.mixed</span>(</span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a>      <span class="at">table1 =</span> mort.AT.census.<span class="fl">2011.</span>male, <span class="at">weight1 =</span> <span class="fl">0.65</span>, </span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a>      <span class="at">table2 =</span> mort.AT.census.<span class="fl">2011.</span>female, <span class="at">weight2 =</span> <span class="fl">0.35</span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a>    ),</span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a>    <span class="at">i =</span> <span class="fl">0.005</span>, </span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a>    <span class="at">tax =</span> <span class="fl">0.04</span>, </span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a>    <span class="at">costs =</span> <span class="fu">initializeCosts</span>(<span class="at">alpha =</span> <span class="fl">0.05</span>, <span class="at">gamma =</span> <span class="fl">0.01</span>, <span class="at">gamma.paidUp =</span> <span class="fl">0.01</span>, <span class="at">unitcosts =</span> <span class="dv">10</span>),</span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a>    <span class="at">surrenderValueCalculation =</span> <span class="cf">function</span>(surrenderReserve, params, values) { </span>
<span id="cb1-21"><a href="#cb1-21" tabindex="-1"></a>      surrenderReserve <span class="sc">*</span> <span class="fl">0.9</span> </span>
<span id="cb1-22"><a href="#cb1-22" tabindex="-1"></a>    }</span>
<span id="cb1-23"><a href="#cb1-23" tabindex="-1"></a>);</span></code></pre></div>
</div>
<div id="creating-a-contract" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Creating a
contract</h2>
<p>With the above product / tariff definition, it is now easy to
instantiate one particular contract for this tariff. All we need to do
is pass the tariff and the corresponding contract-specific information
(mainly age, sum insured and contract closing) to the
<code>InsuranceContract</code> object:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>contract.L71U  <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>  Tarif.L71U, </span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>  <span class="at">age =</span> <span class="dv">35</span>, </span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-08-18&quot;</span>), </span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">100000</span>);</span></code></pre></div>
<p>Just creating the contract will already calculate all cash flows,
present values, premiums, reserves, etc. for the whole contract period.
They can be accessed through the <code>contract.L71U$Values</code>
list.</p>
<p>A full list of all possible arguments can be found in the section
[All possible parameters and their default values].</p>
<p>Once the contract is created, all values can be accessed like
this:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>contract.L71U<span class="sc">$</span>Values<span class="sc">$</span>premiums</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">unit.net</td>
<td align="right">0.0008083</td>
</tr>
<tr class="even">
<td align="left">unit.Zillmer</td>
<td align="right">0.0008083</td>
</tr>
<tr class="odd">
<td align="left">unit.gross</td>
<td align="right">0.0113840</td>
</tr>
<tr class="even">
<td align="left">net</td>
<td align="right">80.8263742</td>
</tr>
<tr class="odd">
<td align="left">Zillmer</td>
<td align="right">80.8263742</td>
</tr>
<tr class="even">
<td align="left">gross</td>
<td align="right">1138.4019890</td>
</tr>
<tr class="odd">
<td align="left">unitcost</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">written_yearly</td>
<td align="right">1194.3380685</td>
</tr>
<tr class="odd">
<td align="left">written_beforetax</td>
<td align="right">1148.4019890</td>
</tr>
<tr class="even">
<td align="left">tax</td>
<td align="right">45.9360796</td>
</tr>
<tr class="odd">
<td align="left">written</td>
<td align="right">1194.3380685</td>
</tr>
<tr class="even">
<td align="left">additional_capital</td>
<td align="right">0.0000000</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>contract.L71U<span class="sc">$</span>Values<span class="sc">$</span>reserves</span></code></pre></div>
<table>
<caption>Table continues below</caption>
<colgroup>
<col width="7%" />
<col width="11%" />
<col width="7%" />
<col width="8%" />
<col width="9%" />
<col width="7%" />
<col width="12%" />
<col width="11%" />
<col width="12%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">SumInsured</th>
<th align="center">net</th>
<th align="center">Zillmer</th>
<th align="center">adequate</th>
<th align="center">gamma</th>
<th align="center">contractual</th>
<th align="center">conversion</th>
<th align="center">alphaRefund</th>
<th align="center">reduction</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">1e+05</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0</td>
<td align="center">0.00</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">1e+05</td>
<td align="center">10.91</td>
<td align="center">10.91</td>
<td align="center">-217.41</td>
<td align="center">0</td>
<td align="center">10.91</td>
<td align="center">10.91</td>
<td align="center">0</td>
<td align="center">10.91</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">1e+05</td>
<td align="center">17.13</td>
<td align="center">17.13</td>
<td align="center">-154.60</td>
<td align="center">0</td>
<td align="center">17.13</td>
<td align="center">17.13</td>
<td align="center">0</td>
<td align="center">17.13</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">1e+05</td>
<td align="center">18.02</td>
<td align="center">18.02</td>
<td align="center">-96.80</td>
<td align="center">0</td>
<td align="center">18.02</td>
<td align="center">18.02</td>
<td align="center">0</td>
<td align="center">18.02</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">1e+05</td>
<td align="center">12.67</td>
<td align="center">12.67</td>
<td align="center">-44.90</td>
<td align="center">0</td>
<td align="center">12.67</td>
<td align="center">12.67</td>
<td align="center">0</td>
<td align="center">12.67</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">1e+05</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0</td>
<td align="center">0.00</td>
</tr>
</tbody>
</table>
<table style="width:83%;">
<colgroup>
<col width="12%" />
<col width="20%" />
<col width="16%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">PremiumsPaid</th>
<th align="center">Surrender</th>
<th align="center">PremiumFreeSumInsured</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">1138.40</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">2276.80</td>
<td align="center">9.82</td>
<td align="center">228.43</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">3415.21</td>
<td align="center">15.42</td>
<td align="center">475.74</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">4553.61</td>
<td align="center">16.22</td>
<td align="center">746.15</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">5692.01</td>
<td align="center">11.40</td>
<td align="center">1042.97</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">5692.01</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
</tbody>
</table>
<p>Looking back at the definition of the tariff, the only spot where the
type of insurance actually came in was the <code>type</code> argument of
the <code>InsuranceTarif</code> definition. This is one of the most
important flags and is central to correct implementation of a tarif. On
the other hand, all it does is to cause different vectors of survival,
death and guaranteed cash flows. Once the cash flows are determined, the
insurance contract and tariff does not need the insurance type any
more.</p>
<p>In our term life example, the insurance contract’s unit cash flows
are 1 for death benefits (both when premiums are paid and when the
contract is paid-up) and for premiums in advance. All other cash flows
(guaranteed, survival or disease cash flows) are zero. Similarly, the
cost structure described above and implemented by the
<code>LifeInsureR::initializeCosts()</code> function defines all cost
cash flows, which are the starting point for all further calculations
(only relevant columns of the data.frame are shown):</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>contract.L71U<span class="sc">$</span>Values<span class="sc">$</span>cashFlows</span></code></pre></div>
<table>
<colgroup>
<col width="8%" />
<col width="17%" />
<col width="17%" />
<col width="17%" />
<col width="19%" />
<col width="19%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">premiums_advance</th>
<th align="center">premiums_arrears</th>
<th align="center">death_SumInsured</th>
<th align="center">death_GrossPremium</th>
<th align="center">death_PremiumFree</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>contract.L71U<span class="sc">$</span>Values<span class="sc">$</span>cashFlowsCosts[,,,<span class="st">&quot;survival&quot;</span>]</span></code></pre></div>
<ul>
<li>,,“SumInsured”</li>
</ul>
<table>
<colgroup>
<col width="12%" />
<col width="10%" />
<col width="13%" />
<col width="9%" />
<col width="10%" />
<col width="27%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">alpha</th>
<th align="center">Zillmer</th>
<th align="center">beta</th>
<th align="center">gamma</th>
<th align="center">gamma_nopremiums</th>
<th align="center">unitcosts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.01</td>
<td align="center">0.01</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.01</td>
<td align="center">0.01</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.01</td>
<td align="center">0.01</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.01</td>
<td align="center">0.01</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.01</td>
<td align="center">0.01</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<ul>
<li>,,“SumPremiums”</li>
</ul>
<table>
<colgroup>
<col width="12%" />
<col width="10%" />
<col width="13%" />
<col width="9%" />
<col width="10%" />
<col width="27%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">alpha</th>
<th align="center">Zillmer</th>
<th align="center">beta</th>
<th align="center">gamma</th>
<th align="center">gamma_nopremiums</th>
<th align="center">unitcosts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">0.05</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">0.00</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">0.00</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">0.00</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">0.00</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">0.00</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<ul>
<li>,,“GrossPremium”</li>
</ul>
<table>
<colgroup>
<col width="12%" />
<col width="10%" />
<col width="13%" />
<col width="9%" />
<col width="10%" />
<col width="27%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">alpha</th>
<th align="center">Zillmer</th>
<th align="center">beta</th>
<th align="center">gamma</th>
<th align="center">gamma_nopremiums</th>
<th align="center">unitcosts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<ul>
<li>,,“NetPremium”</li>
</ul>
<table>
<colgroup>
<col width="12%" />
<col width="10%" />
<col width="13%" />
<col width="9%" />
<col width="10%" />
<col width="27%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">alpha</th>
<th align="center">Zillmer</th>
<th align="center">beta</th>
<th align="center">gamma</th>
<th align="center">gamma_nopremiums</th>
<th align="center">unitcosts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<ul>
<li>,,“Benefits”</li>
</ul>
<table>
<colgroup>
<col width="12%" />
<col width="10%" />
<col width="13%" />
<col width="9%" />
<col width="10%" />
<col width="27%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">alpha</th>
<th align="center">Zillmer</th>
<th align="center">beta</th>
<th align="center">gamma</th>
<th align="center">gamma_nopremiums</th>
<th align="center">unitcosts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<ul>
<li>,,“Constant”</li>
</ul>
<table>
<colgroup>
<col width="12%" />
<col width="10%" />
<col width="13%" />
<col width="9%" />
<col width="10%" />
<col width="27%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">alpha</th>
<th align="center">Zillmer</th>
<th align="center">beta</th>
<th align="center">gamma</th>
<th align="center">gamma_nopremiums</th>
<th align="center">unitcosts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">10</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">10</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">10</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">10</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">10</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<ul>
<li>,,“Reserve”</li>
</ul>
<table>
<colgroup>
<col width="12%" />
<col width="10%" />
<col width="13%" />
<col width="9%" />
<col width="10%" />
<col width="27%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">alpha</th>
<th align="center">Zillmer</th>
<th align="center">beta</th>
<th align="center">gamma</th>
<th align="center">gamma_nopremiums</th>
<th align="center">unitcosts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<p>Once these unit cash flows are set, all insurance contracts are
handled identically. First, present values of each of the cash flows are
calculated, from which the premiums can be calculated by the equivalence
principle.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>contract.L71U<span class="sc">$</span>Values<span class="sc">$</span>presentValues</span></code></pre></div>
<table>
<colgroup>
<col width="8%" />
<col width="10%" />
<col width="18%" />
<col width="20%" />
<col width="21%" />
<col width="21%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">premiums</th>
<th align="center">death_SumInsured</th>
<th align="center">death_GrossPremium</th>
<th align="center">death_Refund_future</th>
<th align="center">death_PremiumFree</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">4.94307</td>
<td align="center">0.00400</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.00400</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">3.96558</td>
<td align="center">0.00331</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.00331</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">2.98265</td>
<td align="center">0.00258</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.00258</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">1.99416</td>
<td align="center">0.00179</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.00179</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">1.00000</td>
<td align="center">0.00093</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.00093</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">0.00000</td>
<td align="center">0.00000</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.00000</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>contract.L71U<span class="sc">$</span>Values<span class="sc">$</span>presentValuesCosts</span></code></pre></div>
<ul>
<li>,,“SumInsured”</li>
</ul>
<table>
<colgroup>
<col width="11%" />
<col width="10%" />
<col width="13%" />
<col width="8%" />
<col width="11%" />
<col width="26%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">alpha</th>
<th align="center">Zillmer</th>
<th align="center">beta</th>
<th align="center">gamma</th>
<th align="center">gamma_nopremiums</th>
<th align="center">unitcosts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.0494</td>
<td align="center">0.0494</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.0397</td>
<td align="center">0.0397</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.0298</td>
<td align="center">0.0298</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.0199</td>
<td align="center">0.0199</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.0100</td>
<td align="center">0.0100</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.0000</td>
<td align="center">0.0000</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<ul>
<li>,,“SumPremiums”</li>
</ul>
<table>
<colgroup>
<col width="12%" />
<col width="10%" />
<col width="13%" />
<col width="9%" />
<col width="10%" />
<col width="27%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">alpha</th>
<th align="center">Zillmer</th>
<th align="center">beta</th>
<th align="center">gamma</th>
<th align="center">gamma_nopremiums</th>
<th align="center">unitcosts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">0.05</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">0.00</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">0.00</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">0.00</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">0.00</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">0.00</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<ul>
<li>,,“GrossPremium”</li>
</ul>
<table>
<colgroup>
<col width="12%" />
<col width="10%" />
<col width="13%" />
<col width="9%" />
<col width="10%" />
<col width="27%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">alpha</th>
<th align="center">Zillmer</th>
<th align="center">beta</th>
<th align="center">gamma</th>
<th align="center">gamma_nopremiums</th>
<th align="center">unitcosts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<ul>
<li>,,“NetPremium”</li>
</ul>
<table>
<colgroup>
<col width="12%" />
<col width="10%" />
<col width="13%" />
<col width="9%" />
<col width="10%" />
<col width="27%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">alpha</th>
<th align="center">Zillmer</th>
<th align="center">beta</th>
<th align="center">gamma</th>
<th align="center">gamma_nopremiums</th>
<th align="center">unitcosts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<ul>
<li>,,“Benefits”</li>
</ul>
<table>
<colgroup>
<col width="12%" />
<col width="10%" />
<col width="13%" />
<col width="9%" />
<col width="10%" />
<col width="27%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">alpha</th>
<th align="center">Zillmer</th>
<th align="center">beta</th>
<th align="center">gamma</th>
<th align="center">gamma_nopremiums</th>
<th align="center">unitcosts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<ul>
<li>,,“Constant”</li>
</ul>
<table>
<colgroup>
<col width="12%" />
<col width="10%" />
<col width="13%" />
<col width="9%" />
<col width="10%" />
<col width="27%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">alpha</th>
<th align="center">Zillmer</th>
<th align="center">beta</th>
<th align="center">gamma</th>
<th align="center">gamma_nopremiums</th>
<th align="center">unitcosts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">49.4307</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">39.6558</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">29.8265</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">19.9416</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">10.0000</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.0000</td>
</tr>
</tbody>
</table>
<ul>
<li>,,“Reserve”</li>
</ul>
<table>
<colgroup>
<col width="12%" />
<col width="10%" />
<col width="13%" />
<col width="9%" />
<col width="10%" />
<col width="27%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">alpha</th>
<th align="center">Zillmer</th>
<th align="center">beta</th>
<th align="center">gamma</th>
<th align="center">gamma_nopremiums</th>
<th align="center">unitcosts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>contract.L71U<span class="sc">$</span>Values<span class="sc">$</span>premiums</span></code></pre></div>
<table style="width:49%;">
<colgroup>
<col width="34%" />
<col width="13%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>unit.net</strong></td>
<td align="center">0.00</td>
</tr>
<tr class="even">
<td align="center"><strong>unit.Zillmer</strong></td>
<td align="center">0.00</td>
</tr>
<tr class="odd">
<td align="center"><strong>unit.gross</strong></td>
<td align="center">0.01</td>
</tr>
<tr class="even">
<td align="center"><strong>net</strong></td>
<td align="center">80.83</td>
</tr>
<tr class="odd">
<td align="center"><strong>Zillmer</strong></td>
<td align="center">80.83</td>
</tr>
<tr class="even">
<td align="center"><strong>gross</strong></td>
<td align="center">1138.40</td>
</tr>
<tr class="odd">
<td align="center"><strong>unitcost</strong></td>
<td align="center">0.00</td>
</tr>
<tr class="even">
<td align="center"><strong>written_yearly</strong></td>
<td align="center">1194.34</td>
</tr>
<tr class="odd">
<td align="center"><strong>written_beforetax</strong></td>
<td align="center">1148.40</td>
</tr>
<tr class="even">
<td align="center"><strong>tax</strong></td>
<td align="center">45.94</td>
</tr>
<tr class="odd">
<td align="center"><strong>written</strong></td>
<td align="center">1194.34</td>
</tr>
<tr class="even">
<td align="center"><strong>additional_capital</strong></td>
<td align="center">0.00</td>
</tr>
</tbody>
</table>
<p>The actual calculation of the premiums has to be in the order gross
premium, Zillmer premiuem, then net premium. The reason for this
particular order is that some tariffs have a gross premium refund in
case of death. So to calculate the net premium, the gross premium is
required.</p>
<p>The premiums allow the unit cash flows and present values to be
converted to monetary terms (fields
<code>contract.L71U$Values$absCashFlows</code> and
<code>contract.L71U$Values$absPresentValues</code>). Also, the reserves
of the contract can be calculated.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>contract.L71U<span class="sc">$</span>Values<span class="sc">$</span>reserves</span></code></pre></div>
<table>
<caption>Table continues below</caption>
<colgroup>
<col width="8%" />
<col width="11%" />
<col width="5%" />
<col width="8%" />
<col width="9%" />
<col width="7%" />
<col width="12%" />
<col width="11%" />
<col width="12%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">SumInsured</th>
<th align="center">net</th>
<th align="center">Zillmer</th>
<th align="center">adequate</th>
<th align="center">gamma</th>
<th align="center">contractual</th>
<th align="center">conversion</th>
<th align="center">alphaRefund</th>
<th align="center">reduction</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">1e+05</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">1e+05</td>
<td align="center">11</td>
<td align="center">11</td>
<td align="center">-217</td>
<td align="center">0</td>
<td align="center">11</td>
<td align="center">11</td>
<td align="center">0</td>
<td align="center">11</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">1e+05</td>
<td align="center">17</td>
<td align="center">17</td>
<td align="center">-155</td>
<td align="center">0</td>
<td align="center">17</td>
<td align="center">17</td>
<td align="center">0</td>
<td align="center">17</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">1e+05</td>
<td align="center">18</td>
<td align="center">18</td>
<td align="center">-97</td>
<td align="center">0</td>
<td align="center">18</td>
<td align="center">18</td>
<td align="center">0</td>
<td align="center">18</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">1e+05</td>
<td align="center">13</td>
<td align="center">13</td>
<td align="center">-45</td>
<td align="center">0</td>
<td align="center">13</td>
<td align="center">13</td>
<td align="center">0</td>
<td align="center">13</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">1e+05</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<table style="width:83%;">
<colgroup>
<col width="12%" />
<col width="20%" />
<col width="16%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">PremiumsPaid</th>
<th align="center">Surrender</th>
<th align="center">PremiumFreeSumInsured</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">1138</td>
<td align="center">0.0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">2277</td>
<td align="center">9.8</td>
<td align="center">228</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">3415</td>
<td align="center">15.4</td>
<td align="center">476</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">4554</td>
<td align="center">16.2</td>
<td align="center">746</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">5692</td>
<td align="center">11.4</td>
<td align="center">1043</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">5692</td>
<td align="center">0.0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<p>Also, the premium composition into costs, risk premium, savings
premium and other components is possible.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>contract.L71U<span class="sc">$</span>Values<span class="sc">$</span>premiumComposition</span></code></pre></div>
<table>
<colgroup>
<col width="8%" />
<col width="6%" />
<col width="9%" />
<col width="7%" />
<col width="6%" />
<col width="5%" />
<col width="6%" />
<col width="14%" />
<col width="13%" />
<col width="6%" />
<col width="6%" />
<col width="8%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">charged</th>
<th align="center">tax</th>
<th align="center">unitcosts</th>
<th align="center">gross</th>
<th align="center">gamma</th>
<th align="center">beta</th>
<th align="center">alpha</th>
<th align="center">alpha.noZillmer</th>
<th align="center">alpha.Zillmer</th>
<th align="center">net</th>
<th align="center">risk</th>
<th align="center">savings</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1183.94</td>
<td align="center">45.54</td>
<td align="center">0</td>
<td align="center">1138.4</td>
<td align="center">1000</td>
<td align="center">0</td>
<td align="center">57.58</td>
<td align="center">57.58</td>
<td align="center">0</td>
<td align="center">80.83</td>
<td align="center">69.97</td>
<td align="center">10.85</td>
</tr>
<tr class="even">
<td align="center">1183.94</td>
<td align="center">45.54</td>
<td align="center">0</td>
<td align="center">1138.4</td>
<td align="center">1000</td>
<td align="center">0</td>
<td align="center">57.58</td>
<td align="center">57.58</td>
<td align="center">0</td>
<td align="center">80.83</td>
<td align="center">74.69</td>
<td align="center">6.14</td>
</tr>
<tr class="odd">
<td align="center">1183.94</td>
<td align="center">45.54</td>
<td align="center">0</td>
<td align="center">1138.4</td>
<td align="center">1000</td>
<td align="center">0</td>
<td align="center">57.58</td>
<td align="center">57.58</td>
<td align="center">0</td>
<td align="center">80.83</td>
<td align="center">80.03</td>
<td align="center">0.80</td>
</tr>
<tr class="even">
<td align="center">1183.94</td>
<td align="center">45.54</td>
<td align="center">0</td>
<td align="center">1138.4</td>
<td align="center">1000</td>
<td align="center">0</td>
<td align="center">57.58</td>
<td align="center">57.58</td>
<td align="center">0</td>
<td align="center">80.83</td>
<td align="center">86.24</td>
<td align="center">-5.41</td>
</tr>
<tr class="odd">
<td align="center">1183.94</td>
<td align="center">45.54</td>
<td align="center">0</td>
<td align="center">1138.4</td>
<td align="center">1000</td>
<td align="center">0</td>
<td align="center">57.58</td>
<td align="center">57.58</td>
<td align="center">0</td>
<td align="center">80.83</td>
<td align="center">93.50</td>
<td align="center">-12.67</td>
</tr>
<tr class="even">
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0</td>
<td align="center">0.0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
</tbody>
</table>
<p>As we see, the whole history and future of the contract is calculated
as soon as it is created. It is, however, also possible to modify a
contract later on, e.g. by stopping premium payments and converting it
to a paid-up contract.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>contract.L71U.prf <span class="ot">=</span> contract.L71U<span class="sc">$</span><span class="fu">premiumWaiver</span>(<span class="at">t =</span> <span class="dv">3</span>)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>contract.L71U.prf<span class="sc">$</span>Values<span class="sc">$</span>reserves</span></code></pre></div>
<table>
<caption>Table continues below</caption>
<colgroup>
<col width="7%" />
<col width="11%" />
<col width="7%" />
<col width="8%" />
<col width="9%" />
<col width="7%" />
<col width="12%" />
<col width="11%" />
<col width="12%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">SumInsured</th>
<th align="center">net</th>
<th align="center">Zillmer</th>
<th align="center">adequate</th>
<th align="center">gamma</th>
<th align="center">contractual</th>
<th align="center">conversion</th>
<th align="center">alphaRefund</th>
<th align="center">reduction</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">100000.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0</td>
<td align="center">0.00</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">100000.00</td>
<td align="center">10.91</td>
<td align="center">10.91</td>
<td align="center">-217.41</td>
<td align="center">0.00</td>
<td align="center">10.91</td>
<td align="center">10.91</td>
<td align="center">0</td>
<td align="center">10.91</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">100000.00</td>
<td align="center">17.13</td>
<td align="center">17.13</td>
<td align="center">-154.60</td>
<td align="center">0.00</td>
<td align="center">17.13</td>
<td align="center">17.13</td>
<td align="center">0</td>
<td align="center">17.13</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">746.15</td>
<td align="center">1.34</td>
<td align="center">1.34</td>
<td align="center">16.22</td>
<td align="center">14.88</td>
<td align="center">16.22</td>
<td align="center">16.22</td>
<td align="center">0</td>
<td align="center">16.22</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">746.15</td>
<td align="center">0.70</td>
<td align="center">0.70</td>
<td align="center">8.16</td>
<td align="center">7.46</td>
<td align="center">8.16</td>
<td align="center">8.16</td>
<td align="center">0</td>
<td align="center">8.16</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">746.15</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0</td>
<td align="center">0.00</td>
</tr>
</tbody>
</table>
<table style="width:83%;">
<colgroup>
<col width="12%" />
<col width="20%" />
<col width="16%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">PremiumsPaid</th>
<th align="center">Surrender</th>
<th align="center">PremiumFreeSumInsured</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">1138.40</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">2276.80</td>
<td align="center">9.82</td>
<td align="center">228.43</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">3415.21</td>
<td align="center">15.42</td>
<td align="center">475.74</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">3415.21</td>
<td align="center">16.22</td>
<td align="center">746.15</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">3415.21</td>
<td align="center">8.16</td>
<td align="center">746.15</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">3415.21</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
</tbody>
</table>
</div>
<div id="creating-tables-with-various-parameters" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> Creating tables with
various parameters</h2>
<p>When prototyping a new product or creating marketing material, it is
often needed to create tables of premiums, reserves, benefits or
surrender values for different parameters (e.g. different ages,
maturities and sums insured for the marketing department, or different
guaranteed interest rates, mortality tables or costs for the product
development group).</p>
<p>This can be easily done by the functions
<code>contractGridPremium()</code> or <code>contractGrid()</code>. They
take one argument <code>axes</code>, which gives the parameters for the
axes of the table (more than two dimensions are possible!), while all
other parameters are passed unchanged to
<code>InsuranceContract$new()</code>.</p>
<p>First, let us create a grid of premiums for different ages and
maturities (for sum insured 100,000 Euro):</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>grd <span class="ot">=</span> <span class="fu">contractGridPremium</span>(</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>  <span class="at">axes =</span> <span class="fu">list</span>(<span class="at">age =</span> <span class="fu">seq</span>(<span class="dv">20</span>, <span class="dv">80</span>, <span class="dv">5</span>), <span class="at">policyPeriod =</span> <span class="fu">seq</span>(<span class="dv">10</span>, <span class="dv">40</span>, <span class="dv">5</span>)),</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>  <span class="at">tarif =</span> Tarif.L71U, </span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-08-18&quot;</span>), </span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">100000</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>)</span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>grd</span></code></pre></div>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
age
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="7">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
policyPeriod
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
10
</th>
<th style="text-align:right;">
15
</th>
<th style="text-align:right;">
20
</th>
<th style="text-align:right;">
25
</th>
<th style="text-align:right;">
30
</th>
<th style="text-align:right;">
35
</th>
<th style="text-align:right;">
40
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
20
</td>
<td style="text-align:right;">
1226.97
</td>
<td style="text-align:right;">
1288.25
</td>
<td style="text-align:right;">
1369.67
</td>
<td style="text-align:right;">
1494.03
</td>
<td style="text-align:right;">
1704.47
</td>
<td style="text-align:right;">
2049.68
</td>
<td style="text-align:right;">
2595.39
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
25
</td>
<td style="text-align:right;">
1227.50
</td>
<td style="text-align:right;">
1311.22
</td>
<td style="text-align:right;">
1439.08
</td>
<td style="text-align:right;">
1655.45
</td>
<td style="text-align:right;">
2010.37
</td>
<td style="text-align:right;">
2571.46
</td>
<td style="text-align:right;">
3403.05
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
30
</td>
<td style="text-align:right;">
1256.61
</td>
<td style="text-align:right;">
1388.06
</td>
<td style="text-align:right;">
1610.50
</td>
<td style="text-align:right;">
1975.39
</td>
<td style="text-align:right;">
2552.22
</td>
<td style="text-align:right;">
3407.16
</td>
<td style="text-align:right;">
4549.65
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
35
</td>
<td style="text-align:right;">
1329.56
</td>
<td style="text-align:right;">
1558.39
</td>
<td style="text-align:right;">
1933.75
</td>
<td style="text-align:right;">
2527.14
</td>
<td style="text-align:right;">
3406.63
</td>
<td style="text-align:right;">
4581.92
</td>
<td style="text-align:right;">
6162.21
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
40
</td>
<td style="text-align:right;">
1480.91
</td>
<td style="text-align:right;">
1867.64
</td>
<td style="text-align:right;">
2478.99
</td>
<td style="text-align:right;">
3385.10
</td>
<td style="text-align:right;">
4595.97
</td>
<td style="text-align:right;">
6224.08
</td>
<td style="text-align:right;">
8581.45
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
45
</td>
<td style="text-align:right;">
1749.39
</td>
<td style="text-align:right;">
2381.32
</td>
<td style="text-align:right;">
3317.94
</td>
<td style="text-align:right;">
4569.58
</td>
<td style="text-align:right;">
6252.52
</td>
<td style="text-align:right;">
8689.26
</td>
<td style="text-align:right;">
12082.95
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
50
</td>
<td style="text-align:right;">
2179.00
</td>
<td style="text-align:right;">
3153.01
</td>
<td style="text-align:right;">
4454.64
</td>
<td style="text-align:right;">
6204.78
</td>
<td style="text-align:right;">
8738.83
</td>
<td style="text-align:right;">
12268.04
</td>
<td style="text-align:right;">
16160.61
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
55
</td>
<td style="text-align:right;">
2819.25
</td>
<td style="text-align:right;">
4186.05
</td>
<td style="text-align:right;">
6023.83
</td>
<td style="text-align:right;">
8684.78
</td>
<td style="text-align:right;">
12390.71
</td>
<td style="text-align:right;">
16478.20
</td>
<td style="text-align:right;">
19388.53
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
60
</td>
<td style="text-align:right;">
3654.46
</td>
<td style="text-align:right;">
5613.83
</td>
<td style="text-align:right;">
8450.81
</td>
<td style="text-align:right;">
12401.91
</td>
<td style="text-align:right;">
16759.81
</td>
<td style="text-align:right;">
19862.68
</td>
<td style="text-align:right;">
21019.86
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
65
</td>
<td style="text-align:right;">
4824.56
</td>
<td style="text-align:right;">
7911.21
</td>
<td style="text-align:right;">
12210.02
</td>
<td style="text-align:right;">
16951.43
</td>
<td style="text-align:right;">
20327.37
</td>
<td style="text-align:right;">
21586.39
</td>
<td style="text-align:right;">
21799.89
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
70
</td>
<td style="text-align:right;">
6942.90
</td>
<td style="text-align:right;">
11749.48
</td>
<td style="text-align:right;">
17050.94
</td>
<td style="text-align:right;">
20825.64
</td>
<td style="text-align:right;">
22233.37
</td>
<td style="text-align:right;">
22472.09
</td>
<td style="text-align:right;">
22472.09
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
75
</td>
<td style="text-align:right;">
10834.54
</td>
<td style="text-align:right;">
17077.83
</td>
<td style="text-align:right;">
21523.12
</td>
<td style="text-align:right;">
23180.94
</td>
<td style="text-align:right;">
23462.07
</td>
<td style="text-align:right;">
23462.07
</td>
<td style="text-align:right;">
23462.07
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
80
</td>
<td style="text-align:right;">
16763.64
</td>
<td style="text-align:right;">
22608.06
</td>
<td style="text-align:right;">
24787.67
</td>
<td style="text-align:right;">
25157.28
</td>
<td style="text-align:right;">
25157.28
</td>
<td style="text-align:right;">
25157.28
</td>
<td style="text-align:right;">
25157.28
</td>
</tr>
</tbody>
</table>
<p>One can also pass more than two dimensions to the axes:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>grd <span class="ot">=</span> <span class="fu">contractGridPremium</span>(</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>  <span class="at">axes =</span> <span class="fu">list</span>(<span class="at">age =</span> <span class="fu">seq</span>(<span class="dv">20</span>, <span class="dv">80</span>, <span class="dv">10</span>), <span class="at">policyPeriod =</span> <span class="fu">seq</span>(<span class="dv">10</span>, <span class="dv">40</span>, <span class="dv">10</span>), <span class="at">sumInsured =</span> <span class="fu">c</span>(<span class="dv">10000</span>, <span class="dv">50000</span>, <span class="dv">100000</span>)),</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>  <span class="at">tarif =</span> Tarif.L71U, </span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-08-18&quot;</span>)</span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>)</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a>grd</span></code></pre></div>
<ul>
<li>, , sumInsured=10000</li>
</ul>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
age
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="4">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
policyPeriod
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
10
</th>
<th style="text-align:right;">
20
</th>
<th style="text-align:right;">
30
</th>
<th style="text-align:right;">
40
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
20
</td>
<td style="text-align:right;">
132.06
</td>
<td style="text-align:right;">
146.33
</td>
<td style="text-align:right;">
179.81
</td>
<td style="text-align:right;">
268.90
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
30
</td>
<td style="text-align:right;">
135.02
</td>
<td style="text-align:right;">
170.41
</td>
<td style="text-align:right;">
264.58
</td>
<td style="text-align:right;">
464.33
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
40
</td>
<td style="text-align:right;">
157.45
</td>
<td style="text-align:right;">
257.26
</td>
<td style="text-align:right;">
468.96
</td>
<td style="text-align:right;">
867.51
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
50
</td>
<td style="text-align:right;">
227.26
</td>
<td style="text-align:right;">
454.82
</td>
<td style="text-align:right;">
883.24
</td>
<td style="text-align:right;">
1625.42
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
60
</td>
<td style="text-align:right;">
374.81
</td>
<td style="text-align:right;">
854.44
</td>
<td style="text-align:right;">
1685.34
</td>
<td style="text-align:right;">
2111.35
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
70
</td>
<td style="text-align:right;">
703.65
</td>
<td style="text-align:right;">
1714.45
</td>
<td style="text-align:right;">
2232.70
</td>
<td style="text-align:right;">
2256.57
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
80
</td>
<td style="text-align:right;">
1685.72
</td>
<td style="text-align:right;">
2488.13
</td>
<td style="text-align:right;">
2525.09
</td>
<td style="text-align:right;">
2525.09
</td>
</tr>
</tbody>
</table>
<ul>
<li>, , sumInsured=50000</li>
</ul>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
age
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="4">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
policyPeriod
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
10
</th>
<th style="text-align:right;">
20
</th>
<th style="text-align:right;">
30
</th>
<th style="text-align:right;">
40
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
20
</td>
<td style="text-align:right;">
618.69
</td>
<td style="text-align:right;">
690.04
</td>
<td style="text-align:right;">
857.43
</td>
<td style="text-align:right;">
1302.90
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
30
</td>
<td style="text-align:right;">
633.51
</td>
<td style="text-align:right;">
810.45
</td>
<td style="text-align:right;">
1281.31
</td>
<td style="text-align:right;">
2280.03
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
40
</td>
<td style="text-align:right;">
745.66
</td>
<td style="text-align:right;">
1244.70
</td>
<td style="text-align:right;">
2303.18
</td>
<td style="text-align:right;">
4295.93
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
50
</td>
<td style="text-align:right;">
1094.70
</td>
<td style="text-align:right;">
2232.52
</td>
<td style="text-align:right;">
4374.62
</td>
<td style="text-align:right;">
8085.51
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
60
</td>
<td style="text-align:right;">
1832.43
</td>
<td style="text-align:right;">
4230.60
</td>
<td style="text-align:right;">
8385.11
</td>
<td style="text-align:right;">
10515.13
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
70
</td>
<td style="text-align:right;">
3476.65
</td>
<td style="text-align:right;">
8530.67
</td>
<td style="text-align:right;">
11121.88
</td>
<td style="text-align:right;">
11241.24
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
80
</td>
<td style="text-align:right;">
8387.02
</td>
<td style="text-align:right;">
12399.04
</td>
<td style="text-align:right;">
12583.84
</td>
<td style="text-align:right;">
12583.84
</td>
</tr>
</tbody>
</table>
<ul>
<li>, , sumInsured=1e+05</li>
</ul>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
age
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="4">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
policyPeriod
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
10
</th>
<th style="text-align:right;">
20
</th>
<th style="text-align:right;">
30
</th>
<th style="text-align:right;">
40
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
20
</td>
<td style="text-align:right;">
1226.97
</td>
<td style="text-align:right;">
1369.67
</td>
<td style="text-align:right;">
1704.47
</td>
<td style="text-align:right;">
2595.39
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
30
</td>
<td style="text-align:right;">
1256.61
</td>
<td style="text-align:right;">
1610.50
</td>
<td style="text-align:right;">
2552.22
</td>
<td style="text-align:right;">
4549.65
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
40
</td>
<td style="text-align:right;">
1480.91
</td>
<td style="text-align:right;">
2478.99
</td>
<td style="text-align:right;">
4595.97
</td>
<td style="text-align:right;">
8581.45
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
50
</td>
<td style="text-align:right;">
2179.00
</td>
<td style="text-align:right;">
4454.64
</td>
<td style="text-align:right;">
8738.83
</td>
<td style="text-align:right;">
16160.61
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
60
</td>
<td style="text-align:right;">
3654.46
</td>
<td style="text-align:right;">
8450.81
</td>
<td style="text-align:right;">
16759.81
</td>
<td style="text-align:right;">
21019.86
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
70
</td>
<td style="text-align:right;">
6942.90
</td>
<td style="text-align:right;">
17050.94
</td>
<td style="text-align:right;">
22233.37
</td>
<td style="text-align:right;">
22472.09
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
80
</td>
<td style="text-align:right;">
16763.64
</td>
<td style="text-align:right;">
24787.67
</td>
<td style="text-align:right;">
25157.28
</td>
<td style="text-align:right;">
25157.28
</td>
</tr>
</tbody>
</table>
<p>One can use any of the parameters of the
<code>InsuranceContract$new()</code> call in the <code>axes</code>
argument, even the <code>tarif</code> or <code>mortalityTable</code>
parameters. This means that one can create tables comparing different
tariffs, or showing the effect of different life tables.</p>
<p>In the following example, we use the tarif <code>Tarif.L71U</code>,
but instead of the unisex table (mixed 65:35 from male:female tables),
we use the male mortality tables of the Austrian census from 1870 to
2011 (with a contract period of 10 years fixed, and varying ages):</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>grd <span class="ot">=</span> <span class="fu">contractGridPremium</span>(</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>  <span class="at">axes =</span> <span class="fu">list</span>(<span class="at">mortalityTable =</span> mort.AT.census[<span class="st">&quot;m&quot;</span>, ], <span class="at">age =</span> <span class="fu">seq</span>(<span class="dv">20</span>, <span class="dv">80</span>, <span class="dv">10</span>)),</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>  <span class="at">tarif =</span> Tarif.L71U, </span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">100000</span>,</span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-08-18&quot;</span>)</span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a>) </span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a>grd</span></code></pre></div>
<table>
<colgroup>
<col width="26%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="11%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">20</th>
<th align="center">30</th>
<th align="center">40</th>
<th align="center">50</th>
<th align="center">60</th>
<th align="center">70</th>
<th align="center">80</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>ÖVSt 1868/71 M</strong></td>
<td align="center">2196.2</td>
<td align="center">2266.9</td>
<td align="center">2729.5</td>
<td align="center">3633.2</td>
<td align="center">6045.2</td>
<td align="center">11993.8</td>
<td align="center">25050.0</td>
</tr>
<tr class="even">
<td align="center"><strong>ÖVSt 1879/82 M</strong></td>
<td align="center">2125.8</td>
<td align="center">2260.8</td>
<td align="center">2656.7</td>
<td align="center">3579.8</td>
<td align="center">5660.1</td>
<td align="center">11385.1</td>
<td align="center">24373.1</td>
</tr>
<tr class="odd">
<td align="center"><strong>ÖVSt 1889/92 M</strong></td>
<td align="center">1979.6</td>
<td align="center">2108.8</td>
<td align="center">2584.7</td>
<td align="center">3435.2</td>
<td align="center">5619.3</td>
<td align="center">11166.0</td>
<td align="center">23959.4</td>
</tr>
<tr class="even">
<td align="center"><strong>ÖVSt 1899/1902 M</strong></td>
<td align="center">1811.4</td>
<td align="center">1985.5</td>
<td align="center">2468.2</td>
<td align="center">3382.7</td>
<td align="center">5441.2</td>
<td align="center">10630.8</td>
<td align="center">21946.0</td>
</tr>
<tr class="odd">
<td align="center"><strong>ÖVSt 1909/12 M</strong></td>
<td align="center">1741.3</td>
<td align="center">1931.3</td>
<td align="center">2396.9</td>
<td align="center">3345.0</td>
<td align="center">5399.1</td>
<td align="center">10374.0</td>
<td align="center">21291.8</td>
</tr>
<tr class="even">
<td align="center"><strong>ÖVSt 1930/33 M</strong></td>
<td align="center">1540.6</td>
<td align="center">1646.7</td>
<td align="center">1980.9</td>
<td align="center">2768.4</td>
<td align="center">4569.0</td>
<td align="center">9010.1</td>
<td align="center">19923.5</td>
</tr>
<tr class="odd">
<td align="center"><strong>ÖVSt 1949/51 M</strong></td>
<td align="center">1358.5</td>
<td align="center">1391.3</td>
<td align="center">1614.9</td>
<td align="center">2433.8</td>
<td align="center">4123.8</td>
<td align="center">8124.9</td>
<td align="center">17960.0</td>
</tr>
<tr class="even">
<td align="center"><strong>ÖVSt 1959/61 M</strong></td>
<td align="center">1334.4</td>
<td align="center">1353.6</td>
<td align="center">1513.6</td>
<td align="center">2232.3</td>
<td align="center">4128.9</td>
<td align="center">7980.8</td>
<td align="center">17180.7</td>
</tr>
<tr class="odd">
<td align="center"><strong>ÖVSt 1970/72 M</strong></td>
<td align="center">1336.7</td>
<td align="center">1338.4</td>
<td align="center">1580.6</td>
<td align="center">2178.1</td>
<td align="center">3933.2</td>
<td align="center">8459.4</td>
<td align="center">17202.5</td>
</tr>
<tr class="even">
<td align="center"><strong>ÖVSt 1980/82 M</strong></td>
<td align="center">1299.0</td>
<td align="center">1293.1</td>
<td align="center">1516.3</td>
<td align="center">2169.5</td>
<td align="center">3467.3</td>
<td align="center">7198.6</td>
<td align="center">16340.6</td>
</tr>
<tr class="odd">
<td align="center"><strong>ÖVSt 1990/92 M</strong></td>
<td align="center">1248.9</td>
<td align="center">1257.3</td>
<td align="center">1435.3</td>
<td align="center">1887.9</td>
<td align="center">3135.3</td>
<td align="center">5839.9</td>
<td align="center">13587.2</td>
</tr>
<tr class="even">
<td align="center"><strong>ÖVSt 2000/02 M</strong></td>
<td align="center">1216.4</td>
<td align="center">1209.3</td>
<td align="center">1350.8</td>
<td align="center">1763.0</td>
<td align="center">2552.7</td>
<td align="center">4845.2</td>
<td align="center">11393.3</td>
</tr>
<tr class="odd">
<td align="center"><strong>ÖVSt 2010/12 M</strong></td>
<td align="center">1189.9</td>
<td align="center">1186.7</td>
<td align="center">1273.1</td>
<td align="center">1606.2</td>
<td align="center">2434.8</td>
<td align="center">3968.0</td>
<td align="center">9476.2</td>
</tr>
<tr class="even">
<td align="center"><strong>ÖVSt 2020/22 M</strong></td>
<td align="center">1164.1</td>
<td align="center">1181.6</td>
<td align="center">1257.5</td>
<td align="center">1495.1</td>
<td align="center">2259.3</td>
<td align="center">4058.9</td>
<td align="center">8680.2</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="all-possible-parameters" class="section level1" number="3">
<h1><span class="header-section-number">3</span> All possible
parameters</h1>
<p>All possible parameters of an insurance contract are stored in
sub-lists of a a structure <code>InsuranceContract.Parameters</code>. If
not provided by the call to <code>InsuranceContract$new()</code>, the
values will be taken from either the <code>InsuranceTariff</code>’s
default parameters, the <code>ProfitParticipation</code>’s default
parameters or the global defaults in the
<code>InsuranceContract.ParameterDefault</code>. The cascade or
parameters is (from top to bottom):</p>
<ul>
<li>explicit parameters passed to
<code>InsuranceContract$addProfitScenario()</code> (applies only for the
added profit scenario)</li>
<li>explicit parameters passed to <code>InsuranceContract$new()</code>
or <code>InsuranceContract$clone()</code></li>
<li>parameters set with the <code>ProfitParticipation</code></li>
<li>parameters set with the <code>InsuranceTarif</code></li>
<li>Default values set in
<code>InsuranceContract.ParameterDefaults</code></li>
</ul>
<p>In addition to the parameters listed below, the
<code>InsuranceContract$new()</code> constructor function takes the
following parameters</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">str</span>(InsuranceContract.ParameterDefaults)</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="co">#&gt; List of 9</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="co">#&gt;  $ ContractData       :List of 29</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="co">#&gt;   ..$ id                 : chr &quot;Hauptvertrag&quot;</span></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a><span class="co">#&gt;   ..$ sumInsured         : NULL</span></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a><span class="co">#&gt;   ..$ premium            : NULL</span></span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a><span class="co">#&gt;   ..$ birthDate          : NULL</span></span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a><span class="co">#&gt;   ..$ YOB                : NULL</span></span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a><span class="co">#&gt;   ..$ age                : NULL</span></span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a><span class="co">#&gt;   ..$ technicalAge       : NULL</span></span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a><span class="co">#&gt;   ..$ ageDifferences     : NULL</span></span>
<span id="cb16-12"><a href="#cb16-12" tabindex="-1"></a><span class="co">#&gt;   ..$ sex                : chr &quot;unisex&quot;</span></span>
<span id="cb16-13"><a href="#cb16-13" tabindex="-1"></a><span class="co">#&gt;   ..$ policyPeriod       : num 25</span></span>
<span id="cb16-14"><a href="#cb16-14" tabindex="-1"></a><span class="co">#&gt;   ..$ premiumPeriod      : NULL</span></span>
<span id="cb16-15"><a href="#cb16-15" tabindex="-1"></a><span class="co">#&gt;   ..$ deferralPeriod     : num 0</span></span>
<span id="cb16-16"><a href="#cb16-16" tabindex="-1"></a><span class="co">#&gt;   ..$ guaranteedPeriod   : num 0</span></span>
<span id="cb16-17"><a href="#cb16-17" tabindex="-1"></a><span class="co">#&gt;   ..$ contractClosing    : NULL</span></span>
<span id="cb16-18"><a href="#cb16-18" tabindex="-1"></a><span class="co">#&gt;   ..$ initialCapital     : num 0</span></span>
<span id="cb16-19"><a href="#cb16-19" tabindex="-1"></a><span class="co">#&gt;   ..$ blockStart         : num 0</span></span>
<span id="cb16-20"><a href="#cb16-20" tabindex="-1"></a><span class="co">#&gt;   ..$ premiumPayments    : chr &quot;in advance&quot;</span></span>
<span id="cb16-21"><a href="#cb16-21" tabindex="-1"></a><span class="co">#&gt;   ..$ benefitPayments    : chr &quot;in advance&quot;</span></span>
<span id="cb16-22"><a href="#cb16-22" tabindex="-1"></a><span class="co">#&gt;   ..$ premiumFrequency   : num 1</span></span>
<span id="cb16-23"><a href="#cb16-23" tabindex="-1"></a><span class="co">#&gt;   ..$ benefitFrequency   : num 1</span></span>
<span id="cb16-24"><a href="#cb16-24" tabindex="-1"></a><span class="co">#&gt;   ..$ premiumRefund      : num 0</span></span>
<span id="cb16-25"><a href="#cb16-25" tabindex="-1"></a><span class="co">#&gt;   ..$ premiumRefundPeriod:function (params, values)  </span></span>
<span id="cb16-26"><a href="#cb16-26" tabindex="-1"></a><span class="co">#&gt;   ..$ premiumIncrease    : num 1</span></span>
<span id="cb16-27"><a href="#cb16-27" tabindex="-1"></a><span class="co">#&gt;   ..$ annuityIncrease    : num 1</span></span>
<span id="cb16-28"><a href="#cb16-28" tabindex="-1"></a><span class="co">#&gt;   ..$ deathBenefit       : num 1</span></span>
<span id="cb16-29"><a href="#cb16-29" tabindex="-1"></a><span class="co">#&gt;   ..$ survivalBenefit    : NULL</span></span>
<span id="cb16-30"><a href="#cb16-30" tabindex="-1"></a><span class="co">#&gt;   ..$ benefitParameter   : NULL</span></span>
<span id="cb16-31"><a href="#cb16-31" tabindex="-1"></a><span class="co">#&gt;   ..$ costWaiver         : num 0</span></span>
<span id="cb16-32"><a href="#cb16-32" tabindex="-1"></a><span class="co">#&gt;   ..$ attributes         : list()</span></span>
<span id="cb16-33"><a href="#cb16-33" tabindex="-1"></a><span class="co">#&gt;  $ ContractState      :List of 3</span></span>
<span id="cb16-34"><a href="#cb16-34" tabindex="-1"></a><span class="co">#&gt;   ..$ premiumWaiver   : logi FALSE</span></span>
<span id="cb16-35"><a href="#cb16-35" tabindex="-1"></a><span class="co">#&gt;   ..$ surrenderPenalty: logi TRUE</span></span>
<span id="cb16-36"><a href="#cb16-36" tabindex="-1"></a><span class="co">#&gt;   ..$ alphaRefunded   : logi FALSE</span></span>
<span id="cb16-37"><a href="#cb16-37" tabindex="-1"></a><span class="co">#&gt;  $ ActuarialBases     :List of 11</span></span>
<span id="cb16-38"><a href="#cb16-38" tabindex="-1"></a><span class="co">#&gt;   ..$ mortalityTable               : NULL</span></span>
<span id="cb16-39"><a href="#cb16-39" tabindex="-1"></a><span class="co">#&gt;   ..$ invalidityTable              : NULL</span></span>
<span id="cb16-40"><a href="#cb16-40" tabindex="-1"></a><span class="co">#&gt;   ..$ invalidityEndsContract       : logi TRUE</span></span>
<span id="cb16-41"><a href="#cb16-41" tabindex="-1"></a><span class="co">#&gt;   ..$ i                            : num 0</span></span>
<span id="cb16-42"><a href="#cb16-42" tabindex="-1"></a><span class="co">#&gt;   ..$ balanceSheetDate             : Date[1:1], format: &quot;1900-12-31&quot;</span></span>
<span id="cb16-43"><a href="#cb16-43" tabindex="-1"></a><span class="co">#&gt;   ..$ balanceSheetMethod           : chr &quot;30/360&quot;</span></span>
<span id="cb16-44"><a href="#cb16-44" tabindex="-1"></a><span class="co">#&gt;   ..$ unearnedPremiumsMethod       : NULL</span></span>
<span id="cb16-45"><a href="#cb16-45" tabindex="-1"></a><span class="co">#&gt;   ..$ surrenderValueCalculation    : NULL</span></span>
<span id="cb16-46"><a href="#cb16-46" tabindex="-1"></a><span class="co">#&gt;   ..$ premiumWaiverValueCalculation: NULL</span></span>
<span id="cb16-47"><a href="#cb16-47" tabindex="-1"></a><span class="co">#&gt;   ..$ premiumFrequencyOrder        :function (params, ...)  </span></span>
<span id="cb16-48"><a href="#cb16-48" tabindex="-1"></a><span class="co">#&gt;   ..$ benefitFrequencyOrder        :function (params, ...)  </span></span>
<span id="cb16-49"><a href="#cb16-49" tabindex="-1"></a><span class="co">#&gt;  $ Costs              : num [1:6, 1:7, 1:7] 0 0 0 0 0 0 0 0 0 0 ...</span></span>
<span id="cb16-50"><a href="#cb16-50" tabindex="-1"></a><span class="co">#&gt;   ..- attr(*, &quot;dimnames&quot;)=List of 3</span></span>
<span id="cb16-51"><a href="#cb16-51" tabindex="-1"></a><span class="co">#&gt;   .. ..$ type     : chr [1:6] &quot;alpha&quot; &quot;Zillmer&quot; &quot;beta&quot; &quot;gamma&quot; ...</span></span>
<span id="cb16-52"><a href="#cb16-52" tabindex="-1"></a><span class="co">#&gt;   .. ..$ basis    : chr [1:7] &quot;SumInsured&quot; &quot;SumPremiums&quot; &quot;GrossPremium&quot; &quot;NetPremium&quot; ...</span></span>
<span id="cb16-53"><a href="#cb16-53" tabindex="-1"></a><span class="co">#&gt;   .. ..$ frequency: chr [1:7] &quot;once&quot; &quot;PremiumPeriod&quot; &quot;PremiumFree&quot; &quot;PolicyPeriod&quot; ...</span></span>
<span id="cb16-54"><a href="#cb16-54" tabindex="-1"></a><span class="co">#&gt;  $ minCosts           : NULL</span></span>
<span id="cb16-55"><a href="#cb16-55" tabindex="-1"></a><span class="co">#&gt;  $ Loadings           :List of 15</span></span>
<span id="cb16-56"><a href="#cb16-56" tabindex="-1"></a><span class="co">#&gt;   ..$ ongoingAlphaGrossPremium: num 0</span></span>
<span id="cb16-57"><a href="#cb16-57" tabindex="-1"></a><span class="co">#&gt;   ..$ tax                     : num 0.04</span></span>
<span id="cb16-58"><a href="#cb16-58" tabindex="-1"></a><span class="co">#&gt;   ..$ unitcosts               : num 0</span></span>
<span id="cb16-59"><a href="#cb16-59" tabindex="-1"></a><span class="co">#&gt;   ..$ security                : num 0</span></span>
<span id="cb16-60"><a href="#cb16-60" tabindex="-1"></a><span class="co">#&gt;   ..$ noMedicalExam           : num 0</span></span>
<span id="cb16-61"><a href="#cb16-61" tabindex="-1"></a><span class="co">#&gt;   ..$ noMedicalExamRelative   : num 0</span></span>
<span id="cb16-62"><a href="#cb16-62" tabindex="-1"></a><span class="co">#&gt;   ..$ sumRebate               : num 0</span></span>
<span id="cb16-63"><a href="#cb16-63" tabindex="-1"></a><span class="co">#&gt;   ..$ extraRebate             : num 0</span></span>
<span id="cb16-64"><a href="#cb16-64" tabindex="-1"></a><span class="co">#&gt;   ..$ premiumRebate           : num 0</span></span>
<span id="cb16-65"><a href="#cb16-65" tabindex="-1"></a><span class="co">#&gt;   ..$ partnerRebate           : num 0</span></span>
<span id="cb16-66"><a href="#cb16-66" tabindex="-1"></a><span class="co">#&gt;   ..$ extraChargeGrossPremium : num 0</span></span>
<span id="cb16-67"><a href="#cb16-67" tabindex="-1"></a><span class="co">#&gt;   ..$ benefitFrequencyLoading : NULL</span></span>
<span id="cb16-68"><a href="#cb16-68" tabindex="-1"></a><span class="co">#&gt;   ..$ premiumFrequencyLoading : NULL</span></span>
<span id="cb16-69"><a href="#cb16-69" tabindex="-1"></a><span class="co">#&gt;   ..$ alphaRefundPeriod       : num 5</span></span>
<span id="cb16-70"><a href="#cb16-70" tabindex="-1"></a><span class="co">#&gt;   ..$ commissionPeriod        : num 5</span></span>
<span id="cb16-71"><a href="#cb16-71" tabindex="-1"></a><span class="co">#&gt;  $ Features           :List of 9</span></span>
<span id="cb16-72"><a href="#cb16-72" tabindex="-1"></a><span class="co">#&gt;   ..$ zillmering                    : logi TRUE</span></span>
<span id="cb16-73"><a href="#cb16-73" tabindex="-1"></a><span class="co">#&gt;   ..$ betaGammaInZillmer            : logi FALSE</span></span>
<span id="cb16-74"><a href="#cb16-74" tabindex="-1"></a><span class="co">#&gt;   ..$ gammaInZillmer                : logi FALSE</span></span>
<span id="cb16-75"><a href="#cb16-75" tabindex="-1"></a><span class="co">#&gt;   ..$ alphaRefundLinear             : logi TRUE</span></span>
<span id="cb16-76"><a href="#cb16-76" tabindex="-1"></a><span class="co">#&gt;   ..$ useUnearnedPremiums           :function (params, values)  </span></span>
<span id="cb16-77"><a href="#cb16-77" tabindex="-1"></a><span class="co">#&gt;   ..$ surrenderIncludesCostsReserves: logi TRUE</span></span>
<span id="cb16-78"><a href="#cb16-78" tabindex="-1"></a><span class="co">#&gt;   ..$ unitcostsInGross              : logi FALSE</span></span>
<span id="cb16-79"><a href="#cb16-79" tabindex="-1"></a><span class="co">#&gt;   ..$ absPremiumRefund              : num 0</span></span>
<span id="cb16-80"><a href="#cb16-80" tabindex="-1"></a><span class="co">#&gt;   ..$ alphaCostsCommission          : chr &quot;actual&quot;</span></span>
<span id="cb16-81"><a href="#cb16-81" tabindex="-1"></a><span class="co">#&gt;  $ ProfitParticipation:List of 16</span></span>
<span id="cb16-82"><a href="#cb16-82" tabindex="-1"></a><span class="co">#&gt;   ..$ advanceProfitParticipation            : num 0</span></span>
<span id="cb16-83"><a href="#cb16-83" tabindex="-1"></a><span class="co">#&gt;   ..$ advanceProfitParticipationInclUnitCost: num 0</span></span>
<span id="cb16-84"><a href="#cb16-84" tabindex="-1"></a><span class="co">#&gt;   ..$ waitingPeriod                         : NULL</span></span>
<span id="cb16-85"><a href="#cb16-85" tabindex="-1"></a><span class="co">#&gt;   ..$ guaranteedInterest                    : NULL</span></span>
<span id="cb16-86"><a href="#cb16-86" tabindex="-1"></a><span class="co">#&gt;   ..$ interestProfitRate                    : NULL</span></span>
<span id="cb16-87"><a href="#cb16-87" tabindex="-1"></a><span class="co">#&gt;   ..$ totalInterest                         : NULL</span></span>
<span id="cb16-88"><a href="#cb16-88" tabindex="-1"></a><span class="co">#&gt;   ..$ mortalityProfitRate                   : NULL</span></span>
<span id="cb16-89"><a href="#cb16-89" tabindex="-1"></a><span class="co">#&gt;   ..$ expenseProfitRate                     : NULL</span></span>
<span id="cb16-90"><a href="#cb16-90" tabindex="-1"></a><span class="co">#&gt;   ..$ sumProfitRate                         : NULL</span></span>
<span id="cb16-91"><a href="#cb16-91" tabindex="-1"></a><span class="co">#&gt;   ..$ terminalBonusRate                     : NULL</span></span>
<span id="cb16-92"><a href="#cb16-92" tabindex="-1"></a><span class="co">#&gt;   ..$ terminalBonusFundRate                 : NULL</span></span>
<span id="cb16-93"><a href="#cb16-93" tabindex="-1"></a><span class="co">#&gt;   ..$ profitParticipationScheme             : NULL</span></span>
<span id="cb16-94"><a href="#cb16-94" tabindex="-1"></a><span class="co">#&gt;   ..$ profitComponents                      : NULL</span></span>
<span id="cb16-95"><a href="#cb16-95" tabindex="-1"></a><span class="co">#&gt;   ..$ profitClass                           : NULL</span></span>
<span id="cb16-96"><a href="#cb16-96" tabindex="-1"></a><span class="co">#&gt;   ..$ profitRates                           : NULL</span></span>
<span id="cb16-97"><a href="#cb16-97" tabindex="-1"></a><span class="co">#&gt;   ..$ scenarios                             : list()</span></span>
<span id="cb16-98"><a href="#cb16-98" tabindex="-1"></a><span class="co">#&gt;  $ Hooks              :List of 11</span></span>
<span id="cb16-99"><a href="#cb16-99" tabindex="-1"></a><span class="co">#&gt;   ..$ adjustCashFlows          : NULL</span></span>
<span id="cb16-100"><a href="#cb16-100" tabindex="-1"></a><span class="co">#&gt;   ..$ adjustCashFlowsCosts     : NULL</span></span>
<span id="cb16-101"><a href="#cb16-101" tabindex="-1"></a><span class="co">#&gt;   ..$ adjustCosts              : NULL</span></span>
<span id="cb16-102"><a href="#cb16-102" tabindex="-1"></a><span class="co">#&gt;   ..$ adjustMinCosts           : NULL</span></span>
<span id="cb16-103"><a href="#cb16-103" tabindex="-1"></a><span class="co">#&gt;   ..$ adjustPresentValues      : NULL</span></span>
<span id="cb16-104"><a href="#cb16-104" tabindex="-1"></a><span class="co">#&gt;   ..$ adjustPresentValuesCosts : NULL</span></span>
<span id="cb16-105"><a href="#cb16-105" tabindex="-1"></a><span class="co">#&gt;   ..$ adjustPremiumCoefficients: NULL</span></span>
<span id="cb16-106"><a href="#cb16-106" tabindex="-1"></a><span class="co">#&gt;   ..$ adjustPremiums           : NULL</span></span>
<span id="cb16-107"><a href="#cb16-107" tabindex="-1"></a><span class="co">#&gt;   ..$ adjustPVForReserves      : NULL</span></span>
<span id="cb16-108"><a href="#cb16-108" tabindex="-1"></a><span class="co">#&gt;   ..$ premiumRebateCalculation : NULL</span></span>
<span id="cb16-109"><a href="#cb16-109" tabindex="-1"></a><span class="co">#&gt;   ..$ Rounding                 : NULL</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co"># pandoc.listRK(InsuranceContract.ParameterDefaults)</span></span></code></pre></div>
</div>
<div id="tarif-and-contract-specification" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Tarif and Contract
Specification</h1>
<p>An insurance contract is modelled by the abstract product
specification (<code>InsuranceTarif</code> class) and the concrete
(individualized) <code>InsuranceContract</code>.</p>
<ul>
<li>The <code>InsuranceTarif</code> object describes the product in
abstract terms, holds default parameters and provides all calculation
functions for cash flows, present values, premiums and reserves
(provided the contract’s actual Parameters). It does not, however, hold
contract-specific data.</li>
<li>The <code>InsuranceContract</code> object holds the individual
contract data (like age, contract closing date, sum insured, etc.) that
override the tariff’s defaults. It also holds a pointer to the insurance
tariff and provides the general logic to calculate all parts of an
insurance contract by calling the corresponding functions of the
tariff.</li>
</ul>
<p>The insurance contract and the underlying insurance tariff have the
same possible parameters in its constructors: The
<code>InsuranceTarif</code> uses them to define defaults for contracts
that use the tariff, while the parameters passed to the contract either
provide the individually required data like age, sum insured or
maturity, or they can override the defaults provided by the tariff. In
theory, one could even create a contract with an empty underlying tariff
and provide all tariff-specific parameters also in the contract’s
<code>new</code> call.</p>
<div id="creating-the-tariff" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Creating the
tariff</h2>
<p>The <code>InsuranceTarif</code> class provides a way to define an
abstract insurance product. The most important parameters to be passed
in the <code>InsuranceTarif$new()</code> call are:</p>
<table>
<colgroup>
<col width="35%" />
<col width="64%" />
</colgroup>
<tbody>
<tr class="odd">
<td align="left"><strong>General settings for the Tariff</strong></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><code>name</code>, <code>tarif</code>,
<code>desc</code></td>
<td align="left">IDs and human-readable descriptions of the insurance
product. They are just used as labels and array keys, but do not
influence the calculations.</td>
</tr>
<tr class="odd">
<td align="left"><code>type</code></td>
<td align="left">the most important parameter, defining the type of life
insurance product (endowment, pure endowment, annuity, whole life
insurance, dread-disease insurance, etc.)</td>
</tr>
<tr class="even">
<td align="left"><strong>Actuarial Bases for the Tariff</strong></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><code>mortalityTable</code></td>
<td align="left">a <code>MortalityTable</code> Object (package
“MortalityTables”), providing the transition probabilities (typically
death probabilities, but potentially also morbidity in dread-disease
insurances)</td>
</tr>
<tr class="even">
<td align="left"><code>i</code></td>
<td align="left">Guaranteed interest rate</td>
</tr>
<tr class="odd">
<td align="left"><code>costs</code>, <code>unitcosts</code></td>
<td align="left">passed a data structure for all cost parameters (see
below)</td>
</tr>
<tr class="even">
<td align="left"><code>premiumFrequencyLoading</code></td>
<td align="left">surcharge for premium payments more often than yearly
(as a named list)</td>
</tr>
<tr class="odd">
<td align="left"><code>premiumRefund</code></td>
<td align="left">how much of the (gross) premium paid is returned upon
death (often provided e.g. in deferred annuities or pure endowments with
no fixed death benefit)</td>
</tr>
<tr class="even">
<td align="left"><code>tax</code></td>
<td align="left">insurance tax</td>
</tr>
<tr class="odd">
<td align="left"><strong>Benefit calculation</strong></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><code>surrenderValueCalculation</code></td>
<td align="left">can be passed a hook function that calculates the
surrender value given the current reserves at each time step</td>
</tr>
</tbody>
</table>
<p>A typical call looks like the following for a pure endowment with
gross premium refund upon death and a linearly decreasing surrender
penalty:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>Tarif.PureEnd <span class="ot">=</span> InsuranceTarif<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">&quot;Example Tariff - Pure Endowment&quot;</span>,</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">&quot;pureendowment&quot;</span>,</span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>  <span class="at">tarif =</span> <span class="st">&quot;PE1-RP&quot;</span>,</span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>  <span class="at">desc =</span> <span class="st">&quot;A pure endowment with regular premiums (standard tariff)&quot;</span>,</span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a>  <span class="at">mortalityTable =</span> mort.AT.census.<span class="fl">2011.</span>unisex,</span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a>  <span class="at">i =</span> <span class="fl">0.005</span>,</span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a>  <span class="co"># Costs: 4% acquisition, where 2.5% are zillmered, 5\% of each premium as beta costs, </span></span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a>  <span class="co">#        1%o administration costs of the sum insured over the whole contract period</span></span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a>  <span class="at">costs =</span> <span class="fu">initializeCosts</span>(<span class="at">alpha =</span> <span class="fl">0.04</span>, <span class="at">Zillmer =</span> <span class="fl">0.025</span>, <span class="at">beta =</span> <span class="fl">0.05</span>, <span class="at">gamma.contract =</span> <span class="fl">0.001</span>, <span class="at">gamma.paidUp =</span> <span class="fl">0.001</span>),</span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a>  <span class="at">unitcosts =</span> <span class="dv">10</span>,</span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a></span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a>  <span class="co"># Yearly premiums get no surcharge, monthly premiums add +4%</span></span>
<span id="cb18-15"><a href="#cb18-15" tabindex="-1"></a>  <span class="at">premiumFrequencyLoading =</span> <span class="fu">list</span>(<span class="st">&quot;1&quot;</span> <span class="ot">=</span> <span class="dv">0</span>, <span class="st">&quot;12&quot;</span> <span class="ot">=</span> <span class="fl">0.04</span>),</span>
<span id="cb18-16"><a href="#cb18-16" tabindex="-1"></a>  <span class="at">premiumRefund =</span> <span class="dv">1</span>,  <span class="co"># Full gross premium refund upon death</span></span>
<span id="cb18-17"><a href="#cb18-17" tabindex="-1"></a>  <span class="at">tax =</span> <span class="fl">0.04</span>,         <span class="co"># 4% insurance tas</span></span>
<span id="cb18-18"><a href="#cb18-18" tabindex="-1"></a></span>
<span id="cb18-19"><a href="#cb18-19" tabindex="-1"></a>  <span class="at">surrenderValueCalculation =</span> <span class="cf">function</span>(surrenderReserve, params, values) {</span>
<span id="cb18-20"><a href="#cb18-20" tabindex="-1"></a>    n <span class="ot">=</span> params<span class="sc">$</span>ContractData<span class="sc">$</span>policyPeriod</span>
<span id="cb18-21"><a href="#cb18-21" tabindex="-1"></a>    <span class="co"># Surrender Penalty is 10% at the beginning and decreases linearly to 0%</span></span>
<span id="cb18-22"><a href="#cb18-22" tabindex="-1"></a>    surrenderReserve <span class="sc">*</span> (<span class="fl">0.9</span> <span class="sc">+</span> <span class="fl">0.1</span> <span class="sc">*</span> (<span class="dv">0</span><span class="sc">:</span>n)<span class="sc">/</span>n)</span>
<span id="cb18-23"><a href="#cb18-23" tabindex="-1"></a>  }</span>
<span id="cb18-24"><a href="#cb18-24" tabindex="-1"></a>)</span></code></pre></div>
<p>Many parameters do not need to be given explicitly, but instead use
sensible defaults (like the <code>premiumPeriod</code>, which by default
equals the whole contract period, i.e. regular premium payments over the
whole contract duration).</p>
<p>To create a similar tariff with some changes, one can call the
<code>createModification</code> method of the
<code>InsuranceTarif</code> clas, which takes as arguments all insurance
parameters that should be changed for the new tarif.</p>
<p>To create a single-premium version of the pure endowment shown above,
one can simply use a call like:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>Tarif.PureEnd.SP <span class="ot">=</span> Tarif.PureEnd<span class="sc">$</span><span class="fu">createModification</span>(</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">&quot;Example Tariff - Pure Endowment (SP)&quot;</span>,</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>  <span class="at">tarif =</span> <span class="st">&quot;PE1-SP&quot;</span>,</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>  <span class="at">desc =</span> <span class="st">&quot;A pure endowment with single premiums&quot;</span>,</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>  <span class="at">premiumPeriod =</span> <span class="dv">1</span></span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>)</span></code></pre></div>
<div id="sample-tariffs-for-the-most-common-life-insurance-types" class="section level3" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Sample tariffs for
the most common life insurance types</h3>
<p>For the examples in the remainder of this vignette, we can create
some more example tariffs covering the most common types of life
insurance.</p>
<p><strong>General definitions for all tariffs</strong></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="fu">library</span>(MortalityTables)</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="fu">mortalityTables.load</span>(<span class="st">&quot;Austria_Census&quot;</span>)</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="fu">mortalityTables.load</span>(<span class="st">&quot;Austria_Annuities_AVOe2005R&quot;</span>)</span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>  <span class="co"># Costs: 4% acquisition, where 2.5% are zillmered, 5\% of each premium as beta costs, </span></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>  <span class="co">#        1%o acquisition costs of the sum insured over the whole contract period</span></span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a>example.Costs <span class="ot">=</span> <span class="fu">initializeCosts</span>(</span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a>  <span class="at">alpha =</span> <span class="fl">0.04</span>, <span class="at">Zillmer =</span> <span class="fl">0.025</span>, </span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a>  <span class="at">beta =</span> <span class="fl">0.05</span>, </span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a>  <span class="at">gamma.contract =</span> <span class="fl">0.001</span>, <span class="at">gamma.paidUp =</span> <span class="fl">0.001</span></span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a>)</span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a>example.Surrender <span class="ot">=</span> <span class="cf">function</span>(surrenderReserve, params, values) {</span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a>    n <span class="ot">=</span> params<span class="sc">$</span>ContractData<span class="sc">$</span>policyPeriod</span>
<span id="cb20-13"><a href="#cb20-13" tabindex="-1"></a>    <span class="co"># Surrender Penalty is 10% at the beginning and decreases linearly to 0%</span></span>
<span id="cb20-14"><a href="#cb20-14" tabindex="-1"></a>    surrenderReserve <span class="sc">*</span> (<span class="fl">0.9</span> <span class="sc">+</span> <span class="fl">0.1</span> <span class="sc">*</span> (<span class="dv">0</span><span class="sc">:</span>n)<span class="sc">/</span>n)</span>
<span id="cb20-15"><a href="#cb20-15" tabindex="-1"></a>}</span></code></pre></div>
<p><strong>Endowment</strong></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>Tarif.Endowment <span class="ot">=</span> InsuranceTarif<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">&quot;Example Tariff - Endowment&quot;</span>,</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">&quot;endowment&quot;</span>,</span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>  <span class="at">tarif =</span> <span class="st">&quot;EN1&quot;</span>,</span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a>  <span class="at">desc =</span> <span class="st">&quot;An endowment with regular premiums&quot;</span>,</span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a>  <span class="at">mortalityTable =</span> mort.AT.census.<span class="fl">2011.</span>unisex,</span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a>  <span class="at">i =</span> <span class="fl">0.005</span>,</span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a>  <span class="at">costs =</span> example.Costs,</span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a>  <span class="at">unitcosts =</span> <span class="dv">10</span>,</span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a>  <span class="at">tax =</span> <span class="fl">0.04</span>,         <span class="co"># 4% insurance tax</span></span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a>  <span class="at">surrenderValueCalculation =</span> example.Surrender</span>
<span id="cb21-13"><a href="#cb21-13" tabindex="-1"></a>)</span></code></pre></div>
<p><strong>Whole / Term Life Insurance</strong></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>Tarif.Life <span class="ot">=</span> InsuranceTarif<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">&quot;Example Tariff - Whole/Term Life&quot;</span>,</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">&quot;wholelife&quot;</span>,</span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a>  <span class="at">tarif =</span> <span class="st">&quot;Life1&quot;</span>,</span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a>  <span class="at">desc =</span> <span class="st">&quot;A whole or term life insurance with regular premiums&quot;</span>,</span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a>  <span class="at">mortalityTable =</span> mort.AT.census.<span class="fl">2011.</span>unisex,</span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a>  <span class="at">i =</span> <span class="fl">0.005</span>,</span>
<span id="cb22-9"><a href="#cb22-9" tabindex="-1"></a>  <span class="at">costs =</span> example.Costs,</span>
<span id="cb22-10"><a href="#cb22-10" tabindex="-1"></a>  <span class="at">unitcosts =</span> <span class="dv">10</span>,</span>
<span id="cb22-11"><a href="#cb22-11" tabindex="-1"></a>  <span class="at">tax =</span> <span class="fl">0.04</span>,         <span class="co"># 4% insurance tax</span></span>
<span id="cb22-12"><a href="#cb22-12" tabindex="-1"></a>  <span class="at">surrenderValueCalculation =</span> example.Surrender</span>
<span id="cb22-13"><a href="#cb22-13" tabindex="-1"></a>)</span></code></pre></div>
<p><strong>Immediate Annuity (single premium)</strong></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>Tarif.ImmAnnuity <span class="ot">=</span> InsuranceTarif<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">&quot;Example Tariff - Immediate Annuity&quot;</span>,</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">&quot;annuity&quot;</span>,</span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a>  <span class="at">tarif =</span> <span class="st">&quot;Ann1&quot;</span>,</span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a>  <span class="at">desc =</span> <span class="st">&quot;An annuity with single-premium&quot;</span>,</span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a>  <span class="at">premiumPeriod =</span> <span class="dv">1</span>,</span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a></span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a>  <span class="at">mortalityTable =</span> AVOe2005R.unisex,</span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a>  <span class="at">i =</span> <span class="fl">0.005</span>,</span>
<span id="cb23-10"><a href="#cb23-10" tabindex="-1"></a>  <span class="at">costs =</span> example.Costs,</span>
<span id="cb23-11"><a href="#cb23-11" tabindex="-1"></a>  <span class="at">tax =</span> <span class="fl">0.04</span>         <span class="co"># 4% insurance tax</span></span>
<span id="cb23-12"><a href="#cb23-12" tabindex="-1"></a>)</span></code></pre></div>
<p><strong>Deferred Annuity</strong></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="co"># Premium periods and deferral periods can also be given as a function of other</span></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a><span class="co"># contract parameters (like the age at contract inception, etc.)</span></span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a>Tarif.DefAnnuity <span class="ot">=</span> InsuranceTarif<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">&quot;Example Tariff - Deferred Annuity&quot;</span>,</span>
<span id="cb24-5"><a href="#cb24-5" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">&quot;annuity&quot;</span>,</span>
<span id="cb24-6"><a href="#cb24-6" tabindex="-1"></a>  <span class="at">tarif =</span> <span class="st">&quot;Life1&quot;</span>,</span>
<span id="cb24-7"><a href="#cb24-7" tabindex="-1"></a>  <span class="at">desc =</span> <span class="st">&quot;A deferred annuity (life-long payments start at age 65) with reg. premiums&quot;</span>,</span>
<span id="cb24-8"><a href="#cb24-8" tabindex="-1"></a></span>
<span id="cb24-9"><a href="#cb24-9" tabindex="-1"></a>  <span class="at">policyPeriod =</span> <span class="cf">function</span>(params, values) { <span class="dv">120</span> <span class="sc">-</span> params<span class="sc">$</span>ContractData<span class="sc">$</span>age},</span>
<span id="cb24-10"><a href="#cb24-10" tabindex="-1"></a>  <span class="at">deferralPeriod =</span> <span class="cf">function</span>(params, values) { <span class="dv">65</span> <span class="sc">-</span> params<span class="sc">$</span>ContractData<span class="sc">$</span>age},</span>
<span id="cb24-11"><a href="#cb24-11" tabindex="-1"></a>  <span class="at">premiumPeriod =</span> <span class="cf">function</span>(params, values) { <span class="dv">65</span> <span class="sc">-</span> params<span class="sc">$</span>ContractData<span class="sc">$</span>age},</span>
<span id="cb24-12"><a href="#cb24-12" tabindex="-1"></a>    </span>
<span id="cb24-13"><a href="#cb24-13" tabindex="-1"></a>  <span class="at">mortalityTable =</span> AVOe2005R.unisex,</span>
<span id="cb24-14"><a href="#cb24-14" tabindex="-1"></a>  <span class="at">i =</span> <span class="fl">0.005</span>,</span>
<span id="cb24-15"><a href="#cb24-15" tabindex="-1"></a>  <span class="at">costs =</span> example.Costs,</span>
<span id="cb24-16"><a href="#cb24-16" tabindex="-1"></a>  <span class="at">tax =</span> <span class="fl">0.04</span>,         <span class="co"># 4% insurance tax</span></span>
<span id="cb24-17"><a href="#cb24-17" tabindex="-1"></a>  <span class="at">surrenderValueCalculation =</span> example.Surrender</span>
<span id="cb24-18"><a href="#cb24-18" tabindex="-1"></a>)</span></code></pre></div>
<p><strong>Dread-Disease Insurance</strong></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="co"># An example dread-disease tariff, morbidity is assumed linearly increasing with age</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a>ddTable <span class="ot">=</span> <span class="fu">mortalityTable.period</span>(<span class="at">name =</span> <span class="st">&quot;Linear dread-disease table&quot;</span>, </span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a>                                <span class="at">ages =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">100</span>, <span class="at">deathProbs =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">100</span><span class="sc">/</span><span class="dv">500</span>)</span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a>Tarif.DreadDisease <span class="ot">=</span> InsuranceTarif<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">&quot;Example Tariff - Dread-Disease&quot;</span>,</span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">&quot;dread-disease&quot;</span>,</span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a>  <span class="at">tarif =</span> <span class="st">&quot;DD1&quot;</span>,</span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a>  <span class="at">desc =</span> <span class="st">&quot;A dread disease insurance with a lump-sum payment upon diagnosis&quot;</span>,</span>
<span id="cb25-9"><a href="#cb25-9" tabindex="-1"></a></span>
<span id="cb25-10"><a href="#cb25-10" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">50000</span>,</span>
<span id="cb25-11"><a href="#cb25-11" tabindex="-1"></a>  <span class="at">mortalityTable =</span> mort.AT.census.<span class="fl">2011.</span>unisex,</span>
<span id="cb25-12"><a href="#cb25-12" tabindex="-1"></a>  <span class="at">invalidityTable =</span> ddTable,</span>
<span id="cb25-13"><a href="#cb25-13" tabindex="-1"></a>  <span class="at">i =</span> <span class="fl">0.005</span>,</span>
<span id="cb25-14"><a href="#cb25-14" tabindex="-1"></a>  <span class="at">costs =</span> example.Costs,</span>
<span id="cb25-15"><a href="#cb25-15" tabindex="-1"></a>  <span class="at">unitcosts =</span> <span class="dv">10</span>,</span>
<span id="cb25-16"><a href="#cb25-16" tabindex="-1"></a>  <span class="at">tax =</span> <span class="fl">0.04</span>,         <span class="co"># 4% insurance tax</span></span>
<span id="cb25-17"><a href="#cb25-17" tabindex="-1"></a>  <span class="at">surrenderValueCalculation =</span> example.Surrender</span>
<span id="cb25-18"><a href="#cb25-18" tabindex="-1"></a>)</span></code></pre></div>
</div>
</div>
<div id="creating-a-contract-1" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Creating a
contract</h2>
<p>While the tariff describes the general product features, the contract
object holds the data of a concrete contract. All insurance parameters
(see section [All possible parameters and their default values]) can be
given to override tarif defaults.</p>
<p>However, the most important and often used parameters are:</p>
<table>
<colgroup>
<col width="37%" />
<col width="62%" />
</colgroup>
<tbody>
<tr class="odd">
<td align="left"><strong>Information about insuree</strong></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><code>age</code></td>
<td align="left">the age of the insured person at contract start</td>
</tr>
<tr class="odd">
<td align="left"><code>YOB</code></td>
<td align="left">the year of birth of the insured person
(<code>age</code>, <code>YOB</code> and <code>contractClosing</code> are
redundant, at most two need to be given). YOB is only relevant for
cohort mortality tables. For period life tables (which are independent
of the birth year of the person), this parameter is not needed.</td>
</tr>
<tr class="even">
<td align="left"><code>sex</code></td>
<td align="left">relevant for sex-specific life tables (common in the
past)</td>
</tr>
<tr class="odd">
<td align="left"><strong>Contract details</strong></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><code>sumInsured</code></td>
<td align="left">the benefit when the insured event happens. Typically
the lump sum for whole life insurances or endowments, or the (yearly)
payment for annuities</td>
</tr>
<tr class="odd">
<td align="left"><code>policyPeriod</code></td>
<td align="left">the duration of the whole contract</td>
</tr>
<tr class="even">
<td align="left"><code>premiumPeriod</code></td>
<td align="left">how long premiums are paid (1 for
single-premiumcontracts, equal to <code>policyPeriod</code> (default)
for regular premiums)</td>
</tr>
<tr class="odd">
<td align="left"><code>premiumFrequency</code></td>
<td align="left">how often premiums are paid within a year (e.g.1 for
yearly premiums, 4 for quarterly, 12 for monthly)</td>
</tr>
<tr class="even">
<td align="left"><code>contractClosing</code></td>
<td align="left">the starting date of the contract</td>
</tr>
<tr class="odd">
<td align="left"><code>deathBenefit</code></td>
<td align="left">gives the factor of death benefit relative to the sum
insured / survival benefit of endowments (1 means equal death and
survival probabilities), can also be a function with non-constant values
over time</td>
</tr>
<tr class="even">
<td align="left"><code>noMedicalExam</code>,
<code>noMedicalExamRelative</code>, <code>sumRebate</code>,
<code>extraRebate</code>, <code>premiumRebate</code></td>
<td align="left">various types of rebates or charges. They can either be
defined in general functional form in the tariff to apply to all
contracts, or given individually for each contract. For the details,
when each of these rebates are applied, check the formula reference
document.</td>
</tr>
</tbody>
</table>
<p>For the pure endowments defined above, a typical contract would be
created like this:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a>contract.PureEnd <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a>    Tarif.PureEnd,</span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a>    <span class="at">age =</span> <span class="dv">50</span>, <span class="at">policyPeriod =</span> <span class="dv">20</span>, </span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a>    <span class="at">premiumFrequency =</span> <span class="dv">12</span>,</span>
<span id="cb26-5"><a href="#cb26-5" tabindex="-1"></a>    <span class="at">sumInsured =</span> <span class="dv">100000</span>,</span>
<span id="cb26-6"><a href="#cb26-6" tabindex="-1"></a>    <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-07-01&quot;</span>)</span>
<span id="cb26-7"><a href="#cb26-7" tabindex="-1"></a>  )</span></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a>contract.PureEnd<span class="sc">$</span>Values<span class="sc">$</span>premiums</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">unit.net</td>
<td align="right">0.0479</td>
</tr>
<tr class="even">
<td align="left">unit.Zillmer</td>
<td align="right">0.0494</td>
</tr>
<tr class="odd">
<td align="left">unit.gross</td>
<td align="right">0.0539</td>
</tr>
<tr class="even">
<td align="left">net</td>
<td align="right">4786.7874</td>
</tr>
<tr class="odd">
<td align="left">Zillmer</td>
<td align="right">4935.5223</td>
</tr>
<tr class="even">
<td align="left">gross</td>
<td align="right">5394.4876</td>
</tr>
<tr class="odd">
<td align="left">unitcost</td>
<td align="right">0.0000</td>
</tr>
<tr class="even">
<td align="left">written_yearly</td>
<td align="right">5845.4938</td>
</tr>
<tr class="odd">
<td align="left">written_beforetax</td>
<td align="right">468.3889</td>
</tr>
<tr class="even">
<td align="left">tax</td>
<td align="right">18.7356</td>
</tr>
<tr class="odd">
<td align="left">written</td>
<td align="right">487.1245</td>
</tr>
<tr class="even">
<td align="left">additional_capital</td>
<td align="right">0.0000</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>contract.PureEnd<span class="sc">$</span>Values<span class="sc">$</span>premiumComposition</span></code></pre></div>
<table>
<caption>Table continues below</caption>
<colgroup>
<col width="4%" />
<col width="8%" />
<col width="7%" />
<col width="17%" />
<col width="8%" />
<col width="6%" />
<col width="7%" />
<col width="7%" />
<col width="15%" />
<col width="15%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">t</th>
<th align="center">charged</th>
<th align="center">tax</th>
<th align="center">loading.frequency</th>
<th align="center">gross</th>
<th align="center">gamma</th>
<th align="center">beta</th>
<th align="center">alpha</th>
<th align="center">alpha.noZillmer</th>
<th align="center">alpha.Zillmer</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">5834.68</td>
<td align="center">224.41</td>
<td align="center">215.78</td>
<td align="center">5394.49</td>
<td align="center">100</td>
<td align="center">269.72</td>
<td align="center">237.98</td>
<td align="center">89.24</td>
<td align="center">148.73</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">5834.68</td>
<td align="center">224.41</td>
<td align="center">215.78</td>
<td align="center">5394.49</td>
<td align="center">100</td>
<td align="center">269.72</td>
<td align="center">237.98</td>
<td align="center">89.24</td>
<td align="center">148.73</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="center">5834.68</td>
<td align="center">224.41</td>
<td align="center">215.78</td>
<td align="center">5394.49</td>
<td align="center">100</td>
<td align="center">269.72</td>
<td align="center">237.98</td>
<td align="center">89.24</td>
<td align="center">148.73</td>
</tr>
<tr class="even">
<td align="center">3</td>
<td align="center">5834.68</td>
<td align="center">224.41</td>
<td align="center">215.78</td>
<td align="center">5394.49</td>
<td align="center">100</td>
<td align="center">269.72</td>
<td align="center">237.98</td>
<td align="center">89.24</td>
<td align="center">148.73</td>
</tr>
<tr class="odd">
<td align="center">4</td>
<td align="center">5834.68</td>
<td align="center">224.41</td>
<td align="center">215.78</td>
<td align="center">5394.49</td>
<td align="center">100</td>
<td align="center">269.72</td>
<td align="center">237.98</td>
<td align="center">89.24</td>
<td align="center">148.73</td>
</tr>
<tr class="even">
<td align="center">5</td>
<td align="center">5834.68</td>
<td align="center">224.41</td>
<td align="center">215.78</td>
<td align="center">5394.49</td>
<td align="center">100</td>
<td align="center">269.72</td>
<td align="center">237.98</td>
<td align="center">89.24</td>
<td align="center">148.73</td>
</tr>
<tr class="odd">
<td align="center">6</td>
<td align="center">5834.68</td>
<td align="center">224.41</td>
<td align="center">215.78</td>
<td align="center">5394.49</td>
<td align="center">100</td>
<td align="center">269.72</td>
<td align="center">237.98</td>
<td align="center">89.24</td>
<td align="center">148.73</td>
</tr>
<tr class="even">
<td align="center">7</td>
<td align="center">5834.68</td>
<td align="center">224.41</td>
<td align="center">215.78</td>
<td align="center">5394.49</td>
<td align="center">100</td>
<td align="center">269.72</td>
<td align="center">237.98</td>
<td align="center">89.24</td>
<td align="center">148.73</td>
</tr>
<tr class="odd">
<td align="center">8</td>
<td align="center">5834.68</td>
<td align="center">224.41</td>
<td align="center">215.78</td>
<td align="center">5394.49</td>
<td align="center">100</td>
<td align="center">269.72</td>
<td align="center">237.98</td>
<td align="center">89.24</td>
<td align="center">148.73</td>
</tr>
<tr class="even">
<td align="center">9</td>
<td align="center">5834.68</td>
<td align="center">224.41</td>
<td align="center">215.78</td>
<td align="center">5394.49</td>
<td align="center">100</td>
<td align="center">269.72</td>
<td align="center">237.98</td>
<td align="center">89.24</td>
<td align="center">148.73</td>
</tr>
<tr class="odd">
<td align="center">10</td>
<td align="center">5834.68</td>
<td align="center">224.41</td>
<td align="center">215.78</td>
<td align="center">5394.49</td>
<td align="center">100</td>
<td align="center">269.72</td>
<td align="center">237.98</td>
<td align="center">89.24</td>
<td align="center">148.73</td>
</tr>
<tr class="even">
<td align="center">11</td>
<td align="center">5834.68</td>
<td align="center">224.41</td>
<td align="center">215.78</td>
<td align="center">5394.49</td>
<td align="center">100</td>
<td align="center">269.72</td>
<td align="center">237.98</td>
<td align="center">89.24</td>
<td align="center">148.73</td>
</tr>
<tr class="odd">
<td align="center">12</td>
<td align="center">5834.68</td>
<td align="center">224.41</td>
<td align="center">215.78</td>
<td align="center">5394.49</td>
<td align="center">100</td>
<td align="center">269.72</td>
<td align="center">237.98</td>
<td align="center">89.24</td>
<td align="center">148.73</td>
</tr>
<tr class="even">
<td align="center">13</td>
<td align="center">5834.68</td>
<td align="center">224.41</td>
<td align="center">215.78</td>
<td align="center">5394.49</td>
<td align="center">100</td>
<td align="center">269.72</td>
<td align="center">237.98</td>
<td align="center">89.24</td>
<td align="center">148.73</td>
</tr>
<tr class="odd">
<td align="center">14</td>
<td align="center">5834.68</td>
<td align="center">224.41</td>
<td align="center">215.78</td>
<td align="center">5394.49</td>
<td align="center">100</td>
<td align="center">269.72</td>
<td align="center">237.98</td>
<td align="center">89.24</td>
<td align="center">148.73</td>
</tr>
<tr class="even">
<td align="center">15</td>
<td align="center">5834.68</td>
<td align="center">224.41</td>
<td align="center">215.78</td>
<td align="center">5394.49</td>
<td align="center">100</td>
<td align="center">269.72</td>
<td align="center">237.98</td>
<td align="center">89.24</td>
<td align="center">148.73</td>
</tr>
<tr class="odd">
<td align="center">16</td>
<td align="center">5834.68</td>
<td align="center">224.41</td>
<td align="center">215.78</td>
<td align="center">5394.49</td>
<td align="center">100</td>
<td align="center">269.72</td>
<td align="center">237.98</td>
<td align="center">89.24</td>
<td align="center">148.73</td>
</tr>
<tr class="even">
<td align="center">17</td>
<td align="center">5834.68</td>
<td align="center">224.41</td>
<td align="center">215.78</td>
<td align="center">5394.49</td>
<td align="center">100</td>
<td align="center">269.72</td>
<td align="center">237.98</td>
<td align="center">89.24</td>
<td align="center">148.73</td>
</tr>
<tr class="odd">
<td align="center">18</td>
<td align="center">5834.68</td>
<td align="center">224.41</td>
<td align="center">215.78</td>
<td align="center">5394.49</td>
<td align="center">100</td>
<td align="center">269.72</td>
<td align="center">237.98</td>
<td align="center">89.24</td>
<td align="center">148.73</td>
</tr>
<tr class="even">
<td align="center">19</td>
<td align="center">5834.68</td>
<td align="center">224.41</td>
<td align="center">215.78</td>
<td align="center">5394.49</td>
<td align="center">100</td>
<td align="center">269.72</td>
<td align="center">237.98</td>
<td align="center">89.24</td>
<td align="center">148.73</td>
</tr>
<tr class="odd">
<td align="center">20</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
</tbody>
</table>
<table style="width:54%;">
<colgroup>
<col width="13%" />
<col width="13%" />
<col width="12%" />
<col width="13%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Zillmer</th>
<th align="center">net</th>
<th align="center">risk</th>
<th align="center">savings</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">4935.52</td>
<td align="center">4786.79</td>
<td align="center">1.64</td>
<td align="center">4785.14</td>
</tr>
<tr class="even">
<td align="center">4935.52</td>
<td align="center">4786.79</td>
<td align="center">3.57</td>
<td align="center">4783.22</td>
</tr>
<tr class="odd">
<td align="center">4935.52</td>
<td align="center">4786.79</td>
<td align="center">5.81</td>
<td align="center">4780.98</td>
</tr>
<tr class="even">
<td align="center">4935.52</td>
<td align="center">4786.79</td>
<td align="center">8.39</td>
<td align="center">4778.40</td>
</tr>
<tr class="odd">
<td align="center">4935.52</td>
<td align="center">4786.79</td>
<td align="center">11.34</td>
<td align="center">4775.45</td>
</tr>
<tr class="even">
<td align="center">4935.52</td>
<td align="center">4786.79</td>
<td align="center">14.72</td>
<td align="center">4772.07</td>
</tr>
<tr class="odd">
<td align="center">4935.52</td>
<td align="center">4786.79</td>
<td align="center">18.59</td>
<td align="center">4768.20</td>
</tr>
<tr class="even">
<td align="center">4935.52</td>
<td align="center">4786.79</td>
<td align="center">22.98</td>
<td align="center">4763.80</td>
</tr>
<tr class="odd">
<td align="center">4935.52</td>
<td align="center">4786.79</td>
<td align="center">27.93</td>
<td align="center">4758.85</td>
</tr>
<tr class="even">
<td align="center">4935.52</td>
<td align="center">4786.79</td>
<td align="center">33.46</td>
<td align="center">4753.32</td>
</tr>
<tr class="odd">
<td align="center">4935.52</td>
<td align="center">4786.79</td>
<td align="center">39.55</td>
<td align="center">4747.23</td>
</tr>
<tr class="even">
<td align="center">4935.52</td>
<td align="center">4786.79</td>
<td align="center">46.17</td>
<td align="center">4740.61</td>
</tr>
<tr class="odd">
<td align="center">4935.52</td>
<td align="center">4786.79</td>
<td align="center">53.22</td>
<td align="center">4733.57</td>
</tr>
<tr class="even">
<td align="center">4935.52</td>
<td align="center">4786.79</td>
<td align="center">60.74</td>
<td align="center">4726.05</td>
</tr>
<tr class="odd">
<td align="center">4935.52</td>
<td align="center">4786.79</td>
<td align="center">68.65</td>
<td align="center">4718.14</td>
</tr>
<tr class="even">
<td align="center">4935.52</td>
<td align="center">4786.79</td>
<td align="center">76.93</td>
<td align="center">4709.86</td>
</tr>
<tr class="odd">
<td align="center">4935.52</td>
<td align="center">4786.79</td>
<td align="center">85.61</td>
<td align="center">4701.18</td>
</tr>
<tr class="even">
<td align="center">4935.52</td>
<td align="center">4786.79</td>
<td align="center">95.05</td>
<td align="center">4691.74</td>
</tr>
<tr class="odd">
<td align="center">4935.52</td>
<td align="center">4786.79</td>
<td align="center">105.52</td>
<td align="center">4681.27</td>
</tr>
<tr class="even">
<td align="center">4935.52</td>
<td align="center">4786.79</td>
<td align="center">117.11</td>
<td align="center">4669.68</td>
</tr>
<tr class="odd">
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
</tbody>
</table>
<p>Due to the full premium refund in case of death, there is only very
little biometric risk involved. If the premium refund is not included in
the contract, then we have a negative biometric risk over the whole
period (i.e. negative risk premium, because upon death the existing
reserves is shared with the collective). The premium refund can be
overridden directly in the contract call:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a>contract.PureEnd.NoRefund <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a>    Tarif.PureEnd,</span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a>    <span class="at">age =</span> <span class="dv">50</span>, <span class="at">policyPeriod =</span> <span class="dv">20</span>, </span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a>    <span class="at">premiumFrequency =</span> <span class="dv">12</span>,</span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a>    <span class="at">sumInsured =</span> <span class="dv">100000</span>,</span>
<span id="cb29-6"><a href="#cb29-6" tabindex="-1"></a>    <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-07-01&quot;</span>),</span>
<span id="cb29-7"><a href="#cb29-7" tabindex="-1"></a>    <span class="at">premiumRefund =</span> <span class="dv">0</span></span>
<span id="cb29-8"><a href="#cb29-8" tabindex="-1"></a>  )</span></code></pre></div>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="fu">cbind</span>(<span class="st">`</span><span class="at">With refund</span><span class="st">`</span> <span class="ot">=</span> contract.PureEnd<span class="sc">$</span>Values<span class="sc">$</span>premiums, <span class="st">`</span><span class="at">Without refund</span><span class="st">`</span> <span class="ot">=</span> contract.PureEnd.NoRefund<span class="sc">$</span>Values<span class="sc">$</span>premiums)</span></code></pre></div>
<table style="width:78%;">
<colgroup>
<col width="34%" />
<col width="19%" />
<col width="23%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">With refund</th>
<th align="center">Without refund</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>unit.net</strong></td>
<td align="center">0.05</td>
<td align="center">0.04</td>
</tr>
<tr class="even">
<td align="center"><strong>unit.Zillmer</strong></td>
<td align="center">0.05</td>
<td align="center">0.04</td>
</tr>
<tr class="odd">
<td align="center"><strong>unit.gross</strong></td>
<td align="center">0.05</td>
<td align="center">0.05</td>
</tr>
<tr class="even">
<td align="center"><strong>net</strong></td>
<td align="center">4786.79</td>
<td align="center">4267.91</td>
</tr>
<tr class="odd">
<td align="center"><strong>Zillmer</strong></td>
<td align="center">4935.52</td>
<td align="center">4400.85</td>
</tr>
<tr class="even">
<td align="center"><strong>gross</strong></td>
<td align="center">5394.49</td>
<td align="center">4821.70</td>
</tr>
<tr class="odd">
<td align="center"><strong>unitcost</strong></td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
<tr class="even">
<td align="center"><strong>written_yearly</strong></td>
<td align="center">5845.49</td>
<td align="center">5225.97</td>
</tr>
<tr class="odd">
<td align="center"><strong>written_beforetax</strong></td>
<td align="center">468.39</td>
<td align="center">418.75</td>
</tr>
<tr class="even">
<td align="center"><strong>tax</strong></td>
<td align="center">18.74</td>
<td align="center">16.75</td>
</tr>
<tr class="odd">
<td align="center"><strong>written</strong></td>
<td align="center">487.12</td>
<td align="center">435.50</td>
</tr>
<tr class="even">
<td align="center"><strong>additional_capital</strong></td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="fu">cbind</span>(</span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a>  <span class="st">`</span><span class="at">Gross premium with refund</span><span class="st">`</span> <span class="ot">=</span> contract.PureEnd<span class="sc">$</span>Values<span class="sc">$</span>premiumComposition[,<span class="st">&quot;gross&quot;</span>],</span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a>  <span class="st">`</span><span class="at">Gross premium w/o refund</span><span class="st">`</span> <span class="ot">=</span> contract.PureEnd.NoRefund<span class="sc">$</span>Values<span class="sc">$</span>premiumComposition[,<span class="st">&quot;gross&quot;</span>],</span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a>  <span class="st">`</span><span class="at">Risk premium with refund</span><span class="st">`</span> <span class="ot">=</span> contract.PureEnd<span class="sc">$</span>Values<span class="sc">$</span>premiumComposition[,<span class="st">&quot;risk&quot;</span>],</span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a>  <span class="st">`</span><span class="at">Risk premium w/o refund</span><span class="st">`</span> <span class="ot">=</span> contract.PureEnd.NoRefund<span class="sc">$</span>Values<span class="sc">$</span>premiumComposition[,<span class="st">&quot;risk&quot;</span>]</span>
<span id="cb31-6"><a href="#cb31-6" tabindex="-1"></a>)</span></code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="4%" />
<col width="24%" />
<col width="23%" />
<col width="23%" />
<col width="23%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">t</th>
<th align="center">Gross premium with refund</th>
<th align="center">Gross premium w/o refund</th>
<th align="center">Risk premium with refund</th>
<th align="center">Risk premium w/o refund</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">5394.49</td>
<td align="center">4821.7</td>
<td align="center">1.64</td>
<td align="center">-12.08</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">5394.49</td>
<td align="center">4821.7</td>
<td align="center">3.57</td>
<td align="center">-26.87</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="center">5394.49</td>
<td align="center">4821.7</td>
<td align="center">5.81</td>
<td align="center">-44.75</td>
</tr>
<tr class="even">
<td align="center">3</td>
<td align="center">5394.49</td>
<td align="center">4821.7</td>
<td align="center">8.39</td>
<td align="center">-66.18</td>
</tr>
<tr class="odd">
<td align="center">4</td>
<td align="center">5394.49</td>
<td align="center">4821.7</td>
<td align="center">11.34</td>
<td align="center">-91.73</td>
</tr>
<tr class="even">
<td align="center">5</td>
<td align="center">5394.49</td>
<td align="center">4821.7</td>
<td align="center">14.72</td>
<td align="center">-122.10</td>
</tr>
<tr class="odd">
<td align="center">6</td>
<td align="center">5394.49</td>
<td align="center">4821.7</td>
<td align="center">18.59</td>
<td align="center">-158.24</td>
</tr>
<tr class="even">
<td align="center">7</td>
<td align="center">5394.49</td>
<td align="center">4821.7</td>
<td align="center">22.98</td>
<td align="center">-200.94</td>
</tr>
<tr class="odd">
<td align="center">8</td>
<td align="center">5394.49</td>
<td align="center">4821.7</td>
<td align="center">27.93</td>
<td align="center">-250.93</td>
</tr>
<tr class="even">
<td align="center">9</td>
<td align="center">5394.49</td>
<td align="center">4821.7</td>
<td align="center">33.46</td>
<td align="center">-309.03</td>
</tr>
<tr class="odd">
<td align="center">10</td>
<td align="center">5394.49</td>
<td align="center">4821.7</td>
<td align="center">39.55</td>
<td align="center">-375.78</td>
</tr>
<tr class="even">
<td align="center">11</td>
<td align="center">5394.49</td>
<td align="center">4821.7</td>
<td align="center">46.17</td>
<td align="center">-451.60</td>
</tr>
<tr class="odd">
<td align="center">12</td>
<td align="center">5394.49</td>
<td align="center">4821.7</td>
<td align="center">53.22</td>
<td align="center">-536.22</td>
</tr>
<tr class="even">
<td align="center">13</td>
<td align="center">5394.49</td>
<td align="center">4821.7</td>
<td align="center">60.74</td>
<td align="center">-630.84</td>
</tr>
<tr class="odd">
<td align="center">14</td>
<td align="center">5394.49</td>
<td align="center">4821.7</td>
<td align="center">68.65</td>
<td align="center">-735.56</td>
</tr>
<tr class="even">
<td align="center">15</td>
<td align="center">5394.49</td>
<td align="center">4821.7</td>
<td align="center">76.93</td>
<td align="center">-851.06</td>
</tr>
<tr class="odd">
<td align="center">16</td>
<td align="center">5394.49</td>
<td align="center">4821.7</td>
<td align="center">85.61</td>
<td align="center">-978.61</td>
</tr>
<tr class="even">
<td align="center">17</td>
<td align="center">5394.49</td>
<td align="center">4821.7</td>
<td align="center">95.05</td>
<td align="center">-1123.58</td>
</tr>
<tr class="odd">
<td align="center">18</td>
<td align="center">5394.49</td>
<td align="center">4821.7</td>
<td align="center">105.52</td>
<td align="center">-1291.04</td>
</tr>
<tr class="even">
<td align="center">19</td>
<td align="center">5394.49</td>
<td align="center">4821.7</td>
<td align="center">117.11</td>
<td align="center">-1484.30</td>
</tr>
<tr class="odd">
<td align="center">20</td>
<td align="center">0.00</td>
<td align="center">0.0</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
</tbody>
</table>
<p>To create a single-premium contract, one can either use the
single-premium tarif defined above, or simply pass
<code>premiumPeriod=1</code> to the call:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a>contract.PureEnd.SP1 <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a>    Tarif.PureEnd,</span>
<span id="cb32-3"><a href="#cb32-3" tabindex="-1"></a>    <span class="at">age =</span> <span class="dv">40</span>, <span class="at">policyPeriod =</span> <span class="dv">45</span>, <span class="at">premiumPeriod =</span> <span class="dv">1</span>,</span>
<span id="cb32-4"><a href="#cb32-4" tabindex="-1"></a>    <span class="at">sumInsured =</span> <span class="dv">100000</span>,</span>
<span id="cb32-5"><a href="#cb32-5" tabindex="-1"></a>    <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-07-01&quot;</span>)</span>
<span id="cb32-6"><a href="#cb32-6" tabindex="-1"></a>  )</span>
<span id="cb32-7"><a href="#cb32-7" tabindex="-1"></a>contract.PureEnd.SP2 <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb32-8"><a href="#cb32-8" tabindex="-1"></a>    Tarif.PureEnd.SP,</span>
<span id="cb32-9"><a href="#cb32-9" tabindex="-1"></a>    <span class="at">age =</span> <span class="dv">40</span>, <span class="at">policyPeriod =</span> <span class="dv">45</span>, <span class="co"># premiumPeriod already set by tariff!</span></span>
<span id="cb32-10"><a href="#cb32-10" tabindex="-1"></a>    <span class="at">sumInsured =</span> <span class="dv">100000</span>,</span>
<span id="cb32-11"><a href="#cb32-11" tabindex="-1"></a>    <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-07-01&quot;</span>)</span>
<span id="cb32-12"><a href="#cb32-12" tabindex="-1"></a>  )</span>
<span id="cb32-13"><a href="#cb32-13" tabindex="-1"></a></span>
<span id="cb32-14"><a href="#cb32-14" tabindex="-1"></a><span class="fu">all_equal</span>(contract.PureEnd.SP1<span class="sc">$</span>Values<span class="sc">$</span>reserves, contract.PureEnd.SP2<span class="sc">$</span>Values<span class="sc">$</span>reserves)</span>
<span id="cb32-15"><a href="#cb32-15" tabindex="-1"></a><span class="co">#&gt; Warning: `all_equal()` was deprecated in dplyr 1.1.0.</span></span>
<span id="cb32-16"><a href="#cb32-16" tabindex="-1"></a><span class="co">#&gt; ℹ Please use `all.equal()` instead.</span></span>
<span id="cb32-17"><a href="#cb32-17" tabindex="-1"></a><span class="co">#&gt; ℹ And manually order the rows/cols as needed</span></span>
<span id="cb32-18"><a href="#cb32-18" tabindex="-1"></a><span class="co">#&gt; This warning is displayed once every 8 hours.</span></span>
<span id="cb32-19"><a href="#cb32-19" tabindex="-1"></a><span class="co">#&gt; Call `lifecycle::last_lifecycle_warnings()` to see where this warning was</span></span>
<span id="cb32-20"><a href="#cb32-20" tabindex="-1"></a><span class="co">#&gt; generated.</span></span>
<span id="cb32-21"><a href="#cb32-21" tabindex="-1"></a><span class="co">#&gt; `y` must be a data frame.</span></span></code></pre></div>
</div>
<div id="determining-sum-insured-from-the-premium" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Determining Sum
Insured from the premium</h2>
<p>By default, the insurance contract is created for a given sum insured
and the premiums are calculated accordingly. Sometimes, the reverse is
needed: The premium (either actuarial gross premium, written premium
before or after taxes) is given and the corresponding sum insured should
be determined automatically.</p>
<p>The <code>InsuranceContract</code> constructor / parameter set has an
additional field <code>premium</code> to indicate the desired premium
(written premium after tax by default) from which the sum insured is
then calculated:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="co"># Premium calculated from sumInsured</span></span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a>contract.End <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a>  Tarif.Endowment, <span class="at">age =</span> <span class="dv">35</span>, <span class="at">policyPeriod =</span> <span class="dv">10</span>,</span>
<span id="cb33-4"><a href="#cb33-4" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-08-18&quot;</span>), </span>
<span id="cb33-5"><a href="#cb33-5" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">10000</span>);</span>
<span id="cb33-6"><a href="#cb33-6" tabindex="-1"></a></span>
<span id="cb33-7"><a href="#cb33-7" tabindex="-1"></a><span class="co"># sumInsured derived from written premium</span></span>
<span id="cb33-8"><a href="#cb33-8" tabindex="-1"></a>contract.End.premium <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb33-9"><a href="#cb33-9" tabindex="-1"></a>  Tarif.Endowment, <span class="at">age =</span> <span class="dv">35</span>, <span class="at">policyPeriod =</span> <span class="dv">10</span>,</span>
<span id="cb33-10"><a href="#cb33-10" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-08-18&quot;</span>), </span>
<span id="cb33-11"><a href="#cb33-11" tabindex="-1"></a>  <span class="at">premium =</span> <span class="fl">1139.06</span>);</span>
<span id="cb33-12"><a href="#cb33-12" tabindex="-1"></a></span>
<span id="cb33-13"><a href="#cb33-13" tabindex="-1"></a>contract.End.premiumBeforeTax <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb33-14"><a href="#cb33-14" tabindex="-1"></a>  Tarif.Endowment, <span class="at">age =</span> <span class="dv">35</span>, <span class="at">policyPeriod =</span> <span class="dv">10</span>,</span>
<span id="cb33-15"><a href="#cb33-15" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-08-18&quot;</span>), </span>
<span id="cb33-16"><a href="#cb33-16" tabindex="-1"></a>  <span class="at">premium =</span> <span class="fu">c</span>(<span class="at">written_beforetax =</span> <span class="fl">1095.25</span>));</span>
<span id="cb33-17"><a href="#cb33-17" tabindex="-1"></a></span>
<span id="cb33-18"><a href="#cb33-18" tabindex="-1"></a>contract.End.premiumGross <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb33-19"><a href="#cb33-19" tabindex="-1"></a>  Tarif.Endowment, <span class="at">age =</span> <span class="dv">35</span>, <span class="at">policyPeriod =</span> <span class="dv">10</span>,</span>
<span id="cb33-20"><a href="#cb33-20" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-08-18&quot;</span>), </span>
<span id="cb33-21"><a href="#cb33-21" tabindex="-1"></a>  <span class="at">premium =</span> <span class="fu">c</span>(<span class="at">gross =</span> <span class="fl">1085.25</span>));</span></code></pre></div>
<pre><code>#&gt; # A tibble: 4 × 7
#&gt;   Contract              net   Zillmer gross written_beforetax written sumInsured
#&gt;   &lt;chr&gt;                 &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;             &lt;chr&gt;   &lt;chr&gt;     
#&gt; 1 contract.End          976.… 1004.2… 1085… 1095.24887464624  1139.0… 10000     
#&gt; 2 contract.End.premium  976.… 1004.2… 1085… 1095.25           1139.06 10000.010…
#&gt; 3 contract.End.premium… 976.… 1004.2… 1085… 1095.25           1139.06 10000.010…
#&gt; 4 contract.End.premium… 976.… 1004.2… 1085… 1095.25           1139.06 10000.010…</code></pre>
<p>The final written premium can be directly passed as the
<code>premium</code> argument. Other types of premium must be passed as
a named number (i.e. a one-element vector with name “gross”,
“written_beforetax” or “written”).</p>
<p>If a premium is prescribed, a <code>sumInsured</code> must not be
given. If both are given, the sumInsured is used and the prescribed
premium is silently ignored.</p>
<p>The are cases, when the sumInsured cannot be derived from a
prescribed premium. One relevant case is when a premium rebate depends
on the sum insured, since in this case we need the sumInsured to
calculate the rebate and thus the premium. All rebates, add-ons and
other parameters will temporarily use a sumInsured=1 during the
calculation of the actual sumInsured!</p>
</div>
<div id="providing-additional-capital-at-contract-inception" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Providing additional
capital at contract inception</h2>
<p>Often, when a contract is changed significantly, this is modelled as
a totally new contract, with the existing reserve provided as additional
one-time payment for the follow-up contract. This is different from a
single-premium contract, because the new contract can have regular
premiums, just the existing reserve is used as the initial reserve of
the new contract.</p>
<p>The package provides the argument <code>initialCapital</code> to
provide initial capital that is also included in the calculation of the
premium of the contract.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="co"># Contract with initial capital of 5.000 EUR</span></span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a>contract.Endow.initialCapital <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a>  <span class="at">tarif =</span> Tarif.Endowment,</span>
<span id="cb35-4"><a href="#cb35-4" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">10000</span>,</span>
<span id="cb35-5"><a href="#cb35-5" tabindex="-1"></a>  <span class="at">initialCapital =</span> <span class="dv">5000</span>,</span>
<span id="cb35-6"><a href="#cb35-6" tabindex="-1"></a>  <span class="at">age =</span> <span class="dv">40</span>, <span class="at">policyPeriod =</span> <span class="dv">10</span>,</span>
<span id="cb35-7"><a href="#cb35-7" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-09-01&quot;</span>)</span>
<span id="cb35-8"><a href="#cb35-8" tabindex="-1"></a>)</span>
<span id="cb35-9"><a href="#cb35-9" tabindex="-1"></a><span class="co"># For comparison: Contract without initial capital of 5.000 EUR</span></span>
<span id="cb35-10"><a href="#cb35-10" tabindex="-1"></a>contract.Endow <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb35-11"><a href="#cb35-11" tabindex="-1"></a>  <span class="at">tarif =</span> Tarif.Endowment,</span>
<span id="cb35-12"><a href="#cb35-12" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">10000</span>,</span>
<span id="cb35-13"><a href="#cb35-13" tabindex="-1"></a>  <span class="at">age =</span> <span class="dv">40</span>, <span class="at">policyPeriod =</span> <span class="dv">10</span>,</span>
<span id="cb35-14"><a href="#cb35-14" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-09-01&quot;</span>)</span>
<span id="cb35-15"><a href="#cb35-15" tabindex="-1"></a>)</span></code></pre></div>
<p>Comparing the reserves, one can clearly see the initial capital used
as initial reserve:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="fu">data.frame</span>(</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a>  <span class="st">`</span><span class="at">Premium with initialCapital</span><span class="st">`</span><span class="ot">=</span> contract.Endow.initialCapital<span class="sc">$</span>Values<span class="sc">$</span>premiumComposition[,<span class="st">&quot;charged&quot;</span>], </span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a>  <span class="st">`</span><span class="at">Premium without initialCapital</span><span class="st">`</span><span class="ot">=</span> contract.Endow<span class="sc">$</span>Values<span class="sc">$</span>premiumComposition[,<span class="st">&quot;charged&quot;</span>], </span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a>  <span class="st">`</span><span class="at">Res.with initialCapital</span><span class="st">`</span><span class="ot">=</span> contract.Endow.initialCapital<span class="sc">$</span>Values<span class="sc">$</span>reserves[,<span class="st">&quot;contractual&quot;</span>], </span>
<span id="cb36-5"><a href="#cb36-5" tabindex="-1"></a>  <span class="st">`</span><span class="at">Res.without initialCapital</span><span class="st">`</span><span class="ot">=</span> contract.Endow<span class="sc">$</span>Values<span class="sc">$</span>reserves[,<span class="st">&quot;contractual&quot;</span>]</span>
<span id="cb36-6"><a href="#cb36-6" tabindex="-1"></a>)</span>
<span id="cb36-7"><a href="#cb36-7" tabindex="-1"></a><span class="co">#&gt;    Premium.with.initialCapital Premium.without.initialCapital</span></span>
<span id="cb36-8"><a href="#cb36-8" tabindex="-1"></a><span class="co">#&gt; 0                     542.9533                       1131.394</span></span>
<span id="cb36-9"><a href="#cb36-9" tabindex="-1"></a><span class="co">#&gt; 1                     542.9533                       1131.394</span></span>
<span id="cb36-10"><a href="#cb36-10" tabindex="-1"></a><span class="co">#&gt; 2                     542.9533                       1131.394</span></span>
<span id="cb36-11"><a href="#cb36-11" tabindex="-1"></a><span class="co">#&gt; 3                     542.9533                       1131.394</span></span>
<span id="cb36-12"><a href="#cb36-12" tabindex="-1"></a><span class="co">#&gt; 4                     542.9533                       1131.394</span></span>
<span id="cb36-13"><a href="#cb36-13" tabindex="-1"></a><span class="co">#&gt; 5                     542.9533                       1131.394</span></span>
<span id="cb36-14"><a href="#cb36-14" tabindex="-1"></a><span class="co">#&gt; 6                     542.9533                       1131.394</span></span>
<span id="cb36-15"><a href="#cb36-15" tabindex="-1"></a><span class="co">#&gt; 7                     542.9533                       1131.394</span></span>
<span id="cb36-16"><a href="#cb36-16" tabindex="-1"></a><span class="co">#&gt; 8                     542.9533                       1131.394</span></span>
<span id="cb36-17"><a href="#cb36-17" tabindex="-1"></a><span class="co">#&gt; 9                     542.9533                       1131.394</span></span>
<span id="cb36-18"><a href="#cb36-18" tabindex="-1"></a><span class="co">#&gt; 10                      0.0000                          0.000</span></span>
<span id="cb36-19"><a href="#cb36-19" tabindex="-1"></a><span class="co">#&gt;    Res.with.initialCapital Res.without.initialCapital</span></span>
<span id="cb36-20"><a href="#cb36-20" tabindex="-1"></a><span class="co">#&gt; 0                 4869.482                  -271.9696</span></span>
<span id="cb36-21"><a href="#cb36-21" tabindex="-1"></a><span class="co">#&gt; 1                 5369.821                   729.7741</span></span>
<span id="cb36-22"><a href="#cb36-22" tabindex="-1"></a><span class="co">#&gt; 2                 5872.714                  1736.6324</span></span>
<span id="cb36-23"><a href="#cb36-23" tabindex="-1"></a><span class="co">#&gt; 3                 6378.207                  2748.6945</span></span>
<span id="cb36-24"><a href="#cb36-24" tabindex="-1"></a><span class="co">#&gt; 4                 6886.377                  3766.1190</span></span>
<span id="cb36-25"><a href="#cb36-25" tabindex="-1"></a><span class="co">#&gt; 5                 7397.334                  4789.1206</span></span>
<span id="cb36-26"><a href="#cb36-26" tabindex="-1"></a><span class="co">#&gt; 6                 7911.217                  5817.9828</span></span>
<span id="cb36-27"><a href="#cb36-27" tabindex="-1"></a><span class="co">#&gt; 7                 8428.202                  6853.0547</span></span>
<span id="cb36-28"><a href="#cb36-28" tabindex="-1"></a><span class="co">#&gt; 8                 8948.495                  7894.7497</span></span>
<span id="cb36-29"><a href="#cb36-29" tabindex="-1"></a><span class="co">#&gt; 9                 9472.336                  8943.5471</span></span>
<span id="cb36-30"><a href="#cb36-30" tabindex="-1"></a><span class="co">#&gt; 10               10000.000                 10000.0000</span></span></code></pre></div>
</div>
<div id="premium-waivers" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> Premium Waivers</h2>
<p>After a while, many customers do not want to pay premiums for the
contract any more and convert the contract to a paid-up contract. The
unit benefit cash flows from that moment on stay the same, but the sum
insured is adjusted, so that the existing reserve is able to cover all
future benefits and costs. Furthermore, paid-up contracts typically have
differen costs / loadings. Additionally, the surrender penalty is
usually applied to the reserve before the conversion.</p>
<p>Waiving premiums and recalculating the sum insured is very easy, one
just calls the method
<code>InsuranceContract$premiumWaiver(t = ..)</code> on the existing
contract.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a>contract.PureEnd.NoRefund.Prf <span class="ot">=</span> contract.PureEnd.NoRefund<span class="sc">$</span><span class="fu">clone</span>()<span class="sc">$</span><span class="fu">premiumWaiver</span>(<span class="at">t =</span> <span class="dv">7</span>)</span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a>contract.PureEnd.NoRefund.Prf<span class="sc">$</span>Values<span class="sc">$</span>reserves</span></code></pre></div>
<table>
<caption>Table continues below</caption>
<colgroup>
<col width="7%" />
<col width="10%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="7%" />
<col width="11%" />
<col width="10%" />
<col width="11%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">SumInsured</th>
<th align="center">net</th>
<th align="center">Zillmer</th>
<th align="center">adequate</th>
<th align="center">gamma</th>
<th align="center">contractual</th>
<th align="center">conversion</th>
<th align="center">alphaRefund</th>
<th align="center">reduction</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">100000.00</td>
<td align="center">0.00</td>
<td align="center">-2410.85</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">-2410.85</td>
<td align="center">-2410.85</td>
<td align="center">2410.85</td>
<td align="center">0.00</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">100000.00</td>
<td align="center">4301.39</td>
<td align="center">2005.61</td>
<td align="center">628.14</td>
<td align="center">0.00</td>
<td align="center">2005.61</td>
<td align="center">2005.61</td>
<td align="center">1928.68</td>
<td align="center">3934.29</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">100000.00</td>
<td align="center">8639.14</td>
<td align="center">6458.68</td>
<td align="center">5150.40</td>
<td align="center">0.00</td>
<td align="center">6458.68</td>
<td align="center">6458.68</td>
<td align="center">1446.51</td>
<td align="center">7905.19</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">100000.00</td>
<td align="center">13016.56</td>
<td align="center">10951.67</td>
<td align="center">9712.73</td>
<td align="center">0.00</td>
<td align="center">10951.67</td>
<td align="center">10951.67</td>
<td align="center">964.34</td>
<td align="center">11916.01</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">100000.00</td>
<td align="center">17437.40</td>
<td align="center">15488.36</td>
<td align="center">14318.93</td>
<td align="center">0.00</td>
<td align="center">15488.36</td>
<td align="center">15488.36</td>
<td align="center">482.17</td>
<td align="center">15970.53</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">100000.00</td>
<td align="center">21906.03</td>
<td align="center">20073.13</td>
<td align="center">18973.39</td>
<td align="center">0.00</td>
<td align="center">20073.13</td>
<td align="center">20073.13</td>
<td align="center">0.00</td>
<td align="center">20073.13</td>
</tr>
<tr class="odd">
<td align="center"><strong>6</strong></td>
<td align="center">100000.00</td>
<td align="center">26427.51</td>
<td align="center">24711.09</td>
<td align="center">23681.23</td>
<td align="center">0.00</td>
<td align="center">24711.09</td>
<td align="center">24711.09</td>
<td align="center">0.00</td>
<td align="center">24711.09</td>
</tr>
<tr class="even">
<td align="center"><strong>7</strong></td>
<td align="center">32905.04</td>
<td align="center">27100.86</td>
<td align="center">27100.86</td>
<td align="center">0.00</td>
<td align="center">395.92</td>
<td align="center">27496.79</td>
<td align="center">27496.79</td>
<td align="center">0.00</td>
<td align="center">27496.79</td>
</tr>
<tr class="odd">
<td align="center"><strong>8</strong></td>
<td align="center">32905.04</td>
<td align="center">27391.51</td>
<td align="center">27391.51</td>
<td align="center">2276.49</td>
<td align="center">366.91</td>
<td align="center">27758.42</td>
<td align="center">27758.42</td>
<td align="center">0.00</td>
<td align="center">27758.42</td>
</tr>
<tr class="even">
<td align="center"><strong>9</strong></td>
<td align="center">32905.04</td>
<td align="center">27701.50</td>
<td align="center">27701.50</td>
<td align="center">4580.08</td>
<td align="center">337.79</td>
<td align="center">28039.28</td>
<td align="center">28039.28</td>
<td align="center">0.00</td>
<td align="center">28039.28</td>
</tr>
<tr class="odd">
<td align="center"><strong>10</strong></td>
<td align="center">32905.04</td>
<td align="center">28032.72</td>
<td align="center">28032.72</td>
<td align="center">6914.11</td>
<td align="center">308.53</td>
<td align="center">28341.25</td>
<td align="center">28341.25</td>
<td align="center">0.00</td>
<td align="center">28341.25</td>
</tr>
<tr class="even">
<td align="center"><strong>11</strong></td>
<td align="center">32905.04</td>
<td align="center">28387.01</td>
<td align="center">28387.01</td>
<td align="center">9282.30</td>
<td align="center">279.11</td>
<td align="center">28666.11</td>
<td align="center">28666.11</td>
<td align="center">0.00</td>
<td align="center">28666.11</td>
</tr>
<tr class="odd">
<td align="center"><strong>12</strong></td>
<td align="center">32905.04</td>
<td align="center">28766.05</td>
<td align="center">28766.05</td>
<td align="center">11688.65</td>
<td align="center">249.49</td>
<td align="center">29015.54</td>
<td align="center">29015.54</td>
<td align="center">0.00</td>
<td align="center">29015.54</td>
</tr>
<tr class="even">
<td align="center"><strong>13</strong></td>
<td align="center">32905.04</td>
<td align="center">29171.17</td>
<td align="center">29171.17</td>
<td align="center">14137.32</td>
<td align="center">219.63</td>
<td align="center">29390.80</td>
<td align="center">29390.80</td>
<td align="center">0.00</td>
<td align="center">29390.80</td>
</tr>
<tr class="odd">
<td align="center"><strong>14</strong></td>
<td align="center">32905.04</td>
<td align="center">29604.05</td>
<td align="center">29604.05</td>
<td align="center">16632.88</td>
<td align="center">189.50</td>
<td align="center">29793.55</td>
<td align="center">29793.55</td>
<td align="center">0.00</td>
<td align="center">29793.55</td>
</tr>
<tr class="even">
<td align="center"><strong>15</strong></td>
<td align="center">32905.04</td>
<td align="center">30066.25</td>
<td align="center">30066.25</td>
<td align="center">19180.06</td>
<td align="center">159.04</td>
<td align="center">30225.29</td>
<td align="center">30225.29</td>
<td align="center">0.00</td>
<td align="center">30225.29</td>
</tr>
<tr class="odd">
<td align="center"><strong>16</strong></td>
<td align="center">32905.04</td>
<td align="center">30559.40</td>
<td align="center">30559.40</td>
<td align="center">21783.93</td>
<td align="center">128.20</td>
<td align="center">30687.60</td>
<td align="center">30687.60</td>
<td align="center">0.00</td>
<td align="center">30687.60</td>
</tr>
<tr class="even">
<td align="center"><strong>17</strong></td>
<td align="center">32905.04</td>
<td align="center">31085.51</td>
<td align="center">31085.51</td>
<td align="center">24450.07</td>
<td align="center">96.94</td>
<td align="center">31182.44</td>
<td align="center">31182.44</td>
<td align="center">0.00</td>
<td align="center">31182.44</td>
</tr>
<tr class="odd">
<td align="center"><strong>18</strong></td>
<td align="center">32905.04</td>
<td align="center">31648.31</td>
<td align="center">31648.31</td>
<td align="center">27185.86</td>
<td align="center">65.19</td>
<td align="center">31713.50</td>
<td align="center">31713.50</td>
<td align="center">0.00</td>
<td align="center">31713.50</td>
</tr>
<tr class="even">
<td align="center"><strong>19</strong></td>
<td align="center">32905.04</td>
<td align="center">32252.93</td>
<td align="center">32252.93</td>
<td align="center">30000.59</td>
<td align="center">32.91</td>
<td align="center">32285.83</td>
<td align="center">32285.83</td>
<td align="center">0.00</td>
<td align="center">32285.83</td>
</tr>
<tr class="odd">
<td align="center"><strong>20</strong></td>
<td align="center">32905.04</td>
<td align="center">32905.04</td>
<td align="center">32905.04</td>
<td align="center">32905.04</td>
<td align="center">0.00</td>
<td align="center">32905.04</td>
<td align="center">32905.04</td>
<td align="center">0.00</td>
<td align="center">32905.04</td>
</tr>
</tbody>
</table>
<table style="width:83%;">
<colgroup>
<col width="12%" />
<col width="20%" />
<col width="16%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">PremiumsPaid</th>
<th align="center">Surrender</th>
<th align="center">PremiumFreeSumInsured</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">4821.7</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">9643.4</td>
<td align="center">3560.53</td>
<td align="center">4465.70</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">14465.1</td>
<td align="center">7193.72</td>
<td align="center">8960.81</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">19286.8</td>
<td align="center">10903.15</td>
<td align="center">13483.97</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">24108.5</td>
<td align="center">14692.88</td>
<td align="center">18033.69</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">28930.2</td>
<td align="center">18567.64</td>
<td align="center">22608.41</td>
</tr>
<tr class="odd">
<td align="center"><strong>6</strong></td>
<td align="center">33751.9</td>
<td align="center">22981.31</td>
<td align="center">27747.88</td>
</tr>
<tr class="even">
<td align="center"><strong>7</strong></td>
<td align="center">33751.9</td>
<td align="center">27496.79</td>
<td align="center">32905.04</td>
</tr>
<tr class="odd">
<td align="center"><strong>8</strong></td>
<td align="center">33751.9</td>
<td align="center">27758.42</td>
<td align="center">32905.04</td>
</tr>
<tr class="even">
<td align="center"><strong>9</strong></td>
<td align="center">33751.9</td>
<td align="center">28039.28</td>
<td align="center">32905.04</td>
</tr>
<tr class="odd">
<td align="center"><strong>10</strong></td>
<td align="center">33751.9</td>
<td align="center">28341.25</td>
<td align="center">32905.04</td>
</tr>
<tr class="even">
<td align="center"><strong>11</strong></td>
<td align="center">33751.9</td>
<td align="center">28666.11</td>
<td align="center">32905.04</td>
</tr>
<tr class="odd">
<td align="center"><strong>12</strong></td>
<td align="center">33751.9</td>
<td align="center">29015.54</td>
<td align="center">32905.04</td>
</tr>
<tr class="even">
<td align="center"><strong>13</strong></td>
<td align="center">33751.9</td>
<td align="center">29390.80</td>
<td align="center">32905.04</td>
</tr>
<tr class="odd">
<td align="center"><strong>14</strong></td>
<td align="center">33751.9</td>
<td align="center">29793.55</td>
<td align="center">32905.04</td>
</tr>
<tr class="even">
<td align="center"><strong>15</strong></td>
<td align="center">33751.9</td>
<td align="center">30225.29</td>
<td align="center">32905.04</td>
</tr>
<tr class="odd">
<td align="center"><strong>16</strong></td>
<td align="center">33751.9</td>
<td align="center">30687.60</td>
<td align="center">32905.04</td>
</tr>
<tr class="even">
<td align="center"><strong>17</strong></td>
<td align="center">33751.9</td>
<td align="center">31182.44</td>
<td align="center">32905.04</td>
</tr>
<tr class="odd">
<td align="center"><strong>18</strong></td>
<td align="center">33751.9</td>
<td align="center">31713.50</td>
<td align="center">32905.04</td>
</tr>
<tr class="even">
<td align="center"><strong>19</strong></td>
<td align="center">33751.9</td>
<td align="center">32285.83</td>
<td align="center">32905.04</td>
</tr>
<tr class="odd">
<td align="center"><strong>20</strong></td>
<td align="center">33751.9</td>
<td align="center">32905.04</td>
<td align="center">32905.04</td>
</tr>
</tbody>
</table>
<p>Notice that the contract changes are made directly to the contract
(“reference semantics”). This is different from the typical behavior of
R, where any change to e.g. a data.frame leaves the original data.frame
intact and instead returns a modified copy.</p>
</div>
</div>
<div id="calculation-approach" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Calculation
Approach</h1>
<div id="valuation" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Valuation</h2>
<p>The calculation of all contract values is controlled by the function
<code>InsuranceContract$calculateContract()</code> (using methods of the
<code>InsuranceTarif</code> object) and follows the following logic:</p>
<ol style="list-style-type: decimal">
<li>First the <strong>contingent (unit) cash flows</strong> and the
<strong>transition probbilities</strong> are determined.</li>
<li>The <strong>actuarial equivalence principle</strong> states that at
time of inception, the (net and gross) premium must be determined in a
way that the present value of the future benefits and costs minus the
present value of the future premiums must be equal, i.e. in expectation
the future premiums ove the whole lifetime of the contract will exactly
cover the benefits and costs. Similarly, at all later time steps, the
difference between these two present values needs to be reserved
(i.e. has already been paid by the customer by previous premiums).</li>
<li>This allows the premiums to be calculated by first calculating the
<strong>present values</strong> for all of the <strong>benefit and costs
cash flow</strong> vectors.</li>
<li>The formulas to calculate the gross, Zillmer and net
<strong>premiums</strong> involve simple linear combinations of these
present values, so the <strong>coefficients of these formulas</strong>
are determined next.</li>
<li>With the coefficients of the premium formulas calculated, all
<strong>premiums can be calculated</strong> (first the gross premium,
because due to potential gross premium refunds in case of death, the
formula for the net premium requires the gross premium, which the
formula for the gross premium involves no other type of premuim).</li>
<li>With premiums determined, all unit cash flows and unit present
values can now be expressed in monetary terms / as <strong>absolute cash
flows</strong> (i.e. the actual Euro-amount that flows rather than a
percentage).</li>
<li>As described above, the difference between the present values of
premiums and present values of benefits and costs is defined as the
required amount of reserves, so the <strong>reserves (net, gross,
administration cost, balance sheet)</strong> and all values derived from
them (i.e. surrender value, sum insured in case of premium waiver, etc.)
are calculated.</li>
<li>The <strong>decomposition of the premium</strong> into parts
dedicated to specific purposes (tax, rebates, net premium, gross
premium, Zillmer premium, cost components, risk premium, savings
premium, etc.) can be done once the reserves are ready (since e.g. the
savings premium is defined as the difference of discounted reserves at
times <span class="math inline">\(t\)</span> and <span class="math inline">\(t+1\)</span>).</li>
<li>If the contract has <strong>(discretionary or obligatory) profit
sharing</strong>B mechanisms included, the corresponding
[ProfitParticipation] object can calculate that profit sharing amounts,
once all guaranteed values are calculated. This can also be triggered
manually (with custom profit sharing rates) by calling the methods
<code>InsuranceContract$profitScenario()</code> or
<code>InsuranceContract$addProfitScenario()</code>.</li>
</ol>
</div>
<div id="cash-flows" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Cash Flows</h2>
<p>An insurance contract is basically defined by the (unit) cash flows
it produces: Together with the transition probabilities (mortalityTable
parameter) the present values can be calculated, from which the premiums
follow and finally the reserves and a potential profit sharing.</p>
<p>For example, a <em><strong>term life insurance with regular
premiums</strong></em> would have the following cash flows:</p>
<ul>
<li>premium cash flows: 1, 1, 1, 1, 1, …</li>
<li>survival cash flows: 0, 0, 0, 0, 0, …</li>
<li>guaranteed cash flows: 0, 0, 0, 0, 0, …</li>
<li>death benefit cash flows: 1, 1, 1, 1, 1, …</li>
</ul>
<p>A <em><strong>single-premium term life insurance</strong></em> would
look similar, except for the premiums:</p>
<ul>
<li>premium cash flows: 1, 0, 0, 0, 0, …</li>
</ul>
<p>A <em><strong>pure endowment</strong></em> has no death benefits, but
a survival benefit of 1 at the maturity of the contract:</p>
<ul>
<li>premium cash flows: 1, 1, 1, 1, 1, …</li>
<li>survival cash flows: 0, 0, …, 0, 1</li>
<li>guaranteed cash flows: 0, 0, 0, 0, 0, …</li>
<li>death benefit cash flows: 0, 0, 0, 0, 0, …</li>
</ul>
<p>An <em><strong>endowment</strong></em> has also death benefits during
the contract duration:</p>
<ul>
<li>premium cash flows: 1, 1, 1, 1, 1, …</li>
<li>survival cash flows: 0, 0, …, 0, 1</li>
<li>guaranteed cash flows: 0, 0, 0, 0, 0, …</li>
<li>death benefit cash flows: 1, 1, 1, 1, 1, …</li>
</ul>
<p>A <em><strong>(deferred) annuity</strong>B</em> has premium cash
flows only during the deferral peroid and only survival cash flows
during the annuity payment phase. Often, in case of death during the
deferral period, all premiums paid are refunded as a death benefit.:</p>
<ul>
<li>premium cash flows: 1, 1, …, 1, 0, 0, 0, …</li>
<li>survival cash flows: 0, 0, …, 0, 1, 1, 1,…</li>
<li>guaranteed cash flows: 0, 0, 0, 0, 0, …</li>
<li>death benefit cash flows: 1, 2, 3, 4, 5, …, 0, 0, …</li>
</ul>
<p>A <em><strong>terme-fix insurance</strong></em> has a guaranteed
payment at maturity, even if the insured has already died. The premiums,
however, are only paid until death (which is not reflected in the
contingent cash flows, but rather in the transition probabilities):</p>
<ul>
<li>premium cash flows: 1, 1, 1, 1, …, 1</li>
<li>survival cash flows: 0, 0, 0, 0, …, 0</li>
<li>guaranteed cash flows: 0, 0, 0, …, 0, 1</li>
<li>death benefit cash flows: 0, 0, 0, 0, …, 0</li>
</ul>
</div>
</div>
<div id="cost-structure" class="section level1" number="6">
<h1><span class="header-section-number">6</span> Cost structure</h1>
<p>Costs of an insurance contracts can have various forms and bases.</p>
<p>The <code>InsuranceContract</code> class provides all common types of
costs:</p>
<ul>
<li>Type of cost: Acquisition (Alpha-costs), Zillmer, Beta-costs,
Administration (Gamma-costs during / after premiums and for paid-up
contracts)</li>
<li>Basis for costs: SumInsured, Premium Sum, Gross Premium, Net
Premium, Reserve, constant costs</li>
<li>Duration of costs: Once (up-front), during premium payments, after
premium payments, during whole contract</li>
</ul>
<p>The cost structure generated by <code>initializeCosts()</code> is a
three-dimensional array with the above-mentioned coordinates:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="fu">initializeCosts</span>() <span class="sc">%&gt;%</span> dimnames</span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a><span class="co">#&gt; $type</span></span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a><span class="co">#&gt; [1] &quot;alpha&quot;            &quot;Zillmer&quot;          &quot;beta&quot;             &quot;gamma&quot;           </span></span>
<span id="cb38-4"><a href="#cb38-4" tabindex="-1"></a><span class="co">#&gt; [5] &quot;gamma_nopremiums&quot; &quot;unitcosts&quot;       </span></span>
<span id="cb38-5"><a href="#cb38-5" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb38-6"><a href="#cb38-6" tabindex="-1"></a><span class="co">#&gt; $basis</span></span>
<span id="cb38-7"><a href="#cb38-7" tabindex="-1"></a><span class="co">#&gt; [1] &quot;SumInsured&quot;   &quot;SumPremiums&quot;  &quot;GrossPremium&quot; &quot;NetPremium&quot;   &quot;Benefits&quot;    </span></span>
<span id="cb38-8"><a href="#cb38-8" tabindex="-1"></a><span class="co">#&gt; [6] &quot;Constant&quot;     &quot;Reserve&quot;     </span></span>
<span id="cb38-9"><a href="#cb38-9" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb38-10"><a href="#cb38-10" tabindex="-1"></a><span class="co">#&gt; $frequency</span></span>
<span id="cb38-11"><a href="#cb38-11" tabindex="-1"></a><span class="co">#&gt; [1] &quot;once&quot;             &quot;PremiumPeriod&quot;    &quot;PremiumFree&quot;      &quot;PolicyPeriod&quot;    </span></span>
<span id="cb38-12"><a href="#cb38-12" tabindex="-1"></a><span class="co">#&gt; [5] &quot;AfterDeath&quot;       &quot;FullContract&quot;     &quot;CommissionPeriod&quot;</span></span></code></pre></div>
<p>The most common types of cost can be directly given in the call to
<code>initializeCosts()</code>, but for some uncommon combinations, one
can directly fill any of the fields in the three-dimensional array
manually.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="fu">initializeCosts</span>(<span class="at">alpha =</span> <span class="fl">0.04</span>, <span class="at">Zillmer =</span> <span class="fl">0.025</span>, <span class="at">beta =</span> <span class="fl">0.05</span>, <span class="at">gamma.contract =</span> <span class="fl">0.001</span>)</span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" tabindex="-1"></a><span class="co"># the above is the short form of:</span></span>
<span id="cb39-4"><a href="#cb39-4" tabindex="-1"></a>costs.Bsp <span class="ot">=</span> <span class="fu">initializeCosts</span>()</span>
<span id="cb39-5"><a href="#cb39-5" tabindex="-1"></a>costs.Bsp[[<span class="st">&quot;alpha&quot;</span>, <span class="st">&quot;SumPremiums&quot;</span>, <span class="st">&quot;once&quot;</span>]] <span class="ot">=</span> <span class="fl">0.04</span></span>
<span id="cb39-6"><a href="#cb39-6" tabindex="-1"></a>costs.Bsp[[<span class="st">&quot;Zillmer&quot;</span>, <span class="st">&quot;SumPremiums&quot;</span>, <span class="st">&quot;once&quot;</span>]] <span class="ot">=</span> <span class="fl">0.025</span> <span class="co"># German Zillmer maximum</span></span>
<span id="cb39-7"><a href="#cb39-7" tabindex="-1"></a>costs.Bsp[[<span class="st">&quot;beta&quot;</span>, <span class="st">&quot;GrossPremium&quot;</span>, <span class="st">&quot;PremiumPeriod&quot;</span>]] <span class="ot">=</span> <span class="fl">0.05</span></span>
<span id="cb39-8"><a href="#cb39-8" tabindex="-1"></a>costs.Bsp[[<span class="st">&quot;gamma&quot;</span>, <span class="st">&quot;SumInsured&quot;</span>, <span class="st">&quot;PolicyPeriod&quot;</span>]] <span class="ot">=</span> <span class="fl">0.001</span></span></code></pre></div>
<p>These costs parameters are immediately converted to the corresponding
cash flows when the contract is created. In the above example of a pure
endowment (with premium waiver at time 7), the absolute cost cash flows
are:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a>contract.PureEnd.NoRefund<span class="sc">$</span>Values<span class="sc">$</span>absCashFlows</span></code></pre></div>
<table>
<colgroup>
<col width="11%" />
<col width="12%" />
<col width="12%" />
<col width="11%" />
<col width="10%" />
<col width="24%" />
<col width="15%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">alpha</th>
<th align="center">Zillmer</th>
<th align="center">beta</th>
<th align="center">gamma</th>
<th align="center">gamma_nopremiums</th>
<th align="center">unitcosts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">3857.36</td>
<td align="center">2410.85</td>
<td align="center">241.09</td>
<td align="center">100</td>
<td align="center">100</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">241.09</td>
<td align="center">100</td>
<td align="center">100</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">241.09</td>
<td align="center">100</td>
<td align="center">100</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">241.09</td>
<td align="center">100</td>
<td align="center">100</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">241.09</td>
<td align="center">100</td>
<td align="center">100</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">241.09</td>
<td align="center">100</td>
<td align="center">100</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>6</strong></td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">241.09</td>
<td align="center">100</td>
<td align="center">100</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>7</strong></td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">241.09</td>
<td align="center">100</td>
<td align="center">100</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>8</strong></td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">241.09</td>
<td align="center">100</td>
<td align="center">100</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>9</strong></td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">241.09</td>
<td align="center">100</td>
<td align="center">100</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>10</strong></td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">241.09</td>
<td align="center">100</td>
<td align="center">100</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<p>In addition to these standardized costs, which are included in the
expense-loaded premium (sometimes also called the “(actuarial) gross
premium”), there are certain loadings and rebates that are applied after
the expense-loaded premium <span class="math inline">\(BP_x\)</span>:</p>
<p><span class="math display">\[P_x = \left\{ (BP_x + oUZu - SuRa) \cdot
VS \cdot (1-VwGew) + unitC\right\}
\cdot  \left(1-PrRa-VwGew_{StkK}-PartnerRa\right)\cdot
\left(1+uz(k)\right) \cdot (1+tax)\]</span></p>
<p>with the following surcharges and rebates:</p>
<ul>
<li><span class="math inline">\(oUZu\)</span> … Surcharge for contracts
without medical exam (parameter <code>noMedicalExam</code>)</li>
<li><span class="math inline">\(SuRa\)</span> … Sum rebate (depending on
the sum insured) (parameter <code>sumRebate</code>)</li>
<li><span class="math inline">\(VwGew\)</span> … Advance profit
participation (as premium rebate) (parameter
<code>advanceProfitParticipation</code>)</li>
<li><span class="math inline">\(unitC\)</span> … Unit costs per year
(only during premium payments) (parameter <code>unitcosts</code>)</li>
<li><span class="math inline">\(PrRa=PrRa(BP)\)</span> … Premium rebate
(depending on premium amount) (parameter
<code>premiumRebate</code>)</li>
<li><span class="math inline">\(VwGew_{StkK}\)</span> … Advance profit
participation (as premium rebate, on premium after unit costs)
(parameter <code>advanceProfitParticipationInclUnitCost</code>)</li>
<li><span class="math inline">\(PartnerRa\)</span> … Partner rebate on
the premium (for multiple similar contracts) (parameter
<code>partnerRebate</code>)</li>
<li><span class="math inline">\(uz(k)\)</span> … Frequency charge for
monthly/quarterly/half-yearly premium payments instead of yearly
premiums (parameter <code>premiumFrequencyLoading</code>)</li>
<li><span class="math inline">\(tax\)</span> … Insurance tax (0% in most
countries, 4% or 11% in Austria) (parameter <code>tax</code>)</li>
</ul>
<div id="frequency-charges" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Frequency
charges</h2>
<p>Typically, an insurance premium is calculated with yearly premiums
paid in advance. If premiums are paid more often per year (Parameter
<code>premiumFrequency</code> or <code>benefitFrequency</code> set to a
value larger than 1, typically 2 for half-yearly, 4 for quarterly, or 12
for monthly payments), part of the interest during the year is lost, as
well as the premiums for the remainder of the year if the insured event
happens. So usually there is some kind of extra charge included:</p>
<ul>
<li>A frequency charge is added on the gross premium =&gt; Parameter
<code>premiumFrequencyLoading</code> and
<code>benefitFrequencyLoading</code> are set to a list with keys “1”,
“2”, “4” and “12” and values that correspond to the extra charge (as a
factor on the gross premium, i.e. a percentage).</li>
<li>The premium or benefit payments are calculated (approximately) as
payments <span class="math inline">\(k\)</span>-times per year using
yearly death / incidence probabilities. This calculation is typically
using some approximations in <span class="math inline">\(k\)</span>
=&gt; Parameter <code>premiumFrequencyOrder</code> and
<code>benefitFrequencyOrder</code> set to a value larger than 0.</li>
<li>Contracts with <span class="math inline">\(k&gt;1\)</span> have
higher cost loadings on the gross premium. =&gt; Parameter
<code>costs</code> is implemented a function with signature <span class="math inline">\(function(params, values)\)</span>, which accesses
<code>params$ContractData$premiumFrequency</code> to return different
expense rates for different premium payment frequencies.</li>
<li>If the guaranteed interest rate is 0%, the exact moment of payment
during a year is irrelevant for the guaranteed values. However, if a
yield larger than 0% is achieved, it is assigned to the contract via
profit participation. So it makes sense adjust profit participation
rates depending on the premium frequency rather than modifying the
premium. The higher the profit participation, the higher the effect of
the <span class="math inline">\(k\)</span>-th yearly premium payments
and the higher the modification of the rates can be. =&gt; Parameter
<code>getInterestProfitRate</code> of the profit scheme can be
implemented as a function that modifies the rate depending on the
premium or benefit frequency (similar to the cost adjustment mentioned
in the previous item).</li>
</ul>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a>Tarif.Life.FrequencyLoading <span class="ot">=</span> Tarif.Life<span class="sc">$</span><span class="fu">createModification</span>(</span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">&quot;Term life (frequency loading)&quot;</span>,</span>
<span id="cb41-3"><a href="#cb41-3" tabindex="-1"></a>  <span class="at">premiumFrequencyLoading =</span> <span class="fu">list</span>(<span class="st">&quot;1&quot;</span> <span class="ot">=</span> <span class="fl">0.0</span>, <span class="st">&quot;2&quot;</span> <span class="ot">=</span> <span class="fl">0.01</span>, <span class="st">&quot;4&quot;</span> <span class="ot">=</span> <span class="fl">0.015</span>, <span class="st">&quot;12&quot;</span> <span class="ot">=</span> <span class="fl">0.02</span>)</span>
<span id="cb41-4"><a href="#cb41-4" tabindex="-1"></a>)</span>
<span id="cb41-5"><a href="#cb41-5" tabindex="-1"></a>Tarif.Life.FrequencyApprox1 <span class="ot">=</span> Tarif.Life<span class="sc">$</span><span class="fu">createModification</span>(</span>
<span id="cb41-6"><a href="#cb41-6" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">&quot;Term life (k-th yearly, approx. 1.Ord.)&quot;</span>,</span>
<span id="cb41-7"><a href="#cb41-7" tabindex="-1"></a>  <span class="at">premiumFrequencyOrder =</span> <span class="dv">1</span></span>
<span id="cb41-8"><a href="#cb41-8" tabindex="-1"></a>)</span>
<span id="cb41-9"><a href="#cb41-9" tabindex="-1"></a>Tarif.Life.FrequencyApprox2 <span class="ot">=</span> Tarif.Life<span class="sc">$</span><span class="fu">createModification</span>(</span>
<span id="cb41-10"><a href="#cb41-10" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">&quot;Term life (k-th yearly, approx. 2.Ord.)&quot;</span>,</span>
<span id="cb41-11"><a href="#cb41-11" tabindex="-1"></a>  <span class="at">premiumFrequencyOrder =</span> <span class="dv">2</span></span>
<span id="cb41-12"><a href="#cb41-12" tabindex="-1"></a>)</span>
<span id="cb41-13"><a href="#cb41-13" tabindex="-1"></a>Tarif.Life.FrequencyApprox3 <span class="ot">=</span> Tarif.Life<span class="sc">$</span><span class="fu">createModification</span>(</span>
<span id="cb41-14"><a href="#cb41-14" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">&quot;Term life (k-th yearly, exact)&quot;</span>,</span>
<span id="cb41-15"><a href="#cb41-15" tabindex="-1"></a>  <span class="at">premiumFrequencyOrder =</span> <span class="cn">Inf</span></span>
<span id="cb41-16"><a href="#cb41-16" tabindex="-1"></a>)</span>
<span id="cb41-17"><a href="#cb41-17" tabindex="-1"></a></span>
<span id="cb41-18"><a href="#cb41-18" tabindex="-1"></a>Tarif.Life.FrequencyExpense <span class="ot">=</span> Tarif.Life<span class="sc">$</span><span class="fu">createModification</span>(</span>
<span id="cb41-19"><a href="#cb41-19" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">&quot;Term life (modified gamma costs)&quot;</span>,</span>
<span id="cb41-20"><a href="#cb41-20" tabindex="-1"></a>  <span class="at">costs =</span> <span class="cf">function</span>(params, values) {</span>
<span id="cb41-21"><a href="#cb41-21" tabindex="-1"></a>    <span class="cf">switch</span> (<span class="fu">toString</span>(params<span class="sc">$</span>ContractData<span class="sc">$</span>premiumFrequency),</span>
<span id="cb41-22"><a href="#cb41-22" tabindex="-1"></a>        <span class="st">&quot;12&quot;</span> <span class="ot">=</span> <span class="fu">initializeCosts</span>(<span class="at">alpha =</span> <span class="fl">0.04</span>, <span class="at">Zillmer =</span> <span class="fl">0.025</span>,  <span class="at">beta =</span> <span class="fl">0.05</span>,  <span class="at">gamma.contract =</span> <span class="fl">0.00127</span>, <span class="at">gamma.paidUp =</span> <span class="fl">0.001</span>),</span>
<span id="cb41-23"><a href="#cb41-23" tabindex="-1"></a>        <span class="st">&quot;4&quot;</span> <span class="ot">=</span> <span class="fu">initializeCosts</span>(<span class="at">alpha =</span> <span class="fl">0.04</span>, <span class="at">Zillmer =</span> <span class="fl">0.025</span>,  <span class="at">beta =</span> <span class="fl">0.05</span>,  <span class="at">gamma.contract =</span> <span class="fl">0.00119</span>, <span class="at">gamma.paidUp =</span> <span class="fl">0.001</span>),</span>
<span id="cb41-24"><a href="#cb41-24" tabindex="-1"></a>        <span class="st">&quot;2&quot;</span> <span class="ot">=</span> <span class="fu">initializeCosts</span>(<span class="at">alpha =</span> <span class="fl">0.04</span>, <span class="at">Zillmer =</span> <span class="fl">0.025</span>,  <span class="at">beta =</span> <span class="fl">0.05</span>,  <span class="at">gamma.contract =</span> <span class="fl">0.0011</span>, <span class="at">gamma.paidUp =</span> <span class="fl">0.001</span>),</span>
<span id="cb41-25"><a href="#cb41-25" tabindex="-1"></a>        <span class="fu">initializeCosts</span>(<span class="at">alpha =</span> <span class="fl">0.04</span>, <span class="at">Zillmer =</span> <span class="fl">0.025</span>,  <span class="at">beta =</span> <span class="fl">0.05</span>,  <span class="at">gamma.contract =</span> <span class="fl">0.001</span>, <span class="at">gamma.paidUp =</span> <span class="fl">0.001</span>)</span>
<span id="cb41-26"><a href="#cb41-26" tabindex="-1"></a>    )</span>
<span id="cb41-27"><a href="#cb41-27" tabindex="-1"></a>  }</span>
<span id="cb41-28"><a href="#cb41-28" tabindex="-1"></a>)</span></code></pre></div>
<p>Of course, the loadings and costs mentioned above are not necessarily
mathematically derived to offset the interest effect of k-th yearly
payments. Rather, they are often simply decided by the management. Thus,
the three approaches implemented here can have quite different
results:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="fu">contractGridPremium</span>(</span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a>  <span class="at">axes =</span> <span class="fu">list</span>(<span class="at">tarif =</span> <span class="fu">c</span>(Tarif.Life.FrequencyLoading, Tarif.Life.FrequencyApprox1, </span>
<span id="cb42-3"><a href="#cb42-3" tabindex="-1"></a>                        Tarif.Life.FrequencyApprox2, Tarif.Life.FrequencyApprox3, </span>
<span id="cb42-4"><a href="#cb42-4" tabindex="-1"></a>                        Tarif.Life.FrequencyExpense),</span>
<span id="cb42-5"><a href="#cb42-5" tabindex="-1"></a>              <span class="at">premiumFrequency =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">12</span>)),</span>
<span id="cb42-6"><a href="#cb42-6" tabindex="-1"></a>  <span class="at">age =</span> <span class="dv">40</span>, <span class="at">policyDuration =</span> <span class="dv">20</span>,</span>
<span id="cb42-7"><a href="#cb42-7" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">100000</span>,</span>
<span id="cb42-8"><a href="#cb42-8" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-09-01&quot;</span>)</span>
<span id="cb42-9"><a href="#cb42-9" tabindex="-1"></a>) <span class="sc">%&gt;%</span> kableTable</span></code></pre></div>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
tarif
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="4">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
premiumFrequency
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
1
</th>
<th style="text-align:right;">
2
</th>
<th style="text-align:right;">
4
</th>
<th style="text-align:right;">
12
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Term life (frequency loading)
</td>
<td style="text-align:right;">
593.6884
</td>
<td style="text-align:right;">
299.8126
</td>
<td style="text-align:right;">
150.6484
</td>
<td style="text-align:right;">
50.46351
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Term life (k-th yearly, approx. 1.Ord.)
</td>
<td style="text-align:right;">
593.6884
</td>
<td style="text-align:right;">
297.5766
</td>
<td style="text-align:right;">
148.9718
</td>
<td style="text-align:right;">
49.69813
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Term life (k-th yearly, approx. 2.Ord.)
</td>
<td style="text-align:right;">
593.6884
</td>
<td style="text-align:right;">
297.5761
</td>
<td style="text-align:right;">
148.9715
</td>
<td style="text-align:right;">
49.69802
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Term life (k-th yearly, exact)
</td>
<td style="text-align:right;">
593.6884
</td>
<td style="text-align:right;">
297.5761
</td>
<td style="text-align:right;">
148.9715
</td>
<td style="text-align:right;">
49.69802
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Term life (modified gamma costs)
</td>
<td style="text-align:right;">
593.6884
</td>
<td style="text-align:right;">
303.3269
</td>
<td style="text-align:right;">
154.4421
</td>
<td style="text-align:right;">
52.29163
</td>
</tr>
</tbody>
</table>
</div>
<div id="security-loadings" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> Security
loadings</h2>
<p>Although most mortality tables and expense loadings already have a
certain amount of security margins included, often a tariff (mostly
protection products) adds an additional security loading directly to the
net present value of the benedits.</p>
<p>This can be easily implemented using the parameter
<code>security</code>:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="fu">contractGridPremium</span>(</span>
<span id="cb43-2"><a href="#cb43-2" tabindex="-1"></a>  <span class="at">axes =</span> <span class="fu">list</span>(<span class="at">age =</span> <span class="fu">seq</span>(<span class="dv">30</span>, <span class="dv">60</span>, <span class="dv">10</span>), <span class="at">security =</span> <span class="dv">10</span><span class="sc">*</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">5</span>)<span class="sc">/</span><span class="dv">100</span>),</span>
<span id="cb43-3"><a href="#cb43-3" tabindex="-1"></a>  <span class="at">tarif =</span> Tarif.Life,</span>
<span id="cb43-4"><a href="#cb43-4" tabindex="-1"></a>  <span class="at">policyDuration =</span> <span class="dv">20</span>,</span>
<span id="cb43-5"><a href="#cb43-5" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">100000</span>,</span>
<span id="cb43-6"><a href="#cb43-6" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-09-01&quot;</span>)</span>
<span id="cb43-7"><a href="#cb43-7" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">kableTable</span>(<span class="at">digits =</span> <span class="dv">2</span>)</span></code></pre></div>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
age
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="6">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
security
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
0
</th>
<th style="text-align:right;">
0.1
</th>
<th style="text-align:right;">
0.2
</th>
<th style="text-align:right;">
0.3
</th>
<th style="text-align:right;">
0.4
</th>
<th style="text-align:right;">
0.5
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
30
</td>
<td style="text-align:right;">
301.75
</td>
<td style="text-align:right;">
319.42
</td>
<td style="text-align:right;">
337.09
</td>
<td style="text-align:right;">
354.75
</td>
<td style="text-align:right;">
372.42
</td>
<td style="text-align:right;">
390.09
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
40
</td>
<td style="text-align:right;">
593.69
</td>
<td style="text-align:right;">
640.54
</td>
<td style="text-align:right;">
687.39
</td>
<td style="text-align:right;">
734.25
</td>
<td style="text-align:right;">
781.10
</td>
<td style="text-align:right;">
827.95
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
50
</td>
<td style="text-align:right;">
1217.61
</td>
<td style="text-align:right;">
1326.83
</td>
<td style="text-align:right;">
1436.05
</td>
<td style="text-align:right;">
1545.27
</td>
<td style="text-align:right;">
1654.49
</td>
<td style="text-align:right;">
1763.71
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
60
</td>
<td style="text-align:right;">
2848.94
</td>
<td style="text-align:right;">
3121.23
</td>
<td style="text-align:right;">
3393.52
</td>
<td style="text-align:right;">
3665.81
</td>
<td style="text-align:right;">
3938.10
</td>
<td style="text-align:right;">
4210.39
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="rounding-values" class="section level1" number="7">
<h1><span class="header-section-number">7</span> Rounding values</h1>
<p>In an ideal world, all calculations would be done with perfect
accuracy. However, in reality insurance tariffs are often implemented in
systems that support only a limited number of digits. Or it is company
policy to round premiums to whole Euro or Dollar amounts.</p>
<p>For this reason, the package also provides a
<code>RoundingHelper</code> class that provides an easy interfact for
rounding intermediate values in the calculation. The instance of this
class is stored in the tariff (and the contract) as
<code>$Parameters$Hooks$Rounding</code> and the methods of the
<code>InsuranceTarif</code> make use of it in all places where rounding
can typicall happen.</p>
<p>Each place where a number/vector/matrix is rounded in the package
uses a separate ID, which can and must be used to adjust the rounding
behavior at that position. If no rounding setting is set, no rounding
occurs and no accuracy is lost.</p>
<p>An easy example of how rounding works is:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="co"># Define three different rounding IDs / instances: &quot;raw&quot; with rounding to</span></span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a><span class="co"># the nearest integer, &quot;hundred&quot; with rounding to the nearest multiple of </span></span>
<span id="cb44-3"><a href="#cb44-3" tabindex="-1"></a><span class="co"># 100 and &quot;accurate&quot; rounded to the nearest multiple of 0.0001:</span></span>
<span id="cb44-4"><a href="#cb44-4" tabindex="-1"></a>rounding <span class="ot">=</span> RoundingHelper<span class="sc">$</span><span class="fu">new</span>(<span class="at">raw =</span> <span class="dv">0</span>, <span class="at">hundred =</span> <span class="sc">-</span><span class="dv">2</span>, <span class="at">accurate =</span> <span class="dv">4</span>)</span>
<span id="cb44-5"><a href="#cb44-5" tabindex="-1"></a></span>
<span id="cb44-6"><a href="#cb44-6" tabindex="-1"></a><span class="co"># The rounding IDs are used as first argument in the rounding$round function:</span></span>
<span id="cb44-7"><a href="#cb44-7" tabindex="-1"></a>rounding<span class="sc">$</span><span class="fu">round</span>(<span class="st">&quot;raw&quot;</span>, <span class="fu">c</span>(<span class="fl">1234.567891</span>, <span class="fl">0.00012345</span>, <span class="dv">1234</span>))</span>
<span id="cb44-8"><a href="#cb44-8" tabindex="-1"></a><span class="co">#&gt; [1] 1235    0 1234</span></span>
<span id="cb44-9"><a href="#cb44-9" tabindex="-1"></a>rounding<span class="sc">$</span><span class="fu">round</span>(<span class="st">&quot;hundred&quot;</span>, <span class="fu">c</span>(<span class="fl">1234.567891</span>, <span class="fl">0.00012345</span>, <span class="dv">1234</span>))</span>
<span id="cb44-10"><a href="#cb44-10" tabindex="-1"></a><span class="co">#&gt; [1] 1200    0 1200</span></span>
<span id="cb44-11"><a href="#cb44-11" tabindex="-1"></a>rounding<span class="sc">$</span><span class="fu">round</span>(<span class="st">&quot;accurate&quot;</span>, <span class="fu">c</span>(<span class="fl">1234.567891</span>, <span class="fl">0.00012345</span>, <span class="dv">1234</span>))</span>
<span id="cb44-12"><a href="#cb44-12" tabindex="-1"></a><span class="co">#&gt; [1] 1234.5679    0.0001 1234.0000</span></span>
<span id="cb44-13"><a href="#cb44-13" tabindex="-1"></a></span>
<span id="cb44-14"><a href="#cb44-14" tabindex="-1"></a><span class="co"># If the given spec does not exist, no rounding it applied</span></span>
<span id="cb44-15"><a href="#cb44-15" tabindex="-1"></a>rounding<span class="sc">$</span><span class="fu">round</span>(<span class="st">&quot;non-existing&quot;</span>, <span class="fu">c</span>(<span class="fl">1234.567891</span>, <span class="fl">0.00012345</span>, <span class="dv">1234</span>))</span>
<span id="cb44-16"><a href="#cb44-16" tabindex="-1"></a><span class="co">#&gt; [1] 1.234568e+03 1.234500e-04 1.234000e+03</span></span>
<span id="cb44-17"><a href="#cb44-17" tabindex="-1"></a></span>
<span id="cb44-18"><a href="#cb44-18" tabindex="-1"></a><span class="co"># Add a new spec with different settings:</span></span>
<span id="cb44-19"><a href="#cb44-19" tabindex="-1"></a>rounding<span class="sc">$</span><span class="fu">setRounding</span>(<span class="st">&quot;non-existing&quot;</span>, <span class="dv">1</span>)</span>
<span id="cb44-20"><a href="#cb44-20" tabindex="-1"></a>rounding<span class="sc">$</span><span class="fu">round</span>(<span class="st">&quot;non-existing&quot;</span>, <span class="fu">c</span>(<span class="fl">1234.567891</span>, <span class="fl">0.00012345</span>, <span class="dv">1234</span>))</span>
<span id="cb44-21"><a href="#cb44-21" tabindex="-1"></a><span class="co">#&gt; [1] 1234.6    0.0 1234.0</span></span></code></pre></div>
<p>The <code>InsuranceTarif</code> class makes heavy use of these
rounding settings. For example, to round the gross premium to Euros and
the net premium to cent, one can use the setting
<code>Rounding = list(&quot;Premium gross&quot; = 0, &quot;Premium net&quot; = 2)</code>:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a>Tarif.EndowmentSI <span class="ot">=</span> InsuranceTarif<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb45-2"><a href="#cb45-2" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">&quot;pureendowment&quot;</span>,</span>
<span id="cb45-3"><a href="#cb45-3" tabindex="-1"></a>    <span class="at">tarif =</span> <span class="st">&quot;Endow1&quot;</span>,</span>
<span id="cb45-4"><a href="#cb45-4" tabindex="-1"></a>    <span class="at">age =</span> <span class="dv">40</span>, <span class="at">policyPeriod =</span> <span class="dv">20</span>,</span>
<span id="cb45-5"><a href="#cb45-5" tabindex="-1"></a>    <span class="at">premiumRefund =</span> <span class="dv">1</span>,</span>
<span id="cb45-6"><a href="#cb45-6" tabindex="-1"></a></span>
<span id="cb45-7"><a href="#cb45-7" tabindex="-1"></a>    <span class="at">mortalityTable =</span> mort.AT.census.<span class="fl">2011.</span>unisex,</span>
<span id="cb45-8"><a href="#cb45-8" tabindex="-1"></a>    <span class="at">cost =</span> <span class="fu">initializeCosts</span>(<span class="at">alpha =</span> <span class="fl">0.04</span>, <span class="at">gamma.contract =</span> <span class="fl">0.0005</span>),</span>
<span id="cb45-9"><a href="#cb45-9" tabindex="-1"></a>    <span class="at">i =</span> <span class="fl">0.03</span>,</span>
<span id="cb45-10"><a href="#cb45-10" tabindex="-1"></a>    <span class="at">sumInsured =</span> <span class="dv">10000</span>,</span>
<span id="cb45-11"><a href="#cb45-11" tabindex="-1"></a>    <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-09-01&quot;</span>)</span>
<span id="cb45-12"><a href="#cb45-12" tabindex="-1"></a>)</span>
<span id="cb45-13"><a href="#cb45-13" tabindex="-1"></a>Tarif.EndowmentSI.rounded <span class="ot">=</span> Tarif.EndowmentSI<span class="sc">$</span><span class="fu">createModification</span>(</span>
<span id="cb45-14"><a href="#cb45-14" tabindex="-1"></a>    <span class="at">Rounding =</span> <span class="fu">list</span>(<span class="st">&quot;Premium gross unit&quot;</span> <span class="ot">=</span> <span class="dv">3</span>, <span class="st">&quot;Premium net unit&quot;</span> <span class="ot">=</span> <span class="dv">6</span>, <span class="st">&quot;Premium net&quot;</span> <span class="ot">=</span> <span class="dv">2</span>)</span>
<span id="cb45-15"><a href="#cb45-15" tabindex="-1"></a>)</span>
<span id="cb45-16"><a href="#cb45-16" tabindex="-1"></a>Contract.sumInsured <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(<span class="at">tarif =</span> Tarif.EndowmentSI)</span>
<span id="cb45-17"><a href="#cb45-17" tabindex="-1"></a>Contract.sumInsured.rounded <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(<span class="at">tarif =</span> Tarif.EndowmentSI.rounded)</span>
<span id="cb45-18"><a href="#cb45-18" tabindex="-1"></a></span>
<span id="cb45-19"><a href="#cb45-19" tabindex="-1"></a></span>
<span id="cb45-20"><a href="#cb45-20" tabindex="-1"></a><span class="co"># premiums of the original tariff:</span></span>
<span id="cb45-21"><a href="#cb45-21" tabindex="-1"></a>Contract.sumInsured<span class="sc">$</span>Values<span class="sc">$</span>premiums[<span class="fu">c</span>(<span class="st">&quot;unit.net&quot;</span>, <span class="st">&quot;-1et&quot;</span>, <span class="st">&quot;unit.gross&quot;</span>, <span class="st">&quot;gross&quot;</span>)]</span>
<span id="cb45-22"><a href="#cb45-22" tabindex="-1"></a><span class="co">#&gt;     unit.net         &lt;NA&gt;   unit.gross        gross </span></span>
<span id="cb45-23"><a href="#cb45-23" tabindex="-1"></a><span class="co">#&gt;   0.03585537           NA   0.03839359 383.93590105</span></span></code></pre></div>
<p>This rounding is applied immediately when the corresponding entity is
calculated. As a consequence, all further calculations depending on the
entity will also be affected. This means that e.g. rounding only the
gross premium will also have a slight effect on the net premium with
contracts that grant premium refunds in case of death, as the example
above shows.</p>
<p>Here is a list of all rounding IDs used throughout the InsuranceTarif
class. Each of them can be used to adjust rounding just one particular
value/vector:</p>
<pre><code>#&gt; -</code></pre>
</div>
<div id="creating-premium-and-contract-grids" class="section level1" number="8">
<h1><span class="header-section-number">8</span> Creating premium and
contract grids</h1>
<p>When developing a new product or comparing different products, it is
often required to create tables of premiums or reserves for a
product/tarif where just some of the parameters (like age, sum insured
or maturity) change.</p>
<p>For this purpose, this package provides two functions to create two-
or higher-dimensional grids of contracts with each dimension
representing one of the parameters varying.</p>
<ul>
<li><code>contractGrid()</code> creates a (two- or higher-dimensional)
grid of <code>InsuranceContract</code> object</li>
<li><code>contractGridPremium()</code> creates a grid of the
premiums</li>
</ul>
<p>The grid is defined by the <code>axes</code> argument to the
<code>contractGrid()</code> call. This is a named list giving all
parameters that should vary inside the grid. Any of the parameters of
the <code>InsuranceContract$new()</code> constructor can be used in the
axes.</p>
<p>For example, one can compare multiple tariffs or multiple varying
pararameters.</p>
<p>Let us look at the pure endowment above, which we implemented as a
single-premium variant and a variant with regular premiums, both of
which have a potential (partial or full) premium refund in case of
death. How do the premiums of these contracts compare and how do the
premiums depend on the premium refund proportion?</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a>grd <span class="ot">=</span> <span class="fu">contractGridPremium</span>(</span>
<span id="cb47-2"><a href="#cb47-2" tabindex="-1"></a>  <span class="at">axes =</span> <span class="fu">list</span>(<span class="at">tarif =</span> <span class="fu">c</span>(Tarif.PureEnd, Tarif.Endowment, Tarif.PureEnd.SP), <span class="at">premiumRefund =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.5</span>, <span class="dv">1</span>)),</span>
<span id="cb47-3"><a href="#cb47-3" tabindex="-1"></a>  <span class="at">age =</span> <span class="dv">50</span>, <span class="at">policyPeriod =</span> <span class="dv">20</span>,</span>
<span id="cb47-4"><a href="#cb47-4" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">10000</span>,</span>
<span id="cb47-5"><a href="#cb47-5" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-09-01&quot;</span>)</span>
<span id="cb47-6"><a href="#cb47-6" tabindex="-1"></a>)</span>
<span id="cb47-7"><a href="#cb47-7" tabindex="-1"></a>grd</span></code></pre></div>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
tarif
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
premiumRefund
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
0
</th>
<th style="text-align:right;">
0.5
</th>
<th style="text-align:right;">
1
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Example Tariff - Pure Endowment
</td>
<td style="text-align:right;">
511.8569
</td>
<td style="text-align:right;">
539.9719
</td>
<td style="text-align:right;">
571.4267
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Example Tariff - Endowment
</td>
<td style="text-align:right;">
597.8353
</td>
<td style="text-align:right;">
630.7708
</td>
<td style="text-align:right;">
667.6189
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Example Tariff - Pure Endowment (SP)
</td>
<td style="text-align:right;">
9062.9858
</td>
<td style="text-align:right;">
9792.9789
</td>
<td style="text-align:right;">
10651.0307
</td>
</tr>
</tbody>
</table>
<p>The default implementation of <code>contractGridPremium</code>
returns the written premium, but one can also choose other types of
premiums to display, or even other contract values (like reserves).</p>
<p>If one needs to investigate multiple values, it is better to first
create a grid of insurance contract objects and store it, so that the
call to <code>contractGridPremium</code> does not have to re-calculate
the same contracts over and over again, extract just one premium and
discard the whole contract.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a>grd <span class="ot">=</span> <span class="fu">contractGrid</span>(</span>
<span id="cb48-2"><a href="#cb48-2" tabindex="-1"></a>  <span class="at">axes =</span> <span class="fu">list</span>(<span class="at">tarif =</span> <span class="fu">c</span>(Tarif.PureEnd, Tarif.Endowment, Tarif.PureEnd.SP), <span class="at">premiumRefund =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.5</span>, <span class="dv">1</span>)),</span>
<span id="cb48-3"><a href="#cb48-3" tabindex="-1"></a>  <span class="at">age =</span> <span class="dv">50</span>, <span class="at">policyPeriod =</span> <span class="dv">20</span>,</span>
<span id="cb48-4"><a href="#cb48-4" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">10000</span>,</span>
<span id="cb48-5"><a href="#cb48-5" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-09-01&quot;</span>)</span>
<span id="cb48-6"><a href="#cb48-6" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a><span class="co"># Compare net premiums without loadings:</span></span>
<span id="cb49-2"><a href="#cb49-2" tabindex="-1"></a><span class="fu">contractGridPremium</span>(grd, <span class="at">premium =</span> <span class="st">&quot;net&quot;</span>)</span></code></pre></div>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
tarif
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
premiumRefund
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
0
</th>
<th style="text-align:right;">
0.5
</th>
<th style="text-align:right;">
1
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Example Tariff - Pure Endowment
</td>
<td style="text-align:right;">
426.7908
</td>
<td style="text-align:right;">
451.2802
</td>
<td style="text-align:right;">
478.6787
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Example Tariff - Endowment
</td>
<td style="text-align:right;">
501.6818
</td>
<td style="text-align:right;">
530.3701
</td>
<td style="text-align:right;">
562.4663
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Example Tariff - Pure Endowment (SP)
</td>
<td style="text-align:right;">
7739.6669
</td>
<td style="text-align:right;">
8378.4109
</td>
<td style="text-align:right;">
9129.2062
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a><span class="co"># Compare premium sums over the whole contract period (all contracts have the same sumInsured)</span></span>
<span id="cb50-2"><a href="#cb50-2" tabindex="-1"></a><span class="fu">contractGridPremium</span>(grd, <span class="at">.fun =</span> <span class="cf">function</span>(c) {<span class="fu">with</span>(c<span class="sc">$</span>Values, </span>
<span id="cb50-3"><a href="#cb50-3" tabindex="-1"></a>     unitPremiumSum <span class="sc">*</span> premiums[<span class="st">&quot;written&quot;</span>])</span>
<span id="cb50-4"><a href="#cb50-4" tabindex="-1"></a>})</span></code></pre></div>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
tarif
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
premiumRefund
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
0
</th>
<th style="text-align:right;">
0.5
</th>
<th style="text-align:right;">
1
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Example Tariff - Pure Endowment
</td>
<td style="text-align:right;">
10237.14
</td>
<td style="text-align:right;">
10799.44
</td>
<td style="text-align:right;">
11428.53
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Example Tariff - Endowment
</td>
<td style="text-align:right;">
11956.71
</td>
<td style="text-align:right;">
12615.42
</td>
<td style="text-align:right;">
13352.38
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Example Tariff - Pure Endowment (SP)
</td>
<td style="text-align:right;">
9062.99
</td>
<td style="text-align:right;">
9792.98
</td>
<td style="text-align:right;">
10651.03
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a><span class="co"># Compare risk premiums at time t=10 (the 11th row of the premium decomposition)</span></span>
<span id="cb51-2"><a href="#cb51-2" tabindex="-1"></a><span class="fu">contractGridPremium</span>(grd, <span class="at">.fun =</span> <span class="cf">function</span>(c) {c<span class="sc">$</span>Values<span class="sc">$</span>premiumComposition[<span class="dv">11</span>, <span class="st">&quot;risk&quot;</span>]})</span></code></pre></div>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
tarif
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
premiumRefund
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
0
</th>
<th style="text-align:right;">
0.5
</th>
<th style="text-align:right;">
1
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Example Tariff - Pure Endowment
</td>
<td style="text-align:right;">
-37.58
</td>
<td style="text-align:right;">
-17.98
</td>
<td style="text-align:right;">
3.96
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Example Tariff - Endowment
</td>
<td style="text-align:right;">
35.11
</td>
<td style="text-align:right;">
58.07
</td>
<td style="text-align:right;">
83.76
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Example Tariff - Pure Endowment (SP)
</td>
<td style="text-align:right;">
-64.75
</td>
<td style="text-align:right;">
-32.81
</td>
<td style="text-align:right;">
4.74
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a><span class="co"># Compare present value of all benefits and refunds (without costs) at time t=0</span></span>
<span id="cb52-2"><a href="#cb52-2" tabindex="-1"></a><span class="fu">contractGridPremium</span>(grd, <span class="at">.fun =</span> <span class="cf">function</span>(c) {c<span class="sc">$</span>Values<span class="sc">$</span>absPresentValues[<span class="dv">1</span>, <span class="st">&quot;benefitsAndRefund&quot;</span>]})</span></code></pre></div>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
tarif
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
premiumRefund
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
0
</th>
<th style="text-align:right;">
0.5
</th>
<th style="text-align:right;">
1
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Example Tariff - Pure Endowment
</td>
<td style="text-align:right;">
7739.67
</td>
<td style="text-align:right;">
8183.77
</td>
<td style="text-align:right;">
8680.63
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Example Tariff - Endowment
</td>
<td style="text-align:right;">
9097.78
</td>
<td style="text-align:right;">
9618.03
</td>
<td style="text-align:right;">
10200.08
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Example Tariff - Pure Endowment (SP)
</td>
<td style="text-align:right;">
7739.67
</td>
<td style="text-align:right;">
8378.41
</td>
<td style="text-align:right;">
9129.21
</td>
</tr>
</tbody>
</table>
<p>Other useful examples of grid comparisons include e.g. the effect of
the interest rate and the mortality table on the premiums:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" tabindex="-1"></a>grd <span class="ot">=</span> <span class="fu">contractGridPremium</span>(</span>
<span id="cb53-2"><a href="#cb53-2" tabindex="-1"></a>  <span class="at">axes =</span> <span class="fu">list</span>(<span class="at">mortalityTable =</span> mort.AT.census[<span class="st">&quot;m&quot;</span>, <span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)], <span class="at">i =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.005</span>, <span class="fl">0.01</span>), <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">45</span>, <span class="dv">60</span>), <span class="at">policyPeriod =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>)),</span>
<span id="cb53-3"><a href="#cb53-3" tabindex="-1"></a>  <span class="at">tarif =</span> Tarif.Life,</span>
<span id="cb53-4"><a href="#cb53-4" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-09-01&quot;</span>),</span>
<span id="cb53-5"><a href="#cb53-5" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">10000</span></span>
<span id="cb53-6"><a href="#cb53-6" tabindex="-1"></a>)</span>
<span id="cb53-7"><a href="#cb53-7" tabindex="-1"></a>grd</span></code></pre></div>
<ul>
<li>age=30, policyPeriod=10</li>
</ul>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
mortalityTable
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
i
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
0
</th>
<th style="text-align:right;">
0.005
</th>
<th style="text-align:right;">
0.01
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
ÖVSt 1990/92 M
</td>
<td style="text-align:right;">
40.30
</td>
<td style="text-align:right;">
40.20
</td>
<td style="text-align:right;">
40.09
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
ÖVSt 2000/02 M
</td>
<td style="text-align:right;">
34.96
</td>
<td style="text-align:right;">
34.88
</td>
<td style="text-align:right;">
34.80
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
ÖVSt 2010/12 M
</td>
<td style="text-align:right;">
31.77
</td>
<td style="text-align:right;">
31.71
</td>
<td style="text-align:right;">
31.66
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
ÖVSt 2020/22 M
</td>
<td style="text-align:right;">
31.25
</td>
<td style="text-align:right;">
31.19
</td>
<td style="text-align:right;">
31.15
</td>
</tr>
</tbody>
</table>
<ul>
<li>age=30, policyPeriod=20</li>
</ul>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
mortalityTable
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
i
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
0
</th>
<th style="text-align:right;">
0.005
</th>
<th style="text-align:right;">
0.01
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
ÖVSt 1990/92 M
</td>
<td style="text-align:right;">
53.07
</td>
<td style="text-align:right;">
52.58
</td>
<td style="text-align:right;">
52.11
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
ÖVSt 2000/02 M
</td>
<td style="text-align:right;">
45.12
</td>
<td style="text-align:right;">
44.74
</td>
<td style="text-align:right;">
44.37
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
ÖVSt 2010/12 M
</td>
<td style="text-align:right;">
38.72
</td>
<td style="text-align:right;">
38.46
</td>
<td style="text-align:right;">
38.21
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
ÖVSt 2020/22 M
</td>
<td style="text-align:right;">
36.53
</td>
<td style="text-align:right;">
36.33
</td>
<td style="text-align:right;">
36.14
</td>
</tr>
</tbody>
</table>
<ul>
<li>age=45, policyPeriod=10</li>
</ul>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
mortalityTable
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
i
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
0
</th>
<th style="text-align:right;">
0.005
</th>
<th style="text-align:right;">
0.01
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
ÖVSt 1990/92 M
</td>
<td style="text-align:right;">
89.76
</td>
<td style="text-align:right;">
89.27
</td>
<td style="text-align:right;">
88.79
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
ÖVSt 2000/02 M
</td>
<td style="text-align:right;">
76.96
</td>
<td style="text-align:right;">
76.53
</td>
<td style="text-align:right;">
76.11
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
ÖVSt 2010/12 M
</td>
<td style="text-align:right;">
63.17
</td>
<td style="text-align:right;">
62.83
</td>
<td style="text-align:right;">
62.50
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
ÖVSt 2020/22 M
</td>
<td style="text-align:right;">
54.30
</td>
<td style="text-align:right;">
54.05
</td>
<td style="text-align:right;">
53.79
</td>
</tr>
</tbody>
</table>
<ul>
<li>age=45, policyPeriod=20</li>
</ul>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
mortalityTable
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
i
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
0
</th>
<th style="text-align:right;">
0.005
</th>
<th style="text-align:right;">
0.01
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
ÖVSt 1990/92 M
</td>
<td style="text-align:right;">
139.45
</td>
<td style="text-align:right;">
137.45
</td>
<td style="text-align:right;">
135.48
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
ÖVSt 2000/02 M
</td>
<td style="text-align:right;">
111.57
</td>
<td style="text-align:right;">
110.15
</td>
<td style="text-align:right;">
108.76
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
ÖVSt 2010/12 M
</td>
<td style="text-align:right;">
98.07
</td>
<td style="text-align:right;">
96.70
</td>
<td style="text-align:right;">
95.36
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
ÖVSt 2020/22 M
</td>
<td style="text-align:right;">
84.95
</td>
<td style="text-align:right;">
83.75
</td>
<td style="text-align:right;">
82.58
</td>
</tr>
</tbody>
</table>
<ul>
<li>age=60, policyPeriod=10</li>
</ul>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
mortalityTable
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
i
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
0
</th>
<th style="text-align:right;">
0.005
</th>
<th style="text-align:right;">
0.01
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
ÖVSt 1990/92 M
</td>
<td style="text-align:right;">
288.97
</td>
<td style="text-align:right;">
287.00
</td>
<td style="text-align:right;">
285.06
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
ÖVSt 2000/02 M
</td>
<td style="text-align:right;">
218.10
</td>
<td style="text-align:right;">
216.59
</td>
<td style="text-align:right;">
215.10
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
ÖVSt 2010/12 M
</td>
<td style="text-align:right;">
191.56
</td>
<td style="text-align:right;">
190.38
</td>
<td style="text-align:right;">
189.23
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
ÖVSt 2020/22 M
</td>
<td style="text-align:right;">
178.94
</td>
<td style="text-align:right;">
177.73
</td>
<td style="text-align:right;">
176.53
</td>
</tr>
</tbody>
</table>
<ul>
<li>age=60, policyPeriod=20</li>
</ul>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
mortalityTable
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
i
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
0
</th>
<th style="text-align:right;">
0.005
</th>
<th style="text-align:right;">
0.01
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
ÖVSt 1990/92 M
</td>
<td style="text-align:right;">
440.61
</td>
<td style="text-align:right;">
433.80
</td>
<td style="text-align:right;">
427.15
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
ÖVSt 2000/02 M
</td>
<td style="text-align:right;">
351.92
</td>
<td style="text-align:right;">
346.15
</td>
<td style="text-align:right;">
340.51
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
ÖVSt 2010/12 M
</td>
<td style="text-align:right;">
291.32
</td>
<td style="text-align:right;">
286.96
</td>
<td style="text-align:right;">
282.70
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
ÖVSt 2020/22 M
</td>
<td style="text-align:right;">
284.30
</td>
<td style="text-align:right;">
279.82
</td>
<td style="text-align:right;">
275.45
</td>
</tr>
</tbody>
</table>
</div>
<div id="exporting-contract-data-to-excel" class="section level1" number="9">
<h1><span class="header-section-number">9</span> Exporting contract data
to Excel</h1>
<p>The LifeInsureR package also provides a function to export a given
contract to a spreadsheet in Excel format:</p>
<ul>
<li><code>exportInsuranceContract.xlsx(contract, filename)</code></li>
</ul>
<p>This function takes the contract and exports all data.frames in the
contract’s <code>contract$Values</code> data list as separate tabs to a
spreadsheet file. It also adds some nice formatting and additional
markup. For contracts with multiple contract blocks (e.g. dynamic
increases / sum increases or riders), the main contract and all its
child blocks are exported as well.</p>
<p>The tab containing the premiums and the premium calculation
coefficients even include the formulas, so one can in theory play around
with the parameters to see how the premium changes.</p>
<p>If the contract has profit participation features and some profit
scenarios have been added, they are exported as well.</p>
<p>Notice, however, that the Excel export is in general a static file
containing the current state of the contract and all its values (cash
flows, present values, premiums, reserves, profit participation, etc.)
as well as the most important parameters and an overview of the history
of the contract.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a>contract.exportExample <span class="ot">=</span> contract.PureEnd.NoRefund<span class="sc">$</span><span class="fu">clone</span>()<span class="sc">$</span></span>
<span id="cb54-2"><a href="#cb54-2" tabindex="-1"></a>  <span class="fu">addDynamics</span>(<span class="at">t =</span> <span class="dv">3</span>, <span class="at">SumInsuredDelta =</span> <span class="dv">10000</span>)<span class="sc">$</span></span>
<span id="cb54-3"><a href="#cb54-3" tabindex="-1"></a>  <span class="fu">addDynamics</span>(<span class="at">t =</span> <span class="dv">5</span>, <span class="at">SumInsuredDelta =</span> <span class="dv">15000</span>)<span class="sc">$</span></span>
<span id="cb54-4"><a href="#cb54-4" tabindex="-1"></a>  <span class="fu">addDynamics</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">SumInsuredDelta =</span> <span class="dv">15000</span>)<span class="sc">$</span></span>
<span id="cb54-5"><a href="#cb54-5" tabindex="-1"></a>  <span class="fu">addDynamics</span>(<span class="at">t =</span> <span class="dv">14</span>, <span class="at">SumInsuredDelta =</span> <span class="dv">10000</span>)</span>
<span id="cb54-6"><a href="#cb54-6" tabindex="-1"></a><span class="fu">exportInsuranceContract.xlsx</span>(contract.exportExample, <span class="at">filename =</span> <span class="st">&quot;Example_PureEndowment_Dynamics.xlsx&quot;</span>)</span></code></pre></div>
</div>
<div id="creating-examples-for-the-austrian-financial-market-authority" class="section level1" number="10">
<h1><span class="header-section-number">10</span> Creating examples for
the Austrian Financial Market Authority</h1>
<p>When introducing a new tariff, an Austrian insurance company has to
submit a detailled mathematical description (so-called
“Versicherungsmathematische Grundlagen”) of the tariff to the Financial
Market Authority (FMA), which have to follow the <a href="https://www.ris.bka.gv.at/GeltendeFassung.wxe?Abfrage=Bundesnormen&amp;Gesetzesnummer=20009298">regulation
on actuarial bases for life insurance – LV-VMGV</a>. The sections and
contents of this document are strictly defined in the regulation, and in
addition to the formulas of the tariff, an example contract has to be
calculated with the following key parameters:</p>
<ul>
<li>age 35, duration 30 years (15 years for protection tariffs)</li>
<li>sum insured 100 000 Euro / monthly annuity 1000 Euro for
annuities</li>
<li>yearly premiums during the whole contract period (defereal period of
30 years for annuities)</li>
<li>intermediate values (reserves, etc.) have to be calculated at <span class="math inline">\(t=10\)</span>.</li>
</ul>
<p>Given a tariff and a derived contract (with the above key
parameters), this package provides two functions to calculate and print
/ export the required values either to the console / screen or to a
file:</p>
<ul>
<li><code>showVmGlgExamples(contract, prf = 10, t = 10, t_prf = 12, file = &quot;&quot;, ...)</code></li>
<li><code>exportInsuranceContractExample(contract, prf = 10, outdir = &quot;.&quot;, basename=NULL, extraname = NULL, ...)</code></li>
</ul>
<p>The function <code>showVmGlgExamples</code> calculates all required
values for the actuarial bases document in the required order (including
values after a premium waiver at the given time). If a filename is
given, the output is exported to that text file, otherwise it is simply
printed out in the R console:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" tabindex="-1"></a>VMGL.contract <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb55-2"><a href="#cb55-2" tabindex="-1"></a>    Tarif.PureEnd,</span>
<span id="cb55-3"><a href="#cb55-3" tabindex="-1"></a>    <span class="at">age =</span> <span class="dv">35</span>, <span class="at">policyPeriod =</span> <span class="dv">30</span>, </span>
<span id="cb55-4"><a href="#cb55-4" tabindex="-1"></a>    <span class="at">premiumFrequency =</span> <span class="dv">1</span>,</span>
<span id="cb55-5"><a href="#cb55-5" tabindex="-1"></a>    <span class="at">sumInsured =</span> <span class="dv">100000</span>,</span>
<span id="cb55-6"><a href="#cb55-6" tabindex="-1"></a>    <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-07-01&quot;</span>)</span>
<span id="cb55-7"><a href="#cb55-7" tabindex="-1"></a>  )</span>
<span id="cb55-8"><a href="#cb55-8" tabindex="-1"></a></span>
<span id="cb55-9"><a href="#cb55-9" tabindex="-1"></a><span class="fu">showVmGlgExamples</span>(VMGL.contract)</span>
<span id="cb55-10"><a href="#cb55-10" tabindex="-1"></a><span class="co">#&gt; Tarif: Example Tariff - Pure Endowment</span></span>
<span id="cb55-11"><a href="#cb55-11" tabindex="-1"></a><span class="co">#&gt; VS: 100000.00</span></span>
<span id="cb55-12"><a href="#cb55-12" tabindex="-1"></a><span class="co">#&gt; Rechenzins: 0%, Sterbetafel: ÖVSt 2010/2012 U</span></span>
<span id="cb55-13"><a href="#cb55-13" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb55-14"><a href="#cb55-14" tabindex="-1"></a><span class="co">#&gt; Prämien:</span></span>
<span id="cb55-15"><a href="#cb55-15" tabindex="-1"></a><span class="co">#&gt; ========</span></span>
<span id="cb55-16"><a href="#cb55-16" tabindex="-1"></a><span class="co">#&gt; Nettoprämie:          3101.31</span></span>
<span id="cb55-17"><a href="#cb55-17" tabindex="-1"></a><span class="co">#&gt; Zillmerprämie:        3198.88</span></span>
<span id="cb55-18"><a href="#cb55-18" tabindex="-1"></a><span class="co">#&gt; Bruttoprämie:         3534.13</span></span>
<span id="cb55-19"><a href="#cb55-19" tabindex="-1"></a><span class="co">#&gt; Vorgeschr.Pr.:        3685.90</span></span>
<span id="cb55-20"><a href="#cb55-20" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb55-21"><a href="#cb55-21" tabindex="-1"></a><span class="co">#&gt; Sparprämie (t=10):    3190.01</span></span>
<span id="cb55-22"><a href="#cb55-22" tabindex="-1"></a><span class="co">#&gt; Risikoprämie (t=10):     8.87</span></span>
<span id="cb55-23"><a href="#cb55-23" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb55-24"><a href="#cb55-24" tabindex="-1"></a><span class="co">#&gt; Reserven:</span></span>
<span id="cb55-25"><a href="#cb55-25" tabindex="-1"></a><span class="co">#&gt; =========</span></span>
<span id="cb55-26"><a href="#cb55-26" tabindex="-1"></a><span class="co">#&gt; Prämienpflichtig (t=10):             30052.86</span></span>
<span id="cb55-27"><a href="#cb55-27" tabindex="-1"></a><span class="co">#&gt; Pr.Frei (mangels Zahlung) (tprf=12): 24635.68</span></span>
<span id="cb55-28"><a href="#cb55-28" tabindex="-1"></a><span class="co">#&gt; VwKostenreserve (t=10):                 -0.00</span></span>
<span id="cb55-29"><a href="#cb55-29" tabindex="-1"></a><span class="co">#&gt; VwKostenreserve (Pr.Frei) (tprf=12):   496.91</span></span>
<span id="cb55-30"><a href="#cb55-30" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb55-31"><a href="#cb55-31" tabindex="-1"></a><span class="co">#&gt; Bilanzreserve (t=10.50):             31730.97</span></span>
<span id="cb55-32"><a href="#cb55-32" tabindex="-1"></a><span class="co">#&gt; Prämienübertrag (BM= 7):              1772.07</span></span>
<span id="cb55-33"><a href="#cb55-33" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb55-34"><a href="#cb55-34" tabindex="-1"></a><span class="co">#&gt; Rückkauf und Prämienfreistellung:</span></span>
<span id="cb55-35"><a href="#cb55-35" tabindex="-1"></a><span class="co">#&gt; =================================</span></span>
<span id="cb55-36"><a href="#cb55-36" tabindex="-1"></a><span class="co">#&gt; Rückkaufsreserve (t=10):          30052.86</span></span>
<span id="cb55-37"><a href="#cb55-37" tabindex="-1"></a><span class="co">#&gt; Rückkaufswert (t=10):             28049.33</span></span>
<span id="cb55-38"><a href="#cb55-38" tabindex="-1"></a><span class="co">#&gt; Abschlusskostenrücktrag (t=10):       0.00</span></span>
<span id="cb55-39"><a href="#cb55-39" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb55-40"><a href="#cb55-40" tabindex="-1"></a><span class="co">#&gt; Rückkaufswert (Prf.) (t=12):      28049.33 (VS: 29726.53)</span></span>
<span id="cb55-41"><a href="#cb55-41" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb55-42"><a href="#cb55-42" tabindex="-1"></a><span class="co">#&gt; Prämienfreie VS (t=10):           29726.53</span></span></code></pre></div>
<p>The <code>exportInsuranceContractExample</code> provides no new
functionality, but combines the Excel export feature and the regulatory
example together. For a given contract it will create three files:</p>
<ul>
<li>Excel export of the contract</li>
<li>Excel export of the contract with a premium waiver applied at the
given time</li>
<li>The regulatory example (with premium waiver at the same time as in
the Excel export) in a text file</li>
</ul>
<p>One can give a base name and an extra name to distinguish different
calculations in the file names.</p>
</div>
<div id="contracts-combining-multiple-contract-layers-slices" class="section level1" number="11">
<h1><span class="header-section-number">11</span> Contracts combining
multiple contract layers / slices</h1>
<p>In real life, an insurance contract is not merely signed initially
and then left untouched until it expires or is surrendered. Rather, some
contracts already have an automatic increase of the sumInsured or the
premium (depending usually on some kind of observed consumer price
index) included in the contract. Other contracts have additional
biometric riders like an additional death or disability cover. Other
contracts are extended after their expiration, using the existing
reserve as a one-time payment (<code>initialCapital</code>) for the
follow-up contract.</p>
<p>In all these cases, the original contract can be calculated as an
<code>InsuranceContract</code>, but the additional dynamic increases,
additional riders or extensions are mathematically calculated as
separate contracts (potentiall using different tariffs / types of
insurance), although most parameters are shared from the original main
contract.</p>
<p>In addition to modelling one particular tariff, the
LifeInsuranceContract class can also act as a wrapper to bundle multiple
related contracts / contract slices together. The class provides several
methods for this: *
<code>$addDynamics(t, NewSumInsured, SumInsuredDelta, id, ...)</code>:
Include (at time <code>t</code>) a dynamic increase of premium or
sumInsured, but with the same basic parameters (age, tariff, maturity,
interest rate, etc.) as the main contract. The increase can be given
either as the new total sumInsured or as the increase in the sumInsured
caused by that one increase. Other parameters given as <code>...</code>
are passed on to the <code>InsuranceContract$new</code> constructor of
the layer for the dynamic increase. This also means that one can
potentially override all parameters for the increase, including the
tariff or the interest rate. *
<code>$addExtension(t = NULL, policyPeriod, ...)</code> After the
original contracts maturity, append a follow-up contract (by default
paid-up, i.e. no new premiums are paid) that uses the existing reserve
as initial capital. By default, no further premiums are paid and the
sumInsured is calculated from the existing reserve and the tariff of the
extension. One can, however, also provide either a sumInsured or a
premium of the contract extension. In that case, the premium or the
sumInsured will be calculated, using the existing reserves as
initialCapital. *
<code>$addBlock(id = NULL, block = NULL, t, ...)</code> Generic function
to add a child block to the contract. If a block (object of type
<code>LifeInsuranceContract</code> is passed, it is inserted and flagged
as starting at time <code>t</code>. If no block is passed, a new
insurance contract is created using the arguments passed as
<code>...</code>, combined with the parameters of the main contract. If
<code>t&gt;0</code>, the child block starts later than the original
contract. It is also possible that the child block extends beyond the
maturity of the original contract (e.g. contract extensions are
implemented this way).</p>
<p>In these case, the main contract will have several child blocks (also
LifeInsuranceContract objects), and the values of the main contract
object will be the aggregated values of all its children, rather than
the results of a calculation from an underlying tariff.</p>
<div id="dynamic-increases" class="section level2" number="11.1">
<h2><span class="header-section-number">11.1</span> Dynamic
increases</h2>
<p>To increase the sum insured or premium by a given value ()</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" tabindex="-1"></a><span class="co"># Contract with initial capital of 5.000 EUR</span></span>
<span id="cb56-2"><a href="#cb56-2" tabindex="-1"></a>ctr.dynInc <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb56-3"><a href="#cb56-3" tabindex="-1"></a>  <span class="at">tarif =</span> Tarif.Endowment,</span>
<span id="cb56-4"><a href="#cb56-4" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">10000</span>,</span>
<span id="cb56-5"><a href="#cb56-5" tabindex="-1"></a>  <span class="at">age =</span> <span class="dv">40</span>, <span class="at">policyPeriod =</span> <span class="dv">10</span>,</span>
<span id="cb56-6"><a href="#cb56-6" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-09-01&quot;</span>)</span>
<span id="cb56-7"><a href="#cb56-7" tabindex="-1"></a>)<span class="sc">$</span></span>
<span id="cb56-8"><a href="#cb56-8" tabindex="-1"></a>  <span class="fu">addDynamics</span>(<span class="at">t =</span> <span class="dv">1</span>, <span class="at">SumInsuredDelta =</span> <span class="dv">1000</span>)<span class="sc">$</span></span>
<span id="cb56-9"><a href="#cb56-9" tabindex="-1"></a>  <span class="fu">addDynamics</span>(<span class="at">t =</span> <span class="dv">5</span>, <span class="at">NewSumInsured =</span> <span class="dv">15000</span>)<span class="sc">$</span></span>
<span id="cb56-10"><a href="#cb56-10" tabindex="-1"></a>  <span class="fu">addDynamics</span>(<span class="at">t =</span> <span class="dv">8</span>, <span class="at">SumInsuredDelta =</span> <span class="dv">4000</span>)</span>
<span id="cb56-11"><a href="#cb56-11" tabindex="-1"></a></span>
<span id="cb56-12"><a href="#cb56-12" tabindex="-1"></a></span>
<span id="cb56-13"><a href="#cb56-13" tabindex="-1"></a>ctr.dynInc<span class="sc">$</span>Values<span class="sc">$</span>basicData</span>
<span id="cb56-14"><a href="#cb56-14" tabindex="-1"></a><span class="co">#&gt;    PremiumPayment SumInsured Premiums InterestRate PolicyDuration PremiumPeriod</span></span>
<span id="cb56-15"><a href="#cb56-15" tabindex="-1"></a><span class="co">#&gt;                 1      10000 1087.878        0.005             10            10</span></span>
<span id="cb56-16"><a href="#cb56-16" tabindex="-1"></a><span class="co">#&gt; 1               2      11000 1208.880        0.005             10            10</span></span>
<span id="cb56-17"><a href="#cb56-17" tabindex="-1"></a><span class="co">#&gt; 2               2      11000 1208.880        0.005             10            10</span></span>
<span id="cb56-18"><a href="#cb56-18" tabindex="-1"></a><span class="co">#&gt; 3               2      11000 1208.880        0.005             10            10</span></span>
<span id="cb56-19"><a href="#cb56-19" tabindex="-1"></a><span class="co">#&gt; 4               2      11000 1208.880        0.005             10            10</span></span>
<span id="cb56-20"><a href="#cb56-20" tabindex="-1"></a><span class="co">#&gt; 5               3      15000 2083.097        0.005             10            10</span></span>
<span id="cb56-21"><a href="#cb56-21" tabindex="-1"></a><span class="co">#&gt; 6               3      15000 2083.097        0.005             10            10</span></span>
<span id="cb56-22"><a href="#cb56-22" tabindex="-1"></a><span class="co">#&gt; 7               3      15000 2083.097        0.005             10            10</span></span>
<span id="cb56-23"><a href="#cb56-23" tabindex="-1"></a><span class="co">#&gt; 8               4      19000 4271.768        0.005             10            10</span></span>
<span id="cb56-24"><a href="#cb56-24" tabindex="-1"></a><span class="co">#&gt; 9               4      19000 4271.768        0.005             10            10</span></span>
<span id="cb56-25"><a href="#cb56-25" tabindex="-1"></a><span class="co">#&gt; 10              0      19000    0.000        0.005             10            10</span></span></code></pre></div>
<p>As seen in this table, the sum insured increases and the premium with
it. The <code>PremiumPayment</code> column is no longer a 0/1-column
indicating whether a premium is paid or not, but rather is the number of
blocks/layers where a premium is paid.</p>
<p>The individual blocks can be accessed with the
<code>contract$blocks</code> list:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" tabindex="-1"></a><span class="cf">for</span> (b <span class="cf">in</span> ctr.dynInc<span class="sc">$</span>blocks) {</span>
<span id="cb57-2"><a href="#cb57-2" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Block: &quot;</span>, b<span class="sc">$</span>Parameters<span class="sc">$</span>ContractData<span class="sc">$</span>id, <span class="st">&quot;, starts at t=&quot;</span>, b<span class="sc">$</span>Parameters<span class="sc">$</span>ContractData<span class="sc">$</span>blockStart, <span class="st">&quot;, policyPeriod=&quot;</span>, b<span class="sc">$</span>Parameters<span class="sc">$</span>ContractData<span class="sc">$</span>policyPeriod, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb57-3"><a href="#cb57-3" tabindex="-1"></a>}</span>
<span id="cb57-4"><a href="#cb57-4" tabindex="-1"></a><span class="co">#&gt; Block: Hauptvertrag, starts at t=0, policyPeriod=10</span></span>
<span id="cb57-5"><a href="#cb57-5" tabindex="-1"></a><span class="co">#&gt; Block: dyn1, starts at t=1, policyPeriod=9</span></span>
<span id="cb57-6"><a href="#cb57-6" tabindex="-1"></a><span class="co">#&gt; Block: dyn2, starts at t=5, policyPeriod=5</span></span>
<span id="cb57-7"><a href="#cb57-7" tabindex="-1"></a><span class="co">#&gt; Block: dyn3, starts at t=8, policyPeriod=2</span></span></code></pre></div>
<p>Each block is formally handled like a separate contract, each
starting at its own time <code>t=0</code>. The over-all contract then
takes care to correctly shift the child blocks to the time relative to
the parent block, before aggregating the data:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" tabindex="-1"></a>ctr.dynInc<span class="sc">$</span>blocks<span class="sc">$</span>Hauptvertrag<span class="sc">$</span>Values<span class="sc">$</span>basicData</span>
<span id="cb58-2"><a href="#cb58-2" tabindex="-1"></a><span class="co">#&gt;    PremiumPayment SumInsured Premiums InterestRate PolicyDuration PremiumPeriod</span></span>
<span id="cb58-3"><a href="#cb58-3" tabindex="-1"></a><span class="co">#&gt; 0               1      10000 1087.878        0.005             10            10</span></span>
<span id="cb58-4"><a href="#cb58-4" tabindex="-1"></a><span class="co">#&gt; 1               1      10000 1087.878        0.005             10            10</span></span>
<span id="cb58-5"><a href="#cb58-5" tabindex="-1"></a><span class="co">#&gt; 2               1      10000 1087.878        0.005             10            10</span></span>
<span id="cb58-6"><a href="#cb58-6" tabindex="-1"></a><span class="co">#&gt; 3               1      10000 1087.878        0.005             10            10</span></span>
<span id="cb58-7"><a href="#cb58-7" tabindex="-1"></a><span class="co">#&gt; 4               1      10000 1087.878        0.005             10            10</span></span>
<span id="cb58-8"><a href="#cb58-8" tabindex="-1"></a><span class="co">#&gt; 5               1      10000 1087.878        0.005             10            10</span></span>
<span id="cb58-9"><a href="#cb58-9" tabindex="-1"></a><span class="co">#&gt; 6               1      10000 1087.878        0.005             10            10</span></span>
<span id="cb58-10"><a href="#cb58-10" tabindex="-1"></a><span class="co">#&gt; 7               1      10000 1087.878        0.005             10            10</span></span>
<span id="cb58-11"><a href="#cb58-11" tabindex="-1"></a><span class="co">#&gt; 8               1      10000 1087.878        0.005             10            10</span></span>
<span id="cb58-12"><a href="#cb58-12" tabindex="-1"></a><span class="co">#&gt; 9               1      10000 1087.878        0.005             10            10</span></span>
<span id="cb58-13"><a href="#cb58-13" tabindex="-1"></a><span class="co">#&gt; 10              0      10000    0.000        0.005             10            10</span></span>
<span id="cb58-14"><a href="#cb58-14" tabindex="-1"></a>ctr.dynInc<span class="sc">$</span>blocks<span class="sc">$</span>dyn1<span class="sc">$</span>Values<span class="sc">$</span>basicData</span>
<span id="cb58-15"><a href="#cb58-15" tabindex="-1"></a><span class="co">#&gt;   PremiumPayment SumInsured Premiums InterestRate PolicyDuration PremiumPeriod</span></span>
<span id="cb58-16"><a href="#cb58-16" tabindex="-1"></a><span class="co">#&gt; 0              1       1000 121.0011        0.005              9             9</span></span>
<span id="cb58-17"><a href="#cb58-17" tabindex="-1"></a><span class="co">#&gt; 1              1       1000 121.0011        0.005              9             9</span></span>
<span id="cb58-18"><a href="#cb58-18" tabindex="-1"></a><span class="co">#&gt; 2              1       1000 121.0011        0.005              9             9</span></span>
<span id="cb58-19"><a href="#cb58-19" tabindex="-1"></a><span class="co">#&gt; 3              1       1000 121.0011        0.005              9             9</span></span>
<span id="cb58-20"><a href="#cb58-20" tabindex="-1"></a><span class="co">#&gt; 4              1       1000 121.0011        0.005              9             9</span></span>
<span id="cb58-21"><a href="#cb58-21" tabindex="-1"></a><span class="co">#&gt; 5              1       1000 121.0011        0.005              9             9</span></span>
<span id="cb58-22"><a href="#cb58-22" tabindex="-1"></a><span class="co">#&gt; 6              1       1000 121.0011        0.005              9             9</span></span>
<span id="cb58-23"><a href="#cb58-23" tabindex="-1"></a><span class="co">#&gt; 7              1       1000 121.0011        0.005              9             9</span></span>
<span id="cb58-24"><a href="#cb58-24" tabindex="-1"></a><span class="co">#&gt; 8              1       1000 121.0011        0.005              9             9</span></span>
<span id="cb58-25"><a href="#cb58-25" tabindex="-1"></a><span class="co">#&gt; 9              0       1000   0.0000        0.005              9             9</span></span>
<span id="cb58-26"><a href="#cb58-26" tabindex="-1"></a>ctr.dynInc<span class="sc">$</span>blocks<span class="sc">$</span>dyn2<span class="sc">$</span>Values<span class="sc">$</span>basicData</span>
<span id="cb58-27"><a href="#cb58-27" tabindex="-1"></a><span class="co">#&gt;   PremiumPayment SumInsured Premiums InterestRate PolicyDuration PremiumPeriod</span></span>
<span id="cb58-28"><a href="#cb58-28" tabindex="-1"></a><span class="co">#&gt; 0              1       4000 874.2175        0.005              5             5</span></span>
<span id="cb58-29"><a href="#cb58-29" tabindex="-1"></a><span class="co">#&gt; 1              1       4000 874.2175        0.005              5             5</span></span>
<span id="cb58-30"><a href="#cb58-30" tabindex="-1"></a><span class="co">#&gt; 2              1       4000 874.2175        0.005              5             5</span></span>
<span id="cb58-31"><a href="#cb58-31" tabindex="-1"></a><span class="co">#&gt; 3              1       4000 874.2175        0.005              5             5</span></span>
<span id="cb58-32"><a href="#cb58-32" tabindex="-1"></a><span class="co">#&gt; 4              1       4000 874.2175        0.005              5             5</span></span>
<span id="cb58-33"><a href="#cb58-33" tabindex="-1"></a><span class="co">#&gt; 5              0       4000   0.0000        0.005              5             5</span></span>
<span id="cb58-34"><a href="#cb58-34" tabindex="-1"></a>ctr.dynInc<span class="sc">$</span>blocks<span class="sc">$</span>dyn3<span class="sc">$</span>Values<span class="sc">$</span>basicData</span>
<span id="cb58-35"><a href="#cb58-35" tabindex="-1"></a><span class="co">#&gt;   PremiumPayment SumInsured Premiums InterestRate PolicyDuration PremiumPeriod</span></span>
<span id="cb58-36"><a href="#cb58-36" tabindex="-1"></a><span class="co">#&gt; 0              1       4000 2188.671        0.005              2             2</span></span>
<span id="cb58-37"><a href="#cb58-37" tabindex="-1"></a><span class="co">#&gt; 1              1       4000 2188.671        0.005              2             2</span></span>
<span id="cb58-38"><a href="#cb58-38" tabindex="-1"></a><span class="co">#&gt; 2              0       4000    0.000        0.005              2             2</span></span></code></pre></div>
</div>
<div id="general-biometric-riders" class="section level2" number="11.2">
<h2><span class="header-section-number">11.2</span> General biometric
riders</h2>
<p>Instead of adding a dynamic increase, which typically uses the same
tariff as the main contract, it is also possible to bundle e.g. a
protection rider to a saving product. The savings product and the
protection rider are calculated individually as child blocks, and the
overall values of the contract are obtained by aggregating the values
from the two children (savings and protection part). Of course, in this
scenario, the combined sumInsured of the overall contract is not
meaningful, but the sumInsured of the individual blocks is.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" tabindex="-1"></a>ctr.main <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb59-2"><a href="#cb59-2" tabindex="-1"></a>  <span class="at">tarif =</span> Tarif.Endowment,</span>
<span id="cb59-3"><a href="#cb59-3" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">10000</span>,</span>
<span id="cb59-4"><a href="#cb59-4" tabindex="-1"></a>  <span class="at">age =</span> <span class="dv">40</span>, <span class="at">policyPeriod =</span> <span class="dv">10</span>,</span>
<span id="cb59-5"><a href="#cb59-5" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-09-01&quot;</span>)</span>
<span id="cb59-6"><a href="#cb59-6" tabindex="-1"></a>)</span>
<span id="cb59-7"><a href="#cb59-7" tabindex="-1"></a>ctr.Rider <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb59-8"><a href="#cb59-8" tabindex="-1"></a>  <span class="at">tarif =</span> Tarif.L71U, </span>
<span id="cb59-9"><a href="#cb59-9" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">100000</span>, </span>
<span id="cb59-10"><a href="#cb59-10" tabindex="-1"></a>  <span class="at">age =</span> <span class="dv">40</span>, <span class="at">policyPeriod =</span> <span class="dv">10</span>,</span>
<span id="cb59-11"><a href="#cb59-11" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-09-01&quot;</span>)</span>
<span id="cb59-12"><a href="#cb59-12" tabindex="-1"></a>)</span>
<span id="cb59-13"><a href="#cb59-13" tabindex="-1"></a>ctr.main<span class="sc">$</span><span class="fu">addBlock</span>(<span class="at">block =</span> ctr.Rider)</span>
<span id="cb59-14"><a href="#cb59-14" tabindex="-1"></a></span>
<span id="cb59-15"><a href="#cb59-15" tabindex="-1"></a>ctr.withRider <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb59-16"><a href="#cb59-16" tabindex="-1"></a>  <span class="at">tarif =</span> Tarif.Endowment,</span>
<span id="cb59-17"><a href="#cb59-17" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">10000</span>,</span>
<span id="cb59-18"><a href="#cb59-18" tabindex="-1"></a>  <span class="at">age =</span> <span class="dv">40</span>, <span class="at">policyPeriod =</span> <span class="dv">10</span>,</span>
<span id="cb59-19"><a href="#cb59-19" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-09-01&quot;</span>)</span>
<span id="cb59-20"><a href="#cb59-20" tabindex="-1"></a>)<span class="sc">$</span></span>
<span id="cb59-21"><a href="#cb59-21" tabindex="-1"></a>  <span class="fu">addBlock</span>(<span class="at">tarif =</span> Tarif.L71U, <span class="at">sumInsured =</span> <span class="dv">100000</span>, </span>
<span id="cb59-22"><a href="#cb59-22" tabindex="-1"></a>           <span class="at">age =</span> <span class="dv">40</span>, <span class="at">policyPeriod =</span> <span class="dv">10</span>,</span>
<span id="cb59-23"><a href="#cb59-23" tabindex="-1"></a>           <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-09-01&quot;</span>))</span></code></pre></div>
</div>
<div id="extending-a-contract-beyond-its-maturity" class="section level2" number="11.3">
<h2><span class="header-section-number">11.3</span> Extending a contract
beyond its maturity</h2>
<p>When a contract expires, many companies offer premium-free contract
extensions, where the existing reserve is used as initial reserve for a
follow-up contract (possibly with new terms and parameters like interest
rate or mortalities).</p>
<p>Instead of modifying the original contract and re-calculating it, it
is easier to model the extension as a new block with the existing
reserve given as . The extension will be calculated like a
standalone-contract and the overall contract will aggregate the values
from the original contract and the extension. As the extension is a
separate contract object, one can pass all contract parameters to the
method.</p>
<p>The original premiumPeriod of the main contract is used, so by
default the extension will be a premium-free extension, where the
sumInsured is calculated from the existing reserve and the benefits and
costs of the extensions’ tariff.</p>
<p>To create a premium-free extension explicitly, one can pass (which is
the default anyway). To create an extension with regular (or single)
premium payments, one can pass either a or a to provide the sum insured
and the premium and calculate the other from the given value</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" tabindex="-1"></a><span class="co"># original contract, expiring after 20 years</span></span>
<span id="cb60-2"><a href="#cb60-2" tabindex="-1"></a>ContractA <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb60-3"><a href="#cb60-3" tabindex="-1"></a>  <span class="at">tarif =</span> Tarif.Endowment,</span>
<span id="cb60-4"><a href="#cb60-4" tabindex="-1"></a>  <span class="at">age =</span> <span class="dv">40</span>, <span class="at">policyPeriod =</span> <span class="dv">20</span>,</span>
<span id="cb60-5"><a href="#cb60-5" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">10000</span>,</span>
<span id="cb60-6"><a href="#cb60-6" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2000-07-01&quot;</span>)</span>
<span id="cb60-7"><a href="#cb60-7" tabindex="-1"></a>)</span>
<span id="cb60-8"><a href="#cb60-8" tabindex="-1"></a></span>
<span id="cb60-9"><a href="#cb60-9" tabindex="-1"></a><span class="co"># premium-free extension</span></span>
<span id="cb60-10"><a href="#cb60-10" tabindex="-1"></a>ContractB <span class="ot">=</span> ContractA<span class="sc">$</span><span class="fu">clone</span>()<span class="sc">$</span></span>
<span id="cb60-11"><a href="#cb60-11" tabindex="-1"></a>  <span class="fu">addExtension</span>(<span class="at">id =</span> <span class="st">&quot;Verlaengerung1&quot;</span>, <span class="at">contractPeriod =</span> <span class="dv">5</span>, <span class="at">premiumPeriod =</span> <span class="dv">0</span>)</span>
<span id="cb60-12"><a href="#cb60-12" tabindex="-1"></a><span class="co"># sumInsured calculated from existing reserve:</span></span>
<span id="cb60-13"><a href="#cb60-13" tabindex="-1"></a>ContractB<span class="sc">$</span>blocks<span class="sc">$</span>Verlaengerung1<span class="sc">$</span>Parameters<span class="sc">$</span>ContractData<span class="sc">$</span>sumInsured</span>
<span id="cb60-14"><a href="#cb60-14" tabindex="-1"></a><span class="co">#&gt; [1] 10723.08</span></span>
<span id="cb60-15"><a href="#cb60-15" tabindex="-1"></a>ContractB<span class="sc">$</span>Values<span class="sc">$</span>basicData</span>
<span id="cb60-16"><a href="#cb60-16" tabindex="-1"></a><span class="co">#&gt;    PremiumPayment SumInsured Premiums InterestRate PolicyDuration PremiumPeriod</span></span>
<span id="cb60-17"><a href="#cb60-17" tabindex="-1"></a><span class="co">#&gt; 0               1   10000.00 544.8277        0.005             20            20</span></span>
<span id="cb60-18"><a href="#cb60-18" tabindex="-1"></a><span class="co">#&gt; 1               1   10000.00 544.8277        0.005             20            20</span></span>
<span id="cb60-19"><a href="#cb60-19" tabindex="-1"></a><span class="co">#&gt; 2               1   10000.00 544.8277        0.005             20            20</span></span>
<span id="cb60-20"><a href="#cb60-20" tabindex="-1"></a><span class="co">#&gt; 3               1   10000.00 544.8277        0.005             20            20</span></span>
<span id="cb60-21"><a href="#cb60-21" tabindex="-1"></a><span class="co">#&gt; 4               1   10000.00 544.8277        0.005             20            20</span></span>
<span id="cb60-22"><a href="#cb60-22" tabindex="-1"></a><span class="co">#&gt; 5               1   10000.00 544.8277        0.005             20            20</span></span>
<span id="cb60-23"><a href="#cb60-23" tabindex="-1"></a><span class="co">#&gt; 6               1   10000.00 544.8277        0.005             20            20</span></span>
<span id="cb60-24"><a href="#cb60-24" tabindex="-1"></a><span class="co">#&gt; 7               1   10000.00 544.8277        0.005             20            20</span></span>
<span id="cb60-25"><a href="#cb60-25" tabindex="-1"></a><span class="co">#&gt; 8               1   10000.00 544.8277        0.005             20            20</span></span>
<span id="cb60-26"><a href="#cb60-26" tabindex="-1"></a><span class="co">#&gt; 9               1   10000.00 544.8277        0.005             20            20</span></span>
<span id="cb60-27"><a href="#cb60-27" tabindex="-1"></a><span class="co">#&gt; 10              1   10000.00 544.8277        0.005             20            20</span></span>
<span id="cb60-28"><a href="#cb60-28" tabindex="-1"></a><span class="co">#&gt; 11              1   10000.00 544.8277        0.005             20            20</span></span>
<span id="cb60-29"><a href="#cb60-29" tabindex="-1"></a><span class="co">#&gt; 12              1   10000.00 544.8277        0.005             20            20</span></span>
<span id="cb60-30"><a href="#cb60-30" tabindex="-1"></a><span class="co">#&gt; 13              1   10000.00 544.8277        0.005             20            20</span></span>
<span id="cb60-31"><a href="#cb60-31" tabindex="-1"></a><span class="co">#&gt; 14              1   10000.00 544.8277        0.005             20            20</span></span>
<span id="cb60-32"><a href="#cb60-32" tabindex="-1"></a><span class="co">#&gt; 15              1   10000.00 544.8277        0.005             20            20</span></span>
<span id="cb60-33"><a href="#cb60-33" tabindex="-1"></a><span class="co">#&gt; 16              1   10000.00 544.8277        0.005             20            20</span></span>
<span id="cb60-34"><a href="#cb60-34" tabindex="-1"></a><span class="co">#&gt; 17              1   10000.00 544.8277        0.005             20            20</span></span>
<span id="cb60-35"><a href="#cb60-35" tabindex="-1"></a><span class="co">#&gt; 18              1   10000.00 544.8277        0.005             20            20</span></span>
<span id="cb60-36"><a href="#cb60-36" tabindex="-1"></a><span class="co">#&gt; 19              1   10000.00 544.8277        0.005             20            20</span></span>
<span id="cb60-37"><a href="#cb60-37" tabindex="-1"></a><span class="co">#&gt; 20              0   20723.08   0.0000        0.005             20            20</span></span>
<span id="cb60-38"><a href="#cb60-38" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08   0.0000        0.005             20             0</span></span>
<span id="cb60-39"><a href="#cb60-39" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08   0.0000        0.005             20             0</span></span>
<span id="cb60-40"><a href="#cb60-40" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08   0.0000        0.005             20             0</span></span>
<span id="cb60-41"><a href="#cb60-41" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08   0.0000        0.005             20             0</span></span>
<span id="cb60-42"><a href="#cb60-42" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08   0.0000        0.005             20             0</span></span>
<span id="cb60-43"><a href="#cb60-43" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08   0.0000        0.005             20             0</span></span>
<span id="cb60-44"><a href="#cb60-44" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08   0.0000        0.005             20             0</span></span>
<span id="cb60-45"><a href="#cb60-45" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08   0.0000        0.005             20             0</span></span>
<span id="cb60-46"><a href="#cb60-46" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08   0.0000        0.005             20             0</span></span>
<span id="cb60-47"><a href="#cb60-47" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08   0.0000        0.005             20             0</span></span>
<span id="cb60-48"><a href="#cb60-48" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08   0.0000        0.005             20             0</span></span>
<span id="cb60-49"><a href="#cb60-49" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08   0.0000        0.005             20             0</span></span>
<span id="cb60-50"><a href="#cb60-50" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08   0.0000        0.005             20             0</span></span>
<span id="cb60-51"><a href="#cb60-51" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08   0.0000        0.005             20             0</span></span>
<span id="cb60-52"><a href="#cb60-52" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08   0.0000        0.005             20             0</span></span>
<span id="cb60-53"><a href="#cb60-53" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08   0.0000        0.005             20             0</span></span>
<span id="cb60-54"><a href="#cb60-54" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08   0.0000        0.005             20             0</span></span>
<span id="cb60-55"><a href="#cb60-55" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08   0.0000        0.005             20             0</span></span>
<span id="cb60-56"><a href="#cb60-56" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08   0.0000        0.005             20             0</span></span>
<span id="cb60-57"><a href="#cb60-57" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08   0.0000        0.005             20             0</span></span>
<span id="cb60-58"><a href="#cb60-58" tabindex="-1"></a></span>
<span id="cb60-59"><a href="#cb60-59" tabindex="-1"></a><span class="co"># extension with given sumInsured resulting in 0 (gross) premiums</span></span>
<span id="cb60-60"><a href="#cb60-60" tabindex="-1"></a>ContractC <span class="ot">=</span> ContractA<span class="sc">$</span><span class="fu">clone</span>()<span class="sc">$</span></span>
<span id="cb60-61"><a href="#cb60-61" tabindex="-1"></a>  <span class="fu">addExtension</span>(<span class="at">id =</span> <span class="st">&quot;Verlaengerung1&quot;</span>, <span class="at">contractPeriod =</span> <span class="dv">5</span>, <span class="at">sumInsured =</span> <span class="fl">10723.07973354</span>)</span>
<span id="cb60-62"><a href="#cb60-62" tabindex="-1"></a>ContractC<span class="sc">$</span>blocks<span class="sc">$</span>Verlaengerung1<span class="sc">$</span>Values<span class="sc">$</span>premiums[[<span class="st">&quot;gross&quot;</span>]]</span>
<span id="cb60-63"><a href="#cb60-63" tabindex="-1"></a><span class="co">#&gt; [1] -8.449569e-06</span></span>
<span id="cb60-64"><a href="#cb60-64" tabindex="-1"></a>ContractC<span class="sc">$</span>Values<span class="sc">$</span>basicData</span>
<span id="cb60-65"><a href="#cb60-65" tabindex="-1"></a><span class="co">#&gt;    PremiumPayment SumInsured      Premiums InterestRate PolicyDuration</span></span>
<span id="cb60-66"><a href="#cb60-66" tabindex="-1"></a><span class="co">#&gt; 0               1   10000.00  5.448277e+02        0.005             20</span></span>
<span id="cb60-67"><a href="#cb60-67" tabindex="-1"></a><span class="co">#&gt; 1               1   10000.00  5.448277e+02        0.005             20</span></span>
<span id="cb60-68"><a href="#cb60-68" tabindex="-1"></a><span class="co">#&gt; 2               1   10000.00  5.448277e+02        0.005             20</span></span>
<span id="cb60-69"><a href="#cb60-69" tabindex="-1"></a><span class="co">#&gt; 3               1   10000.00  5.448277e+02        0.005             20</span></span>
<span id="cb60-70"><a href="#cb60-70" tabindex="-1"></a><span class="co">#&gt; 4               1   10000.00  5.448277e+02        0.005             20</span></span>
<span id="cb60-71"><a href="#cb60-71" tabindex="-1"></a><span class="co">#&gt; 5               1   10000.00  5.448277e+02        0.005             20</span></span>
<span id="cb60-72"><a href="#cb60-72" tabindex="-1"></a><span class="co">#&gt; 6               1   10000.00  5.448277e+02        0.005             20</span></span>
<span id="cb60-73"><a href="#cb60-73" tabindex="-1"></a><span class="co">#&gt; 7               1   10000.00  5.448277e+02        0.005             20</span></span>
<span id="cb60-74"><a href="#cb60-74" tabindex="-1"></a><span class="co">#&gt; 8               1   10000.00  5.448277e+02        0.005             20</span></span>
<span id="cb60-75"><a href="#cb60-75" tabindex="-1"></a><span class="co">#&gt; 9               1   10000.00  5.448277e+02        0.005             20</span></span>
<span id="cb60-76"><a href="#cb60-76" tabindex="-1"></a><span class="co">#&gt; 10              1   10000.00  5.448277e+02        0.005             20</span></span>
<span id="cb60-77"><a href="#cb60-77" tabindex="-1"></a><span class="co">#&gt; 11              1   10000.00  5.448277e+02        0.005             20</span></span>
<span id="cb60-78"><a href="#cb60-78" tabindex="-1"></a><span class="co">#&gt; 12              1   10000.00  5.448277e+02        0.005             20</span></span>
<span id="cb60-79"><a href="#cb60-79" tabindex="-1"></a><span class="co">#&gt; 13              1   10000.00  5.448277e+02        0.005             20</span></span>
<span id="cb60-80"><a href="#cb60-80" tabindex="-1"></a><span class="co">#&gt; 14              1   10000.00  5.448277e+02        0.005             20</span></span>
<span id="cb60-81"><a href="#cb60-81" tabindex="-1"></a><span class="co">#&gt; 15              1   10000.00  5.448277e+02        0.005             20</span></span>
<span id="cb60-82"><a href="#cb60-82" tabindex="-1"></a><span class="co">#&gt; 16              1   10000.00  5.448277e+02        0.005             20</span></span>
<span id="cb60-83"><a href="#cb60-83" tabindex="-1"></a><span class="co">#&gt; 17              1   10000.00  5.448277e+02        0.005             20</span></span>
<span id="cb60-84"><a href="#cb60-84" tabindex="-1"></a><span class="co">#&gt; 18              1   10000.00  5.448277e+02        0.005             20</span></span>
<span id="cb60-85"><a href="#cb60-85" tabindex="-1"></a><span class="co">#&gt; 19              1   10000.00  5.448277e+02        0.005             20</span></span>
<span id="cb60-86"><a href="#cb60-86" tabindex="-1"></a><span class="co">#&gt; 20              0   20723.08 -8.449569e-06        0.005             20</span></span>
<span id="cb60-87"><a href="#cb60-87" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08 -8.449569e-06        0.005             20</span></span>
<span id="cb60-88"><a href="#cb60-88" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08 -8.449569e-06        0.005             20</span></span>
<span id="cb60-89"><a href="#cb60-89" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08 -8.449569e-06        0.005             20</span></span>
<span id="cb60-90"><a href="#cb60-90" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08 -8.449569e-06        0.005             20</span></span>
<span id="cb60-91"><a href="#cb60-91" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08 -8.449569e-06        0.005             20</span></span>
<span id="cb60-92"><a href="#cb60-92" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08 -8.449569e-06        0.005             20</span></span>
<span id="cb60-93"><a href="#cb60-93" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08 -8.449569e-06        0.005             20</span></span>
<span id="cb60-94"><a href="#cb60-94" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08 -8.449569e-06        0.005             20</span></span>
<span id="cb60-95"><a href="#cb60-95" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08 -8.449569e-06        0.005             20</span></span>
<span id="cb60-96"><a href="#cb60-96" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08 -8.449569e-06        0.005             20</span></span>
<span id="cb60-97"><a href="#cb60-97" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08 -8.449569e-06        0.005             20</span></span>
<span id="cb60-98"><a href="#cb60-98" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08 -8.449569e-06        0.005             20</span></span>
<span id="cb60-99"><a href="#cb60-99" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08 -8.449569e-06        0.005             20</span></span>
<span id="cb60-100"><a href="#cb60-100" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08 -8.449569e-06        0.005             20</span></span>
<span id="cb60-101"><a href="#cb60-101" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08 -8.449569e-06        0.005             20</span></span>
<span id="cb60-102"><a href="#cb60-102" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08 -8.449569e-06        0.005             20</span></span>
<span id="cb60-103"><a href="#cb60-103" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08 -8.449569e-06        0.005             20</span></span>
<span id="cb60-104"><a href="#cb60-104" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08 -8.449569e-06        0.005             20</span></span>
<span id="cb60-105"><a href="#cb60-105" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08 -8.449569e-06        0.005             20</span></span>
<span id="cb60-106"><a href="#cb60-106" tabindex="-1"></a><span class="co">#&gt;                 0   10723.08  0.000000e+00        0.005             20</span></span>
<span id="cb60-107"><a href="#cb60-107" tabindex="-1"></a><span class="co">#&gt;    PremiumPeriod</span></span>
<span id="cb60-108"><a href="#cb60-108" tabindex="-1"></a><span class="co">#&gt; 0             20</span></span>
<span id="cb60-109"><a href="#cb60-109" tabindex="-1"></a><span class="co">#&gt; 1             20</span></span>
<span id="cb60-110"><a href="#cb60-110" tabindex="-1"></a><span class="co">#&gt; 2             20</span></span>
<span id="cb60-111"><a href="#cb60-111" tabindex="-1"></a><span class="co">#&gt; 3             20</span></span>
<span id="cb60-112"><a href="#cb60-112" tabindex="-1"></a><span class="co">#&gt; 4             20</span></span>
<span id="cb60-113"><a href="#cb60-113" tabindex="-1"></a><span class="co">#&gt; 5             20</span></span>
<span id="cb60-114"><a href="#cb60-114" tabindex="-1"></a><span class="co">#&gt; 6             20</span></span>
<span id="cb60-115"><a href="#cb60-115" tabindex="-1"></a><span class="co">#&gt; 7             20</span></span>
<span id="cb60-116"><a href="#cb60-116" tabindex="-1"></a><span class="co">#&gt; 8             20</span></span>
<span id="cb60-117"><a href="#cb60-117" tabindex="-1"></a><span class="co">#&gt; 9             20</span></span>
<span id="cb60-118"><a href="#cb60-118" tabindex="-1"></a><span class="co">#&gt; 10            20</span></span>
<span id="cb60-119"><a href="#cb60-119" tabindex="-1"></a><span class="co">#&gt; 11            20</span></span>
<span id="cb60-120"><a href="#cb60-120" tabindex="-1"></a><span class="co">#&gt; 12            20</span></span>
<span id="cb60-121"><a href="#cb60-121" tabindex="-1"></a><span class="co">#&gt; 13            20</span></span>
<span id="cb60-122"><a href="#cb60-122" tabindex="-1"></a><span class="co">#&gt; 14            20</span></span>
<span id="cb60-123"><a href="#cb60-123" tabindex="-1"></a><span class="co">#&gt; 15            20</span></span>
<span id="cb60-124"><a href="#cb60-124" tabindex="-1"></a><span class="co">#&gt; 16            20</span></span>
<span id="cb60-125"><a href="#cb60-125" tabindex="-1"></a><span class="co">#&gt; 17            20</span></span>
<span id="cb60-126"><a href="#cb60-126" tabindex="-1"></a><span class="co">#&gt; 18            20</span></span>
<span id="cb60-127"><a href="#cb60-127" tabindex="-1"></a><span class="co">#&gt; 19            20</span></span>
<span id="cb60-128"><a href="#cb60-128" tabindex="-1"></a><span class="co">#&gt; 20            20</span></span>
<span id="cb60-129"><a href="#cb60-129" tabindex="-1"></a><span class="co">#&gt;               20</span></span>
<span id="cb60-130"><a href="#cb60-130" tabindex="-1"></a><span class="co">#&gt;               20</span></span>
<span id="cb60-131"><a href="#cb60-131" tabindex="-1"></a><span class="co">#&gt;               20</span></span>
<span id="cb60-132"><a href="#cb60-132" tabindex="-1"></a><span class="co">#&gt;               20</span></span>
<span id="cb60-133"><a href="#cb60-133" tabindex="-1"></a><span class="co">#&gt;               20</span></span>
<span id="cb60-134"><a href="#cb60-134" tabindex="-1"></a><span class="co">#&gt;               20</span></span>
<span id="cb60-135"><a href="#cb60-135" tabindex="-1"></a><span class="co">#&gt;               20</span></span>
<span id="cb60-136"><a href="#cb60-136" tabindex="-1"></a><span class="co">#&gt;               20</span></span>
<span id="cb60-137"><a href="#cb60-137" tabindex="-1"></a><span class="co">#&gt;               20</span></span>
<span id="cb60-138"><a href="#cb60-138" tabindex="-1"></a><span class="co">#&gt;               20</span></span>
<span id="cb60-139"><a href="#cb60-139" tabindex="-1"></a><span class="co">#&gt;               20</span></span>
<span id="cb60-140"><a href="#cb60-140" tabindex="-1"></a><span class="co">#&gt;               20</span></span>
<span id="cb60-141"><a href="#cb60-141" tabindex="-1"></a><span class="co">#&gt;               20</span></span>
<span id="cb60-142"><a href="#cb60-142" tabindex="-1"></a><span class="co">#&gt;               20</span></span>
<span id="cb60-143"><a href="#cb60-143" tabindex="-1"></a><span class="co">#&gt;               20</span></span>
<span id="cb60-144"><a href="#cb60-144" tabindex="-1"></a><span class="co">#&gt;               20</span></span>
<span id="cb60-145"><a href="#cb60-145" tabindex="-1"></a><span class="co">#&gt;               20</span></span>
<span id="cb60-146"><a href="#cb60-146" tabindex="-1"></a><span class="co">#&gt;               20</span></span>
<span id="cb60-147"><a href="#cb60-147" tabindex="-1"></a><span class="co">#&gt;               20</span></span>
<span id="cb60-148"><a href="#cb60-148" tabindex="-1"></a><span class="co">#&gt;               20</span></span>
<span id="cb60-149"><a href="#cb60-149" tabindex="-1"></a></span>
<span id="cb60-150"><a href="#cb60-150" tabindex="-1"></a><span class="co"># extension with increased sumInsured: real premiums are charged, reserves start from the existing reserve:</span></span>
<span id="cb60-151"><a href="#cb60-151" tabindex="-1"></a>ContractD <span class="ot">=</span> ContractA<span class="sc">$</span><span class="fu">clone</span>()<span class="sc">$</span></span>
<span id="cb60-152"><a href="#cb60-152" tabindex="-1"></a>  <span class="fu">addExtension</span>(<span class="at">id =</span> <span class="st">&quot;Verlaengerung1&quot;</span>, <span class="at">contractPeriod =</span> <span class="dv">5</span>, <span class="at">sumInsured =</span> <span class="dv">20000</span>)</span>
<span id="cb60-153"><a href="#cb60-153" tabindex="-1"></a>ContractD<span class="sc">$</span>Values<span class="sc">$</span>basicData</span>
<span id="cb60-154"><a href="#cb60-154" tabindex="-1"></a><span class="co">#&gt;    PremiumPayment SumInsured Premiums InterestRate PolicyDuration PremiumPeriod</span></span>
<span id="cb60-155"><a href="#cb60-155" tabindex="-1"></a><span class="co">#&gt; 0               1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-156"><a href="#cb60-156" tabindex="-1"></a><span class="co">#&gt; 1               1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-157"><a href="#cb60-157" tabindex="-1"></a><span class="co">#&gt; 2               1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-158"><a href="#cb60-158" tabindex="-1"></a><span class="co">#&gt; 3               1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-159"><a href="#cb60-159" tabindex="-1"></a><span class="co">#&gt; 4               1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-160"><a href="#cb60-160" tabindex="-1"></a><span class="co">#&gt; 5               1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-161"><a href="#cb60-161" tabindex="-1"></a><span class="co">#&gt; 6               1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-162"><a href="#cb60-162" tabindex="-1"></a><span class="co">#&gt; 7               1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-163"><a href="#cb60-163" tabindex="-1"></a><span class="co">#&gt; 8               1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-164"><a href="#cb60-164" tabindex="-1"></a><span class="co">#&gt; 9               1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-165"><a href="#cb60-165" tabindex="-1"></a><span class="co">#&gt; 10              1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-166"><a href="#cb60-166" tabindex="-1"></a><span class="co">#&gt; 11              1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-167"><a href="#cb60-167" tabindex="-1"></a><span class="co">#&gt; 12              1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-168"><a href="#cb60-168" tabindex="-1"></a><span class="co">#&gt; 13              1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-169"><a href="#cb60-169" tabindex="-1"></a><span class="co">#&gt; 14              1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-170"><a href="#cb60-170" tabindex="-1"></a><span class="co">#&gt; 15              1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-171"><a href="#cb60-171" tabindex="-1"></a><span class="co">#&gt; 16              1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-172"><a href="#cb60-172" tabindex="-1"></a><span class="co">#&gt; 17              1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-173"><a href="#cb60-173" tabindex="-1"></a><span class="co">#&gt; 18              1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-174"><a href="#cb60-174" tabindex="-1"></a><span class="co">#&gt; 19              1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-175"><a href="#cb60-175" tabindex="-1"></a><span class="co">#&gt; 20              1      30000 564.8817        0.005             20            20</span></span>
<span id="cb60-176"><a href="#cb60-176" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8817        0.005             20            20</span></span>
<span id="cb60-177"><a href="#cb60-177" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8817        0.005             20            20</span></span>
<span id="cb60-178"><a href="#cb60-178" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8817        0.005             20            20</span></span>
<span id="cb60-179"><a href="#cb60-179" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8817        0.005             20            20</span></span>
<span id="cb60-180"><a href="#cb60-180" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8817        0.005             20            20</span></span>
<span id="cb60-181"><a href="#cb60-181" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8817        0.005             20            20</span></span>
<span id="cb60-182"><a href="#cb60-182" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8817        0.005             20            20</span></span>
<span id="cb60-183"><a href="#cb60-183" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8817        0.005             20            20</span></span>
<span id="cb60-184"><a href="#cb60-184" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8817        0.005             20            20</span></span>
<span id="cb60-185"><a href="#cb60-185" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8817        0.005             20            20</span></span>
<span id="cb60-186"><a href="#cb60-186" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8817        0.005             20            20</span></span>
<span id="cb60-187"><a href="#cb60-187" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8817        0.005             20            20</span></span>
<span id="cb60-188"><a href="#cb60-188" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8817        0.005             20            20</span></span>
<span id="cb60-189"><a href="#cb60-189" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8817        0.005             20            20</span></span>
<span id="cb60-190"><a href="#cb60-190" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8817        0.005             20            20</span></span>
<span id="cb60-191"><a href="#cb60-191" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8817        0.005             20            20</span></span>
<span id="cb60-192"><a href="#cb60-192" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8817        0.005             20            20</span></span>
<span id="cb60-193"><a href="#cb60-193" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8817        0.005             20            20</span></span>
<span id="cb60-194"><a href="#cb60-194" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8817        0.005             20            20</span></span>
<span id="cb60-195"><a href="#cb60-195" tabindex="-1"></a><span class="co">#&gt;                 0      20000   0.0000        0.005             20            20</span></span>
<span id="cb60-196"><a href="#cb60-196" tabindex="-1"></a></span>
<span id="cb60-197"><a href="#cb60-197" tabindex="-1"></a><span class="co"># extension with regular premiums, which are given: sumInsured is calculated from it, reserves start from the existing reserve:</span></span>
<span id="cb60-198"><a href="#cb60-198" tabindex="-1"></a>ContractD <span class="ot">=</span> ContractA<span class="sc">$</span><span class="fu">clone</span>()<span class="sc">$</span></span>
<span id="cb60-199"><a href="#cb60-199" tabindex="-1"></a>  <span class="fu">addExtension</span>(<span class="at">id =</span> <span class="st">&quot;Verlaengerung1&quot;</span>, <span class="at">contractPeriod =</span> <span class="dv">5</span>, <span class="at">premium =</span> <span class="fl">597.8771</span>)</span>
<span id="cb60-200"><a href="#cb60-200" tabindex="-1"></a>ContractD<span class="sc">$</span>Values<span class="sc">$</span>basicData</span>
<span id="cb60-201"><a href="#cb60-201" tabindex="-1"></a><span class="co">#&gt;    PremiumPayment SumInsured Premiums InterestRate PolicyDuration PremiumPeriod</span></span>
<span id="cb60-202"><a href="#cb60-202" tabindex="-1"></a><span class="co">#&gt; 0               1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-203"><a href="#cb60-203" tabindex="-1"></a><span class="co">#&gt; 1               1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-204"><a href="#cb60-204" tabindex="-1"></a><span class="co">#&gt; 2               1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-205"><a href="#cb60-205" tabindex="-1"></a><span class="co">#&gt; 3               1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-206"><a href="#cb60-206" tabindex="-1"></a><span class="co">#&gt; 4               1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-207"><a href="#cb60-207" tabindex="-1"></a><span class="co">#&gt; 5               1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-208"><a href="#cb60-208" tabindex="-1"></a><span class="co">#&gt; 6               1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-209"><a href="#cb60-209" tabindex="-1"></a><span class="co">#&gt; 7               1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-210"><a href="#cb60-210" tabindex="-1"></a><span class="co">#&gt; 8               1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-211"><a href="#cb60-211" tabindex="-1"></a><span class="co">#&gt; 9               1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-212"><a href="#cb60-212" tabindex="-1"></a><span class="co">#&gt; 10              1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-213"><a href="#cb60-213" tabindex="-1"></a><span class="co">#&gt; 11              1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-214"><a href="#cb60-214" tabindex="-1"></a><span class="co">#&gt; 12              1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-215"><a href="#cb60-215" tabindex="-1"></a><span class="co">#&gt; 13              1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-216"><a href="#cb60-216" tabindex="-1"></a><span class="co">#&gt; 14              1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-217"><a href="#cb60-217" tabindex="-1"></a><span class="co">#&gt; 15              1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-218"><a href="#cb60-218" tabindex="-1"></a><span class="co">#&gt; 16              1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-219"><a href="#cb60-219" tabindex="-1"></a><span class="co">#&gt; 17              1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-220"><a href="#cb60-220" tabindex="-1"></a><span class="co">#&gt; 18              1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-221"><a href="#cb60-221" tabindex="-1"></a><span class="co">#&gt; 19              1      10000 544.8277        0.005             20            20</span></span>
<span id="cb60-222"><a href="#cb60-222" tabindex="-1"></a><span class="co">#&gt; 20              1      30000 564.8818        0.005             20            20</span></span>
<span id="cb60-223"><a href="#cb60-223" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8818        0.005             20            20</span></span>
<span id="cb60-224"><a href="#cb60-224" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8818        0.005             20            20</span></span>
<span id="cb60-225"><a href="#cb60-225" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8818        0.005             20            20</span></span>
<span id="cb60-226"><a href="#cb60-226" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8818        0.005             20            20</span></span>
<span id="cb60-227"><a href="#cb60-227" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8818        0.005             20            20</span></span>
<span id="cb60-228"><a href="#cb60-228" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8818        0.005             20            20</span></span>
<span id="cb60-229"><a href="#cb60-229" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8818        0.005             20            20</span></span>
<span id="cb60-230"><a href="#cb60-230" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8818        0.005             20            20</span></span>
<span id="cb60-231"><a href="#cb60-231" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8818        0.005             20            20</span></span>
<span id="cb60-232"><a href="#cb60-232" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8818        0.005             20            20</span></span>
<span id="cb60-233"><a href="#cb60-233" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8818        0.005             20            20</span></span>
<span id="cb60-234"><a href="#cb60-234" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8818        0.005             20            20</span></span>
<span id="cb60-235"><a href="#cb60-235" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8818        0.005             20            20</span></span>
<span id="cb60-236"><a href="#cb60-236" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8818        0.005             20            20</span></span>
<span id="cb60-237"><a href="#cb60-237" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8818        0.005             20            20</span></span>
<span id="cb60-238"><a href="#cb60-238" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8818        0.005             20            20</span></span>
<span id="cb60-239"><a href="#cb60-239" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8818        0.005             20            20</span></span>
<span id="cb60-240"><a href="#cb60-240" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8818        0.005             20            20</span></span>
<span id="cb60-241"><a href="#cb60-241" tabindex="-1"></a><span class="co">#&gt;                 1      20000 564.8818        0.005             20            20</span></span>
<span id="cb60-242"><a href="#cb60-242" tabindex="-1"></a><span class="co">#&gt;                 0      20000   0.0000        0.005             20            20</span></span></code></pre></div>
</div>
</div>
<div id="handling-contracts-with-increases" class="section level1" number="12">
<h1><span class="header-section-number">12</span> Handling contracts
with increases</h1>
<p>While many insurance contracts have a fixed sum insured and constant
premium, many contracts include some kind of adjustment to account for
inflation. There are various ways to achieve such an adjustment:</p>
<ul>
<li>The initial contract already includes a planned increase in the
benefits by a pre-determined factor <span class="math inline">\((1+s)\)</span> each year, premiums are constant
over the whole duration.</li>
<li>The initial contract has fixed sum insured, but the premiums
increase by a factor <span class="math inline">\((1+s)\)</span> each
year due to salary increases.</li>
<li>“Dynamic increases”: The initial contract has fixed sum insured with
fixed regular premiums. However, every year (or triggered based on an
inflation or consumer price index) the sum insured is increased by a
certain amount (either fixed or by the same percentage as the index) and
the premiums are increased accordingly. Internally, this is represented
by a second, shorter contract covering only the increase in sumInsured,
from which the additional premium can be calculated according to the
tariff.</li>
</ul>
<p>The LifeInsuranceContract package provides functionality for each of
these increases. All three increases can in theory be combined in the
same contract, although in practice this usually does not happen and at
most one kind of increase is included in a contract</p>
<div id="fixed-yearly-premium-increases" class="section level2" number="12.1">
<h2><span class="header-section-number">12.1</span> Fixed yearly premium
increases</h2>
<p>With this kind of increases, the initial contract valuation (i.e. the
determination of the premium at contract inception) already takes into
account that the premium will not stay constant over the whole period,
but increases by a constant factor each year. The sum insured is
calculated by the equivalence principle so that the expected present
value of all future benefits and costs equals the expected present value
of all future (i.e.  increasing) premium payments.</p>
<p>This type of yearly premium increase by a fixed factor can be
implemented by the parameter:</p>
<ul>
<li><code>premiumIncrease</code> … The factor, by which the premium
increases yearly. Default is 1.0 (no increase in premium).</li>
</ul>
<p>In the following example, we create a 10-year endowment contract with
constant premiums over the whole period and another one with idential
parameters except that the premium increases by 4% each year:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" tabindex="-1"></a><span class="co"># For comparison: Contract with constant premiums</span></span>
<span id="cb61-2"><a href="#cb61-2" tabindex="-1"></a>contract.Endow.Constant <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb61-3"><a href="#cb61-3" tabindex="-1"></a>  <span class="at">tarif =</span> Tarif.Endowment,</span>
<span id="cb61-4"><a href="#cb61-4" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">10000</span>,</span>
<span id="cb61-5"><a href="#cb61-5" tabindex="-1"></a>  <span class="at">age =</span> <span class="dv">50</span>, <span class="at">policyPeriod =</span> <span class="dv">10</span>,</span>
<span id="cb61-6"><a href="#cb61-6" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-09-01&quot;</span>)</span>
<span id="cb61-7"><a href="#cb61-7" tabindex="-1"></a>)</span>
<span id="cb61-8"><a href="#cb61-8" tabindex="-1"></a><span class="co"># Contract with 4% yearly premium increase and same sum insured</span></span>
<span id="cb61-9"><a href="#cb61-9" tabindex="-1"></a>contract.Endow.PremInc <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb61-10"><a href="#cb61-10" tabindex="-1"></a>  <span class="at">tarif =</span> Tarif.Endowment,</span>
<span id="cb61-11"><a href="#cb61-11" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">10000</span>,</span>
<span id="cb61-12"><a href="#cb61-12" tabindex="-1"></a>  <span class="at">premiumIncrease =</span> <span class="fl">1.04</span>,</span>
<span id="cb61-13"><a href="#cb61-13" tabindex="-1"></a>  <span class="at">age =</span> <span class="dv">50</span>, <span class="at">policyPeriod =</span> <span class="dv">10</span>,</span>
<span id="cb61-14"><a href="#cb61-14" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-09-01&quot;</span>)</span>
<span id="cb61-15"><a href="#cb61-15" tabindex="-1"></a>)</span>
<span id="cb61-16"><a href="#cb61-16" tabindex="-1"></a>premium.comparison <span class="ot">=</span> <span class="fu">data.frame</span>(</span>
<span id="cb61-17"><a href="#cb61-17" tabindex="-1"></a>  <span class="st">`</span><span class="at">Sum Insured</span><span class="st">`</span> <span class="ot">=</span> contract.Endow.Constant<span class="sc">$</span>Values<span class="sc">$</span>basicData[,<span class="st">&quot;SumInsured&quot;</span>],</span>
<span id="cb61-18"><a href="#cb61-18" tabindex="-1"></a>  <span class="st">`</span><span class="at">Constant Premium</span><span class="st">`</span> <span class="ot">=</span> contract.Endow.Constant<span class="sc">$</span>Values<span class="sc">$</span>basicData[,<span class="st">&quot;Premiums&quot;</span>],</span>
<span id="cb61-19"><a href="#cb61-19" tabindex="-1"></a>  <span class="st">`</span><span class="at">4% Yearly Increase</span><span class="st">`</span> <span class="ot">=</span> contract.Endow.PremInc<span class="sc">$</span>Values<span class="sc">$</span>basicData[,<span class="st">&quot;Premiums&quot;</span>],</span>
<span id="cb61-20"><a href="#cb61-20" tabindex="-1"></a>  <span class="at">check.names =</span> F</span>
<span id="cb61-21"><a href="#cb61-21" tabindex="-1"></a>  )</span></code></pre></div>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" tabindex="-1"></a>premium.comparison <span class="sc">%&gt;%</span> pander</span></code></pre></div>
<table style="width:88%;">
<colgroup>
<col width="12%" />
<col width="19%" />
<col width="26%" />
<col width="29%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">Sum Insured</th>
<th align="center">Constant Premium</th>
<th align="center">4% Yearly Increase</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">10000</td>
<td align="center">1101</td>
<td align="center">911.66</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">10000</td>
<td align="center">1101</td>
<td align="center">948.13</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">10000</td>
<td align="center">1101</td>
<td align="center">986.05</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">10000</td>
<td align="center">1101</td>
<td align="center">1025.50</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">10000</td>
<td align="center">1101</td>
<td align="center">1066.52</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">10000</td>
<td align="center">1101</td>
<td align="center">1109.18</td>
</tr>
<tr class="odd">
<td align="center"><strong>6</strong></td>
<td align="center">10000</td>
<td align="center">1101</td>
<td align="center">1153.54</td>
</tr>
<tr class="even">
<td align="center"><strong>7</strong></td>
<td align="center">10000</td>
<td align="center">1101</td>
<td align="center">1199.69</td>
</tr>
<tr class="odd">
<td align="center"><strong>8</strong></td>
<td align="center">10000</td>
<td align="center">1101</td>
<td align="center">1247.67</td>
</tr>
<tr class="even">
<td align="center"><strong>9</strong></td>
<td align="center">10000</td>
<td align="center">1101</td>
<td align="center">1297.58</td>
</tr>
<tr class="odd">
<td align="center"><strong>10</strong></td>
<td align="center">10000</td>
<td align="center">0</td>
<td align="center">0.00</td>
</tr>
</tbody>
</table>
</div>
<div id="fixed-yearly-benefit-increases-with-constant-premium" class="section level2" number="12.2">
<h2><span class="header-section-number">12.2</span> Fixed yearly benefit
increases with constant premium</h2>
<p>With this kind of increases, the premium will stay constant over the
whole contract maturity, but the death and/or survival benefit (or the
annuity payment) will increase by a fixed factor each year. This is
typically to safeguard the benefit against inflation, so that the value
of the annuity payment or death benefit does not diminish due to
inflation. The initial contract valuation (i.e. the determination of the
constant premium at contract inception) already takes into account that
the benefits will not stay constant over the whole period, but increases
by a constant factor each year.</p>
<p>This type of yearly benefit increase by a fixed factor can be
implemented by the parameters:</p>
<ul>
<li><code>annuityIncrease</code> … The factor, by which potential
annuity payments increase yearly. Default is 1.0 (no increase in annuity
benefits)</li>
<li><code>deathBenefit</code> … The vector of death benefits (relative
to the sum insured, which for endowments describes the survival
benefit)</li>
</ul>
<p>In the following example, we create a 10-year endowment contract with
constant premiums over the whole period and another one with idential
parameters except that the premium increases by 4% each year:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" tabindex="-1"></a><span class="co"># For comparison: Contract with constant premiums</span></span>
<span id="cb63-2"><a href="#cb63-2" tabindex="-1"></a>contract.TermLife.Constant <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb63-3"><a href="#cb63-3" tabindex="-1"></a>  <span class="at">tarif =</span> Tarif.Life,</span>
<span id="cb63-4"><a href="#cb63-4" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">10000</span>,</span>
<span id="cb63-5"><a href="#cb63-5" tabindex="-1"></a>  <span class="at">age =</span> <span class="dv">50</span>, <span class="at">policyPeriod =</span> <span class="dv">10</span>,</span>
<span id="cb63-6"><a href="#cb63-6" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-09-01&quot;</span>)</span>
<span id="cb63-7"><a href="#cb63-7" tabindex="-1"></a>)</span>
<span id="cb63-8"><a href="#cb63-8" tabindex="-1"></a><span class="co"># Contract with 4% yearly increase in sum insured (final survival benefit is 10.000)</span></span>
<span id="cb63-9"><a href="#cb63-9" tabindex="-1"></a>contract.TermLife.SumInc <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb63-10"><a href="#cb63-10" tabindex="-1"></a>  <span class="at">tarif =</span> Tarif.Life,</span>
<span id="cb63-11"><a href="#cb63-11" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">10000</span>,</span>
<span id="cb63-12"><a href="#cb63-12" tabindex="-1"></a>  <span class="at">deathBenefit =</span> (<span class="fl">1.04</span>)<span class="sc">^</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">20</span>),</span>
<span id="cb63-13"><a href="#cb63-13" tabindex="-1"></a>  <span class="at">age =</span> <span class="dv">50</span>, <span class="at">policyPeriod =</span> <span class="dv">10</span>,</span>
<span id="cb63-14"><a href="#cb63-14" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-09-01&quot;</span>)</span>
<span id="cb63-15"><a href="#cb63-15" tabindex="-1"></a>)</span>
<span id="cb63-16"><a href="#cb63-16" tabindex="-1"></a>premium.comparison <span class="ot">=</span> <span class="fu">data.frame</span>(</span>
<span id="cb63-17"><a href="#cb63-17" tabindex="-1"></a>  <span class="st">`</span><span class="at">Const S.I.</span><span class="st">`</span> <span class="ot">=</span> contract.TermLife.Constant<span class="sc">$</span>Values<span class="sc">$</span>absCashFlows[,<span class="st">&quot;death&quot;</span>],</span>
<span id="cb63-18"><a href="#cb63-18" tabindex="-1"></a>  <span class="st">`</span><span class="at">Const. Premium</span><span class="st">`</span> <span class="ot">=</span> contract.TermLife.Constant<span class="sc">$</span>Values<span class="sc">$</span>absCashFlows[,<span class="st">&quot;premiums_advance&quot;</span>],</span>
<span id="cb63-19"><a href="#cb63-19" tabindex="-1"></a>  <span class="st">`</span><span class="at">4% sum increase</span><span class="st">`</span> <span class="ot">=</span> contract.TermLife.SumInc<span class="sc">$</span>Values<span class="sc">$</span>absCashFlows[,<span class="st">&quot;death&quot;</span>],</span>
<span id="cb63-20"><a href="#cb63-20" tabindex="-1"></a>  <span class="st">`</span><span class="at">Premium w. sum increase</span><span class="st">`</span> <span class="ot">=</span> contract.TermLife.SumInc<span class="sc">$</span>Values<span class="sc">$</span>absCashFlows[,<span class="st">&quot;premiums_advance&quot;</span>],</span>
<span id="cb63-21"><a href="#cb63-21" tabindex="-1"></a>  <span class="at">check.names =</span> F</span>
<span id="cb63-22"><a href="#cb63-22" tabindex="-1"></a>  )</span>
<span id="cb63-23"><a href="#cb63-23" tabindex="-1"></a>premium.comparison</span></code></pre></div>
<table>
<colgroup>
<col width="17%" />
<col width="22%" />
<col width="24%" />
<col width="35%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Const S.I.</th>
<th align="center">Const. Premium</th>
<th align="center">4% sum increase</th>
<th align="center">Premium w. sum increase</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">10000</td>
<td align="center">61</td>
<td align="center">10000.00</td>
<td align="center">72.74</td>
</tr>
<tr class="even">
<td align="center">10000</td>
<td align="center">61</td>
<td align="center">10400.00</td>
<td align="center">72.74</td>
</tr>
<tr class="odd">
<td align="center">10000</td>
<td align="center">61</td>
<td align="center">10816.00</td>
<td align="center">72.74</td>
</tr>
<tr class="even">
<td align="center">10000</td>
<td align="center">61</td>
<td align="center">11248.64</td>
<td align="center">72.74</td>
</tr>
<tr class="odd">
<td align="center">10000</td>
<td align="center">61</td>
<td align="center">11698.59</td>
<td align="center">72.74</td>
</tr>
<tr class="even">
<td align="center">10000</td>
<td align="center">61</td>
<td align="center">12166.53</td>
<td align="center">72.74</td>
</tr>
<tr class="odd">
<td align="center">10000</td>
<td align="center">61</td>
<td align="center">12653.19</td>
<td align="center">72.74</td>
</tr>
<tr class="even">
<td align="center">10000</td>
<td align="center">61</td>
<td align="center">13159.32</td>
<td align="center">72.74</td>
</tr>
<tr class="odd">
<td align="center">10000</td>
<td align="center">61</td>
<td align="center">13685.69</td>
<td align="center">72.74</td>
</tr>
<tr class="even">
<td align="center">10000</td>
<td align="center">61</td>
<td align="center">14233.12</td>
<td align="center">72.74</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
</tbody>
</table>
<p>For annuities, the benefit increase is not handled through
<code>deathBenefits</code>, but rather through the parameter</p>
<ul>
<li><code>annuityIncrease</code> … yearly increase factor of the annuity
payments</li>
</ul>
<p>In the following example, we create a 10-year endowment contract with
constant premiums over the whole period and another one with idential
parameters except that the premium increases by 4% each year:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" tabindex="-1"></a><span class="co"># For comparison: Contract with constant annuity</span></span>
<span id="cb64-2"><a href="#cb64-2" tabindex="-1"></a>contract.Annuity.Constant <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb64-3"><a href="#cb64-3" tabindex="-1"></a>  <span class="at">tarif =</span> Tarif.DefAnnuity,</span>
<span id="cb64-4"><a href="#cb64-4" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">1200</span>,</span>
<span id="cb64-5"><a href="#cb64-5" tabindex="-1"></a>  <span class="at">age =</span> <span class="dv">55</span>, </span>
<span id="cb64-6"><a href="#cb64-6" tabindex="-1"></a>  <span class="at">policyPeriod =</span> <span class="dv">10</span>,</span>
<span id="cb64-7"><a href="#cb64-7" tabindex="-1"></a>  <span class="at">deferralPeriod =</span> <span class="dv">5</span>,</span>
<span id="cb64-8"><a href="#cb64-8" tabindex="-1"></a>  <span class="at">premiumPeriod =</span> <span class="dv">5</span>,</span>
<span id="cb64-9"><a href="#cb64-9" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-09-01&quot;</span>)</span>
<span id="cb64-10"><a href="#cb64-10" tabindex="-1"></a>)</span>
<span id="cb64-11"><a href="#cb64-11" tabindex="-1"></a><span class="co"># Contract with 4% yearly increase in annuity benefits</span></span>
<span id="cb64-12"><a href="#cb64-12" tabindex="-1"></a>contract.Annuity.Increasing <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb64-13"><a href="#cb64-13" tabindex="-1"></a>  <span class="at">tarif =</span> Tarif.DefAnnuity,</span>
<span id="cb64-14"><a href="#cb64-14" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">1200</span>,</span>
<span id="cb64-15"><a href="#cb64-15" tabindex="-1"></a>  <span class="at">annuityIncrease =</span> <span class="fl">1.04</span>,</span>
<span id="cb64-16"><a href="#cb64-16" tabindex="-1"></a>  <span class="at">age =</span> <span class="dv">55</span>, </span>
<span id="cb64-17"><a href="#cb64-17" tabindex="-1"></a>  <span class="at">policyPeriod =</span> <span class="dv">10</span>,</span>
<span id="cb64-18"><a href="#cb64-18" tabindex="-1"></a>  <span class="at">deferralPeriod =</span> <span class="dv">5</span>,</span>
<span id="cb64-19"><a href="#cb64-19" tabindex="-1"></a>  <span class="at">premiumPeriod =</span> <span class="dv">5</span>,</span>
<span id="cb64-20"><a href="#cb64-20" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-09-01&quot;</span>)</span>
<span id="cb64-21"><a href="#cb64-21" tabindex="-1"></a>)</span>
<span id="cb64-22"><a href="#cb64-22" tabindex="-1"></a><span class="co"># Contract with 4% yearly increase in premiums and in annuity payments</span></span>
<span id="cb64-23"><a href="#cb64-23" tabindex="-1"></a>contract.Annuity.IncreasingBoth <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb64-24"><a href="#cb64-24" tabindex="-1"></a>  <span class="at">tarif =</span> Tarif.DefAnnuity,</span>
<span id="cb64-25"><a href="#cb64-25" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">1200</span>,</span>
<span id="cb64-26"><a href="#cb64-26" tabindex="-1"></a>  <span class="at">annuityIncrease =</span> <span class="fl">1.04</span>,</span>
<span id="cb64-27"><a href="#cb64-27" tabindex="-1"></a>  <span class="at">premiumIncrease =</span> <span class="fl">1.04</span>,</span>
<span id="cb64-28"><a href="#cb64-28" tabindex="-1"></a>  <span class="at">age =</span> <span class="dv">55</span>, </span>
<span id="cb64-29"><a href="#cb64-29" tabindex="-1"></a>  <span class="at">policyPeriod =</span> <span class="dv">10</span>,</span>
<span id="cb64-30"><a href="#cb64-30" tabindex="-1"></a>  <span class="at">deferralPeriod =</span> <span class="dv">5</span>,</span>
<span id="cb64-31"><a href="#cb64-31" tabindex="-1"></a>  <span class="at">premiumPeriod =</span> <span class="dv">5</span>,</span>
<span id="cb64-32"><a href="#cb64-32" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-09-01&quot;</span>)</span>
<span id="cb64-33"><a href="#cb64-33" tabindex="-1"></a>)</span>
<span id="cb64-34"><a href="#cb64-34" tabindex="-1"></a>premium.comparison <span class="ot">=</span> <span class="fu">data.frame</span>(</span>
<span id="cb64-35"><a href="#cb64-35" tabindex="-1"></a>  <span class="st">`</span><span class="at">Const. Annuity</span><span class="st">`</span> <span class="ot">=</span> contract.Annuity.Constant<span class="sc">$</span>Values<span class="sc">$</span>absCashFlows[,<span class="st">&quot;survival_advance&quot;</span>],</span>
<span id="cb64-36"><a href="#cb64-36" tabindex="-1"></a>  <span class="st">`</span><span class="at">Const. Premium</span><span class="st">`</span> <span class="ot">=</span> contract.Annuity.Constant<span class="sc">$</span>Values<span class="sc">$</span>absCashFlows[,<span class="st">&quot;premiums_advance&quot;</span>],</span>
<span id="cb64-37"><a href="#cb64-37" tabindex="-1"></a>  <span class="st">`</span><span class="at">4% Annuity Increase</span><span class="st">`</span> <span class="ot">=</span> contract.Annuity.Increasing<span class="sc">$</span>Values<span class="sc">$</span>absCashFlows[,<span class="st">&quot;survival_advance&quot;</span>],</span>
<span id="cb64-38"><a href="#cb64-38" tabindex="-1"></a>  <span class="st">`</span><span class="at">Premium w. Ann.Increase</span><span class="st">`</span> <span class="ot">=</span> contract.Annuity.Increasing<span class="sc">$</span>Values<span class="sc">$</span>absCashFlows[,<span class="st">&quot;premiums_advance&quot;</span>],</span>
<span id="cb64-39"><a href="#cb64-39" tabindex="-1"></a>  <span class="st">`</span><span class="at">Inc.Premium w. Ann.Increase</span><span class="st">`</span> <span class="ot">=</span> contract.Annuity.IncreasingBoth<span class="sc">$</span>Values<span class="sc">$</span>absCashFlows[,<span class="st">&quot;premiums_advance&quot;</span>],</span>
<span id="cb64-40"><a href="#cb64-40" tabindex="-1"></a>  <span class="at">check.names =</span> F</span>
<span id="cb64-41"><a href="#cb64-41" tabindex="-1"></a>  )</span></code></pre></div>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" tabindex="-1"></a>premium.comparison <span class="sc">%&gt;%</span> pander</span></code></pre></div>
<table>
<colgroup>
<col width="15%" />
<col width="15%" />
<col width="19%" />
<col width="23%" />
<col width="26%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Const. Annuity</th>
<th align="center">Const. Premium</th>
<th align="center">4% Annuity Increase</th>
<th align="center">Premium w. Ann.Increase</th>
<th align="center">Inc.Premium w. Ann.Increase</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">1277.47</td>
<td align="center">0.00</td>
<td align="center">1382.86</td>
<td align="center">1271.94</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">1277.47</td>
<td align="center">0.00</td>
<td align="center">1382.86</td>
<td align="center">1322.81</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">1277.47</td>
<td align="center">0.00</td>
<td align="center">1382.86</td>
<td align="center">1375.73</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">1277.47</td>
<td align="center">0.00</td>
<td align="center">1382.86</td>
<td align="center">1430.75</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">1277.47</td>
<td align="center">0.00</td>
<td align="center">1382.86</td>
<td align="center">1487.98</td>
</tr>
<tr class="even">
<td align="center">1200</td>
<td align="center">0.00</td>
<td align="center">1200.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
<tr class="odd">
<td align="center">1200</td>
<td align="center">0.00</td>
<td align="center">1248.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
<tr class="even">
<td align="center">1200</td>
<td align="center">0.00</td>
<td align="center">1297.92</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
<tr class="odd">
<td align="center">1200</td>
<td align="center">0.00</td>
<td align="center">1349.84</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
<tr class="even">
<td align="center">1200</td>
<td align="center">0.00</td>
<td align="center">1403.83</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
</tbody>
</table>
</div>
<div id="dynamic-increases-1" class="section level2" number="12.3">
<h2><span class="header-section-number">12.3</span> Dynamic
Increases</h2>
<p>With dynamic increases, the contract initially is written with a
fixed sum insured and constant premiums over the whole contract period.
The future increases are not considered at all.</p>
<p>After the initial contract inception, either yearly or when a
consumer price index changes by a value larger than a given threshold,
the sum insured is increased (either by a fixed amount or by an amount
determined by the index change) and the premium is adjusted accordingly.
Internally, the original contract is left untouched and the increase is
modelled by a separate contract with the same key parameters, only with
shorter duration and a sum insured that represents only the increase.
The premium for this increase is calculated like a separate contract
with only the difference in the over-all sum insured as its sum
insured.</p>
<p>Each dynamic increase then adds another separate tiny
InsuranceContract object and the over-all values are the sums of all
those contract blocks (sometimes also called “contract slices”).</p>
<p>The <code>InsuranceContract</code> class provides a method to add a
dynamic increase:</p>
<ul>
<li><code>InsuranceContract$addDynamics(t, NewSumInsured, SumInsuredDelta, id, ...)</code></li>
</ul>
<p>Only one of <code>NewSumInsured</code> (new total sum insured) and
<code>SumInsuredDelta</code> (only the difference between old and new
sum insured) is needed. This method adds a new contract block to the
given InsuranceContract, starting at time <span class="math inline">\(t\)</span> with <code>SumInsuredDelta</code> as
its sum insured and its premium calculated from the shorter contract
period and the sum insured delta. These blocks for dynamic increases are
stored in the contract’s <code>$blocks</code> list of children. The
values stored in the contract are then simply the sum of all its
children.</p>
<p>Here is an example of a 10-year endowment, which has dynamic
increases at times <span class="math inline">\(t=5\)</span>, <span class="math inline">\(t=7\)</span> and <span class="math inline">\(t=8\)</span>:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" tabindex="-1"></a><span class="co"># For comparison: Contract with constant annuity</span></span>
<span id="cb66-2"><a href="#cb66-2" tabindex="-1"></a>contract.Endowment.Dynamics <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb66-3"><a href="#cb66-3" tabindex="-1"></a>  <span class="at">tarif =</span> Tarif.Endowment,</span>
<span id="cb66-4"><a href="#cb66-4" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">10000</span>,</span>
<span id="cb66-5"><a href="#cb66-5" tabindex="-1"></a>  <span class="at">age =</span> <span class="dv">40</span>, </span>
<span id="cb66-6"><a href="#cb66-6" tabindex="-1"></a>  <span class="at">policyPeriod =</span> <span class="dv">10</span>,</span>
<span id="cb66-7"><a href="#cb66-7" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-09-01&quot;</span>),</span>
<span id="cb66-8"><a href="#cb66-8" tabindex="-1"></a>  <span class="at">id =</span> <span class="st">&quot;Initial contract&quot;</span></span>
<span id="cb66-9"><a href="#cb66-9" tabindex="-1"></a>)<span class="sc">$</span></span>
<span id="cb66-10"><a href="#cb66-10" tabindex="-1"></a>  <span class="fu">addDynamics</span>(<span class="at">t =</span> <span class="dv">5</span>, <span class="at">NewSumInsured =</span> <span class="dv">11000</span>, <span class="at">id =</span> <span class="st">&quot;Dynamic at 5&quot;</span>)<span class="sc">$</span></span>
<span id="cb66-11"><a href="#cb66-11" tabindex="-1"></a>  <span class="fu">addDynamics</span>(<span class="at">t =</span> <span class="dv">7</span>, <span class="at">NewSumInsured =</span> <span class="dv">12000</span>, <span class="at">id =</span> <span class="st">&quot;Dynamic at 7&quot;</span>)<span class="sc">$</span></span>
<span id="cb66-12"><a href="#cb66-12" tabindex="-1"></a>  <span class="fu">addDynamics</span>(<span class="at">t =</span> <span class="dv">8</span>, <span class="at">NewSumInsured =</span> <span class="dv">13500</span>, <span class="at">id =</span> <span class="st">&quot;Dynamic at 8&quot;</span>)</span>
<span id="cb66-13"><a href="#cb66-13" tabindex="-1"></a></span>
<span id="cb66-14"><a href="#cb66-14" tabindex="-1"></a><span class="co"># Over-all contract sum insured and premiums for all blocks combined</span></span>
<span id="cb66-15"><a href="#cb66-15" tabindex="-1"></a>contract.Endowment.Dynamics<span class="sc">$</span>Values<span class="sc">$</span>basicData[,<span class="fu">c</span>(<span class="st">&quot;SumInsured&quot;</span>, <span class="st">&quot;Premiums&quot;</span>)] <span class="sc">%&gt;%</span> pander</span></code></pre></div>
<table style="width:49%;">
<colgroup>
<col width="12%" />
<col width="18%" />
<col width="18%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">SumInsured</th>
<th align="center">Premiums</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">10000</td>
<td align="center">1087.88</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">10000</td>
<td align="center">1087.88</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">10000</td>
<td align="center">1087.88</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">10000</td>
<td align="center">1087.88</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">10000</td>
<td align="center">1087.88</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">11000</td>
<td align="center">1306.43</td>
</tr>
<tr class="odd">
<td align="center"><strong>6</strong></td>
<td align="center">11000</td>
<td align="center">1306.43</td>
</tr>
<tr class="even">
<td align="center"><strong>7</strong></td>
<td align="center">12000</td>
<td align="center">1671.09</td>
</tr>
<tr class="odd">
<td align="center"><strong>8</strong></td>
<td align="center">13500</td>
<td align="center">2491.84</td>
</tr>
<tr class="even">
<td align="center"><strong>9</strong></td>
<td align="center">13500</td>
<td align="center">2491.84</td>
</tr>
<tr class="odd">
<td align="center"><strong>10</strong></td>
<td align="center">13500</td>
<td align="center">0.00</td>
</tr>
</tbody>
</table>
<table style="width:100%;">
<caption>Sum Insured for the over-all contract and each of the
blocks</caption>
<colgroup>
<col width="5%" />
<col width="22%" />
<col width="21%" />
<col width="16%" />
<col width="16%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">t</th>
<th align="center">Over-all contract</th>
<th align="center">Initial contract</th>
<th align="center">Dynamic at 5</th>
<th align="center">Dynamic at 7</th>
<th align="center">Dynamic at 8</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">10000</td>
<td align="center">10000</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">10000</td>
<td align="center">10000</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="center">10000</td>
<td align="center">10000</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">3</td>
<td align="center">10000</td>
<td align="center">10000</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">4</td>
<td align="center">10000</td>
<td align="center">10000</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">5</td>
<td align="center">11000</td>
<td align="center">10000</td>
<td align="center">1000</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">6</td>
<td align="center">11000</td>
<td align="center">10000</td>
<td align="center">1000</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">7</td>
<td align="center">12000</td>
<td align="center">10000</td>
<td align="center">1000</td>
<td align="center">1000</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">8</td>
<td align="center">13500</td>
<td align="center">10000</td>
<td align="center">1000</td>
<td align="center">1000</td>
<td align="center">1500</td>
</tr>
<tr class="even">
<td align="center">9</td>
<td align="center">13500</td>
<td align="center">10000</td>
<td align="center">1000</td>
<td align="center">1000</td>
<td align="center">1500</td>
</tr>
<tr class="odd">
<td align="center">10</td>
<td align="center">13500</td>
<td align="center">10000</td>
<td align="center">1000</td>
<td align="center">1000</td>
<td align="center">1500</td>
</tr>
</tbody>
</table>
<table style="width:100%;">
<caption>Premium time series for the over-all contract and each of the
blocks</caption>
<colgroup>
<col width="5%" />
<col width="22%" />
<col width="21%" />
<col width="16%" />
<col width="16%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">t</th>
<th align="center">Over-all contract</th>
<th align="center">Initial contract</th>
<th align="center">Dynamic at 5</th>
<th align="center">Dynamic at 7</th>
<th align="center">Dynamic at 8</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">1087.88</td>
<td align="center">1087.88</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">1087.88</td>
<td align="center">1087.88</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="center">1087.88</td>
<td align="center">1087.88</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
<tr class="even">
<td align="center">3</td>
<td align="center">1087.88</td>
<td align="center">1087.88</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
<tr class="odd">
<td align="center">4</td>
<td align="center">1087.88</td>
<td align="center">1087.88</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
<tr class="even">
<td align="center">5</td>
<td align="center">1306.43</td>
<td align="center">1087.88</td>
<td align="center">218.55</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
<tr class="odd">
<td align="center">6</td>
<td align="center">1306.43</td>
<td align="center">1087.88</td>
<td align="center">218.55</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
<tr class="even">
<td align="center">7</td>
<td align="center">1671.09</td>
<td align="center">1087.88</td>
<td align="center">218.55</td>
<td align="center">364.66</td>
<td align="center">0.00</td>
</tr>
<tr class="odd">
<td align="center">8</td>
<td align="center">2491.84</td>
<td align="center">1087.88</td>
<td align="center">218.55</td>
<td align="center">364.66</td>
<td align="center">820.75</td>
</tr>
<tr class="even">
<td align="center">9</td>
<td align="center">2491.84</td>
<td align="center">1087.88</td>
<td align="center">218.55</td>
<td align="center">364.66</td>
<td align="center">820.75</td>
</tr>
<tr class="odd">
<td align="center">10</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="profit-participation" class="section level1" number="13">
<h1><span class="header-section-number">13</span> Profit
participation</h1>
<p>In addition to the above guaranteed values, many contracts also
include some kind of profit sharing. The total amount of money to be
distributed is usually predetermined by law or regulation (in Austria by
the <a href="https://www.ris.bka.gv.at/GeltendeFassung.wxe?Abfrage=Bundesnormen&amp;Gesetzesnummer=20009295">“Lebensversicherung-Gewinnbeteiligungsverordnung
– LV-GBV”</a>, but the actual way they are distributed to individual
contracts is up the insurance undertaking. The profit participation
scheme defines profit participation allocations based on certain rates
and bases, where the formulas and the types of profit are pre-determined
in a formal document (which in this package will be implemented as an
object of class <code>ProfitParticipation</code>), while the profit
rates are determined by the management of the undertaking
(“discretionary benefits”).</p>
<p>Typical Austrian insurance contracts have one of two kinds of profit
sharing mechanisms:</p>
<ul>
<li>“Advance profit participation” or “direct contributions”, which is a
direct premium rebate, which can in theory be lowered or revoked at any
time.</li>
<li>Yearly profit assignments into the reserves based on “total credited
interet rate” and other profit attribution rates.</li>
</ul>
<div id="advance-profit-participation-premium-rebate" class="section level2" number="13.1">
<h2><span class="header-section-number">13.1</span> Advance profit
participation (premium rebate)</h2>
<p>To implement advance profit participation, one still needs to create
a <code>ProfitParticipation</code> object, which can be empty. The
contract parameters <code>advanceProfitParticipation</code> and
<code>advanceProfitParticipationInclUnitCost</code> then define the
premium rebate. They can be set either in the profit scheme or in the
tariff definition. The latter is usually the easier way, as one profit
scheme might be applicable to multiple different tariffs with different
advance profit participation rates.</p>
<p>As an example, we will use our <code>Tarif.Life</code> whole life
tarif defined above and add a <span class="math inline">\(38\%\)</span>
advance profit participation on the premium:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" tabindex="-1"></a>profit.Advance.V1 <span class="ot">=</span> ProfitParticipation<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb67-2"><a href="#cb67-2" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">&quot;Profit Scheme for advance profit participation, V 1.0&quot;</span>,</span>
<span id="cb67-3"><a href="#cb67-3" tabindex="-1"></a>    <span class="at">advanceProfitParticipation =</span> <span class="fl">0.38</span></span>
<span id="cb67-4"><a href="#cb67-4" tabindex="-1"></a>);</span>
<span id="cb67-5"><a href="#cb67-5" tabindex="-1"></a></span>
<span id="cb67-6"><a href="#cb67-6" tabindex="-1"></a>Tarif.Life.withPP <span class="ot">=</span> Tarif.Life<span class="sc">$</span><span class="fu">createModification</span>(</span>
<span id="cb67-7"><a href="#cb67-7" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">&quot;Example Tariff - Whole/Term Life with profit sharing&quot;</span>,</span>
<span id="cb67-8"><a href="#cb67-8" tabindex="-1"></a>  <span class="at">tarif =</span> <span class="st">&quot;Life1PP&quot;</span>,</span>
<span id="cb67-9"><a href="#cb67-9" tabindex="-1"></a>  <span class="at">profitParticipationScheme =</span> profit.Advance.V1</span>
<span id="cb67-10"><a href="#cb67-10" tabindex="-1"></a>)</span>
<span id="cb67-11"><a href="#cb67-11" tabindex="-1"></a></span>
<span id="cb67-12"><a href="#cb67-12" tabindex="-1"></a>contract.LifePP <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb67-13"><a href="#cb67-13" tabindex="-1"></a>  <span class="at">tarif =</span> Tarif.Life.withPP,</span>
<span id="cb67-14"><a href="#cb67-14" tabindex="-1"></a>  <span class="at">age =</span> <span class="dv">40</span>, <span class="at">policyPeriod =</span> <span class="dv">10</span>,</span>
<span id="cb67-15"><a href="#cb67-15" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">100000</span>,</span>
<span id="cb67-16"><a href="#cb67-16" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2019-09-01&quot;</span>)</span>
<span id="cb67-17"><a href="#cb67-17" tabindex="-1"></a>)</span></code></pre></div>
<p>The premium composition shows that the profit participation</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" tabindex="-1"></a>contract.LifePP<span class="sc">$</span>Values<span class="sc">$</span>premiumComposition</span></code></pre></div>
<table style="width:93%;">
<colgroup>
<col width="6%" />
<col width="13%" />
<col width="8%" />
<col width="16%" />
<col width="23%" />
<col width="11%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">t</th>
<th align="center">charged</th>
<th align="center">tax</th>
<th align="center">unitcosts</th>
<th align="center">profit.advance</th>
<th align="center">gross</th>
<th align="center">net</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">184.54</td>
<td align="center">7.1</td>
<td align="center">0</td>
<td align="center">-108.76</td>
<td align="center">286.2</td>
<td align="center">160.11</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">184.54</td>
<td align="center">7.1</td>
<td align="center">0</td>
<td align="center">-108.76</td>
<td align="center">286.2</td>
<td align="center">160.11</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="center">184.54</td>
<td align="center">7.1</td>
<td align="center">0</td>
<td align="center">-108.76</td>
<td align="center">286.2</td>
<td align="center">160.11</td>
</tr>
<tr class="even">
<td align="center">3</td>
<td align="center">184.54</td>
<td align="center">7.1</td>
<td align="center">0</td>
<td align="center">-108.76</td>
<td align="center">286.2</td>
<td align="center">160.11</td>
</tr>
<tr class="odd">
<td align="center">4</td>
<td align="center">184.54</td>
<td align="center">7.1</td>
<td align="center">0</td>
<td align="center">-108.76</td>
<td align="center">286.2</td>
<td align="center">160.11</td>
</tr>
<tr class="even">
<td align="center">5</td>
<td align="center">184.54</td>
<td align="center">7.1</td>
<td align="center">0</td>
<td align="center">-108.76</td>
<td align="center">286.2</td>
<td align="center">160.11</td>
</tr>
<tr class="odd">
<td align="center">6</td>
<td align="center">184.54</td>
<td align="center">7.1</td>
<td align="center">0</td>
<td align="center">-108.76</td>
<td align="center">286.2</td>
<td align="center">160.11</td>
</tr>
<tr class="even">
<td align="center">7</td>
<td align="center">184.54</td>
<td align="center">7.1</td>
<td align="center">0</td>
<td align="center">-108.76</td>
<td align="center">286.2</td>
<td align="center">160.11</td>
</tr>
<tr class="odd">
<td align="center">8</td>
<td align="center">184.54</td>
<td align="center">7.1</td>
<td align="center">0</td>
<td align="center">-108.76</td>
<td align="center">286.2</td>
<td align="center">160.11</td>
</tr>
<tr class="even">
<td align="center">9</td>
<td align="center">184.54</td>
<td align="center">7.1</td>
<td align="center">0</td>
<td align="center">-108.76</td>
<td align="center">286.2</td>
<td align="center">160.11</td>
</tr>
<tr class="odd">
<td align="center">10</td>
<td align="center">0.00</td>
<td align="center">0.0</td>
<td align="center">0</td>
<td align="center">0.00</td>
<td align="center">0.0</td>
<td align="center">0.00</td>
</tr>
</tbody>
</table>
</div>
<div id="the-profitparticiption-class" class="section level2" number="13.2">
<h2><span class="header-section-number">13.2</span> The
ProfitParticiption class</h2>
<p>The profit participation scheme of a tarif is represented by an
object of the <code>ProfitParticipation</code> class. While the
<code>InsuranceContract.Parameters</code> list contains elements for the
profit rates, the implementation of the calculation of the profit parts
is done by functions defined in the <code>ProfitParticipation</code>
constructor.</p>
<p>This scheme is passed to the <code>InsuranceTarif</code> or
<code>InsuranceContract</code> via the
<code>profitParticipationScheme</code> parameter. `</p>
<p>There are different types of profit participation assignments, based
on the type of risks they are based upon:</p>
<ul>
<li><strong>Interest profit</strong>: total credited rate (minus
guarantee) applied to some kind of reserve</li>
<li><strong>Risk profit</strong>: risk profit rate applied to the risk
premium, capital or the sum insured</li>
<li><strong>Expense profit</strong>: expense profit rate applied to the
sum insured</li>
<li><strong>Sum profit</strong>: rate (depending on sum insured) applied
to the sum insured</li>
<li><strong>Terminal bonus</strong>: yearly attributions are collected
and paid out only on contract maturity</li>
<li><strong>Terminal bonus fund</strong>: Part of the ongoing profit
allocation is not immediately attributed to the contract, but stored in
a special reserve and paid out only on maturity.</li>
</ul>
<p>Each of these profit components in general depends in some way on a
profit rate and a basis to which the rate is applied. So each component
has the general functional form: <span class="math display">\[Profit^{type}_t = Calc\left(Rate^{type}_t,
Basis^{type}_t\right)\]</span> The most common calculation function is a
simple multiplication, i.e. <span class="math inline">\(Calc(r, b) =
r\cdot b\)</span>, but other functions are possible, to</p>
<p>The (default) parameters that can be passed to the
<code>ProfitParticipation</code> constructor are:</p>
<table>
<colgroup>
<col width="35%" />
<col width="64%" />
</colgroup>
<tbody>
<tr class="odd">
<td align="left"><strong>General profit setup</strong></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><code>waitingPeriod</code></td>
<td align="left">During the waiting period at the beginning of a
contract, no profit participation is assigned</td>
</tr>
<tr class="odd">
<td align="left"><code>profitComponents</code></td>
<td align="left">describes the different components of profit
participation (“interest”, “risk”, “expense”, “sum”, “terminal”)</td>
</tr>
<tr class="even">
<td align="left"><code>profitClass</code></td>
<td align="left">a profit ID used to identify the correct profit rates
(rates are defined per profit class)</td>
</tr>
<tr class="odd">
<td align="left"><code>profitRates</code></td>
<td align="left">a data frame containing company-wide profit rates. Key
columns are year and profitClass</td>
</tr>
<tr class="even">
<td align="left"><strong>Advance profit participation
rates</strong></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><code>advanceProfitParticipation</code></td>
<td align="left">premium rebate (percentage discount on the gross
premium)</td>
</tr>
<tr class="even">
<td align="left"><code>advanceProfitParticipationInclUnitCost</code></td>
<td align="left">premium rebate (percentage discount on the gross
premium including unit costs)</td>
</tr>
<tr class="odd">
<td align="left"><strong>Regular profit participation
rates</strong></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><code>guaranteedInterest</code> <span class="math inline">\(i\)</span></td>
<td align="left">Contract-specific override of the guaranteed intereste
rate (only for profit participation purposes)</td>
</tr>
<tr class="odd">
<td align="left"><code>interestProfitRate</code> <span class="math inline">\(ip_t\)</span></td>
<td align="left">Profit interest rate (added to the guaranteed interest
rate to arrive at the total credited rate)</td>
</tr>
<tr class="even">
<td align="left"><code>totalInterest</code> <span class="math inline">\(tcr_t\)</span></td>
<td align="left">The total credited interest rate (sum of guaranteed
interest and profit participation interest)</td>
</tr>
<tr class="odd">
<td align="left"><code>mortalityProfitRate</code> <span class="math inline">\(rp_t\)</span></td>
<td align="left">Mortality / risk profit rate</td>
</tr>
<tr class="even">
<td align="left"><code>expenseProfitRate</code> <span class="math inline">\(ep_t\)</span></td>
<td align="left">Expenso profit rate</td>
</tr>
<tr class="odd">
<td align="left"><code>sumProfitRate</code> <span class="math inline">\(sp_t\)</span></td>
<td align="left">Sum profit rate (typically a function, depending on sum
insured)</td>
</tr>
<tr class="even">
<td align="left"><code>terminalBonusRate</code> <span class="math inline">\(tb_t\)</span></td>
<td align="left">Terminal bonus rate</td>
</tr>
<tr class="odd">
<td align="left"><code>terminalBonusFundRate</code> <span class="math inline">\(tbf_t\)</span></td>
<td align="left">Terminal bonus fund rate, i.e. which percentage of the
assigned profits are withheld in a separate terminal bonus fund and only
paid out at maturity.</td>
</tr>
</tbody>
</table>
<p>For the calculation of the profit participation, the
<code>ProfitParticipation</code> class holds a list of function pointers
to calculate each component of profit participation, as outlined above.
For each of interest, risk, expense, sum, terminal and terminal bonus
fund the following three functions can be given:</p>
<ul>
<li><p><strong>Profit rate</strong>: return the profit rate as a
function from the values of the contract</p>
<p>Function signature: <code>function(rates, ...)</code></p></li>
<li><p><strong>Profit base</strong>: The quantity on which to apply the
rate. Typically this function returns either the current reserve, the
previous reserve (or some combination), the sum insured or the current
risk premium.</p>
<p>Function signature:
<code>function(rates, params, values, ...)</code></p></li>
<li><p><strong>Calculation</strong>: A function taking the rate and the
base and calculate the profit assigned for the specific profit
component. Most common are a simple multiplication of base and rate, but
other formulas are possible, too.</p>
<p>Function signature:
<code>function(base, rate, waiting, rates, params, values, ...)</code></p></li>
</ul>
<p>Thus, the constructor of the <code>ProfitParticipation</code> class
also takes the following parameters:</p>
<table>
<colgroup>
<col width="19%" />
<col width="26%" />
<col width="26%" />
<col width="28%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Type of profit</th>
<th align="left">Function for rate</th>
<th align="left">Function for base</th>
<th align="left">Function for calculation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">interest on accrued profit</td>
<td align="left"><code>getInterestOnProfits</code></td>
<td align="left">- (existing profit)</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">interest profit</td>
<td align="left"><code>getInterestProfitRate</code></td>
<td align="left"><code>getInterestProfitBase</code></td>
<td align="left"><code>calculateInterestProfit</code></td>
</tr>
<tr class="odd">
<td align="left">risk profit</td>
<td align="left"><code>getRiskProfitRate</code></td>
<td align="left"><code>getRiskProfitBase</code></td>
<td align="left"><code>calculateRiskProfit</code></td>
</tr>
<tr class="even">
<td align="left">expense profit</td>
<td align="left"><code>getExpenseProfitRate</code></td>
<td align="left"><code>getExpenseProfitBase</code></td>
<td align="left"><code>calculateExpenseProfit</code></td>
</tr>
<tr class="odd">
<td align="left">sum profit</td>
<td align="left"><code>getSumProfitRate</code></td>
<td align="left"><code>getSumProfitBase</code></td>
<td align="left"><code>calculateSumProfit</code></td>
</tr>
<tr class="even">
<td align="left">terminal bonus</td>
<td align="left"><code>getTerminalBonusRate</code></td>
<td align="left"><code>getTerminalBonusBase</code></td>
<td align="left"><code>calculateTerminalBonus</code></td>
</tr>
<tr class="odd">
<td align="left">terminal bonus fund</td>
<td align="left"><code>getTerminalBonusFundRate</code></td>
<td align="left"><code>getTerminalBonusFundBase</code></td>
<td align="left"><code>calculateTerminalBonusFund</code></td>
</tr>
</tbody>
</table>
<p>In addition, the following parameters define functions for
reserves:</p>
<ul>
<li><p><code>getTerminalBonusReserve</code> … Calculate the reserve for
the terminal bonus from the bonus assignments (old tariffs often use
some kind of discounting or conditional reserving for the terminal bonus
reserve)</p>
<p>Function signature:
<code>function(profits, rates, terminalBonus, terminalBonusAccount, params, values)</code></p></li>
</ul>
<p>To calculate the actual benefits paid out from profit participation,
the following parameters take the corresponding functions (signature:
<code>function(profits, rates, params, values, ...)</code> )</p>
<table>
<colgroup>
<col width="28%" />
<col width="71%" />
</colgroup>
<tbody>
<tr class="odd">
<td align="left"><code>calculateSurvivalBenefit</code></td>
<td align="left">Benefit from profit participation at maturity (in
addition to the guaranteed payout)</td>
</tr>
<tr class="even">
<td align="left"><code>calculateDeathBenefitAccrued</code></td>
<td align="left">Benefit from profit participation upon death (in
addition to the guaranteed payout)</td>
</tr>
<tr class="odd">
<td align="left"><code>calculateDeathBenefitTerminal</code></td>
<td align="left">Benefit from terminal bonus upon death (in addition to
the guaranteed payout and regular profit participation)</td>
</tr>
<tr class="even">
<td align="left"><code>calculateSurrenderBenefitAccrued</code></td>
<td align="left">Benefit from profit participation upon contract
surrender (in addition to the surrender value)</td>
</tr>
<tr class="odd">
<td align="left"><code>calculateSurrenderBenefitTerminal</code></td>
<td align="left">Benefit from terminal bonus upon contract surrender (in
addition to the surrender value and regular profit participation)</td>
</tr>
<tr class="even">
<td align="left"><code>calculatePremiumWaiverBenefitAccrued</code></td>
<td align="left">Benefit from profit participation upon premium waiver
(in addition to the surrender value)</td>
</tr>
<tr class="odd">
<td align="left"><code>calculatePremiumWaiverBenefitTerminal</code></td>
<td align="left">Benefit from terminal bonus upon premium waiver
surrender (in addition to the surrender value and regular profit
participation)</td>
</tr>
</tbody>
</table>
<div id="existing-functions-to-use" class="section level3" number="13.2.1">
<h3><span class="header-section-number">13.2.1</span> Existing functions
to use</h3>
<p>While the details of a profit participation scheme are very specific
and no two profit schemes are exactly alike, the basic functionality to
extract rates and bases and the calculation functions are usually not so
different. For this reason, the <code>LifeInsureR</code> package
provides several little helper functions that provide the most common
functionality for the definition of rates, bases and the profit
calculation. See <code>?ProfitParticipationFunctions</code> for the full
list.</p>
<p>The most common functions are:</p>
<ul>
<li><p><code>PP.base.PreviousZillmerReserve(rates, params, values, ...)</code></p></li>
<li><p><code>PP.base.contractualReserve(rates, params, values, ...)</code></p></li>
<li><p><code>PP.base.previousContractualReserve(rates, params, values, ...)</code></p></li>
<li><p><code>PP.base.meanContractualReserve(rates, params, values, ...)</code></p></li>
<li><p><code>PP.base.ZillmerRiskPremium(rates, params, values, ...)</code></p></li>
<li><p><code>PP.base.sumInsured(rates, params, values, ...)</code></p></li>
<li><p><code>PP.base.totalProfitAssignment(res, ...)</code></p></li>
<li><p><code>PP.rate.interestProfit(rates, ...)</code></p></li>
<li><p><code>PP.rate.riskProfit(rates, ...)</code></p></li>
<li><p><code>PP.rate.expenseProfit(rates, ...)</code></p></li>
<li><p><code>PP.rate.sumProfit(rates, ...)</code></p></li>
<li><p><code>PP.rate.terminalBonus(rates, ...)</code></p></li>
<li><p><code>PP.rate.terminalBonusFund(rates, ...)</code></p></li>
<li><p><code>PP.rate.interestProfitPlusGuarantee(rates, ...)</code></p></li>
<li><p><code>PP.rate.totalInterest(rates, ...)</code></p></li>
<li><p><code>PP.calculate.RateOnBase(base, rate, waiting, rates, params, values, ...)</code></p></li>
<li><p><code>PP.calculate.RateOnBaseMin0(base, rate, waiting, rates, params, values, ...)</code></p></li>
<li><p><code>PP.calculate.RatePlusGuaranteeOnBase(base, rate, waiting, rates, params, values, ...)</code></p></li>
<li><p><code>PP.benefit.ProfitPlusTerminalBonusReserve(profits, ...)</code></p></li>
<li><p><code>PP.benefit.Profit(profits, ...)</code></p></li>
<li><p><code>PP.benefit.ProfitPlusGuaranteedInterest(profits, rates, ...)</code></p></li>
<li><p><code>PP.benefit.ProfitPlusTotalInterest(profits, rates, params, values)</code></p></li>
<li><p><code>PP.benefit.ProfitPlusHalfTotalInterest(profits, ...)</code></p></li>
<li><p><code>PP.benefit.ProfitPlusInterestMinGuaranteeTotal(profits, rates, ...)</code></p></li>
<li><p><code>PP.benefit.TerminalBonus5YearsProRata(profits, params, ...)</code></p></li>
<li><p><code>PP.benefit.TerminalBonus5Years(profits, params, ...)</code></p></li>
<li><p><code>PP.benefit.TerminalBonus(profits, params, ...)</code></p></li>
</ul>
</div>
<div id="example-profit-scheme" class="section level3" number="13.2.2">
<h3><span class="header-section-number">13.2.2</span> Example profit
scheme</h3>
<p>For example, imagine a tariff’s total cumulated assigned profit <span class="math inline">\(G_t\)</span> and the benefits at time <span class="math inline">\(t\)</span> have the formulas: <span class="math display">\[Prof_t = \left(G_{t-1} + TBF_{t-1}\right) \cdot
\left(1 + i + ip_t\right) + ip_t \cdot \frac{\left(Res_{t-1} +
Res_{t}\right)}{2} + rp_t \cdot P^r_t + ep_t \cdot SumInsured + sp_t(SI)
\cdot SumInsured\]</span> <span class="math display">\[G_t = G_{t-1} +
(1 - tbf_t) \cdot Prof_t\]</span> <span class="math display">\[TBF_t =
TBF_{t-1} + tbf_t \cdot Prof_t\]</span> <span class="math display">\[Death_t = G_t \cdot \left(1 + i + ip_t\right) +
TBF_t\]</span> <span class="math display">\[Matu_n = G_n +
TBF_n\]</span> <span class="math display">\[Surrender_t = G_t\cdot
\left(1+\frac{i + ip_t}{2}\right) + 0.5 \cdot TBF_t\]</span> <span class="math display">\[Red_t = G_t + 0.5 \cdot TBF_t\]</span></p>
<p>These formulas can be interpreted as following:</p>
<ul>
<li>There are multiple profit components: interest profit, risk profit,
expense profit and sum profit.</li>
<li>The total profit assignment <span class="math inline">\(Prof_t\)</span> in year <span class="math inline">\(t\)</span> consists of:
<ul>
<li>Interest (guarantee + interest profit rate) on the accrued profits
and the terminal bonus fund</li>
<li>Interest profit on the average reserve</li>
<li>Risk profit as part of the risk premium (similar to advance profit
participation, but on a year-by-year basis on the actual risk
premium)</li>
<li>Expense profit relative to the sum insured</li>
<li>Sum profit relative to the sum insured. The rate depends on the sum
insured, too (e.g. higher SI typically have higher sum profit)</li>
<li>Only a portion <span class="math inline">\((1-tbf_t)\)</span> is
added to the accrued bonus, while the rest ist stored in the Terminal
Bonus Fund.</li>
</ul></li>
<li>The existing cumulated profit <span class="math inline">\(G_{t-1}\)</span> and the terminal bonus fund <span class="math inline">\(TBF_{t-1}\)</span> yields interest with the
guaranteed interest rate plus potentially the interest profit rate. If
the total credited rate is lower than the guarantee, the guarantee is
still applied to the existing profits. =&gt;
<code>PP.rate.interestProfitPlusGuarantee</code></li>
<li>Additionaly, interest profit is assigned with rate <span class="math inline">\(ip_t\)</span> (=0 if total credited rate is below
guarantee) multiplied with the average of the current and the previous
reserve for the guaranteed part. =&gt;
<code>PP.base.meanContractualReserve</code></li>
<li>The risk profit works similar to advance profit participation, only
that part of the (actual) risk premium of the year is returned to the
customer after having paid it. =&gt;
<code>PP.base.ZillmerRiskPremium</code></li>
<li>Expense profit is based on the sum insured, since most cost
structures are linear in the sum insured and contain certain loadings,
which are returned to the customer via this profit component.</li>
<li>A sum profit of <span class="math inline">\(sp_t\)</span> of the sum
insured is added, even if no interest profit is distributed. The sum
profit rate depends on the sum insured (as a function), since the
charges expenses increase linearly in the sum insured while the actual
cost do increase only sub-linear. So for higher sums typically more
expenses are returned. =&gt; The sum profit rate will be a function
rather than a single value each year.</li>
<li>Only a part <span class="math inline">\((1-tbf_t)\)</span> of the
profit assignment in year <span class="math inline">\(t\)</span> is
added to the accrued profits <span class="math inline">\(G_t\)</span>,
while the rest <span class="math inline">\(tbf_t\)</span> is stored in
the terminal bonus fund <span class="math inline">\(TBF_t\)</span>,
which is partially lost on surrender or premium waiver.</li>
</ul>
<p>The values of <span class="math inline">\(Res_t\)</span>, <span class="math inline">\(P^r_t\)</span>, <span class="math inline">\(SumInsured\)</span> and the guaranteed interest
<span class="math inline">\(i^g_t\)</span> are prescribed by the tariff
or contract, while the profit participation rates <span class="math inline">\(ip_t\)</span>, <span class="math inline">\(rp_t\)</span>, <span class="math inline">\(ep_t\)</span> and <span class="math inline">\(sp_t\)</span> are decided on a year-by-year basis
by the management boards.</p>
<p>The benefits for death, maturity, surrender and premium waivers
are:</p>
<ul>
<li>In case of death, the existing cumulated profits yield one
additional year of interest =&gt;
<code>PP.benefit.ProfitPlusInterestMinGuaranteeTotal</code></li>
<li>At maturity of the contract, the existing cumulated profits are paid
out in addition to the guaranteed benefits of the contract. =&gt;
<code>PP.benefit.Profit</code></li>
<li>In case of surrender (on average half a year after the contract’s
anniversary), half a year of interest is added to the existing cumulated
profits from the last anniversary =&gt;
<code>PP.benefit.ProfitPlusHalfInterestMinGuaranteeTotal</code></li>
<li>When premiums are waived, the existing accrued profits are taken
into account without any additional interest. =&gt;
<code>PP.benefit.Profit</code></li>
<li>The terminal bonus fund is paid out fully on death and at maturity,
while half of the TBF is lost on surrender or premium waiver.</li>
</ul>
<p>This profit scheme can be easily be implemented as a
<code>ProfitParticipation</code> object, where one can pass the
functions for bases and calculation and also provide default profit
rates:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" tabindex="-1"></a>ProfitScheme.example <span class="ot">=</span> ProfitParticipation<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb69-2"><a href="#cb69-2" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">&quot;Example Profit Scheme, V 1.0&quot;</span>,</span>
<span id="cb69-3"><a href="#cb69-3" tabindex="-1"></a>  <span class="at">profitComponents =</span> <span class="fu">c</span>(<span class="st">&quot;interest&quot;</span>, <span class="st">&quot;risk&quot;</span>, <span class="st">&quot;expense&quot;</span>, <span class="st">&quot;sum&quot;</span>, <span class="st">&quot;TBF&quot;</span>),</span>
<span id="cb69-4"><a href="#cb69-4" tabindex="-1"></a></span>
<span id="cb69-5"><a href="#cb69-5" tabindex="-1"></a>  <span class="at">getInterestOnProfits    =</span> PP.rate.interestProfitPlusGuarantee,</span>
<span id="cb69-6"><a href="#cb69-6" tabindex="-1"></a>  <span class="at">getInterestProfitBase   =</span> PP.base.meanContractualReserve,</span>
<span id="cb69-7"><a href="#cb69-7" tabindex="-1"></a>  <span class="at">getRiskProfitBase       =</span> PP.base.ZillmerRiskPremium,</span>
<span id="cb69-8"><a href="#cb69-8" tabindex="-1"></a>  <span class="at">getExpenseProfitBase    =</span> PP.base.sumInsured,</span>
<span id="cb69-9"><a href="#cb69-9" tabindex="-1"></a>  <span class="at">getSumProfitBase        =</span> PP.base.sumInsured,</span>
<span id="cb69-10"><a href="#cb69-10" tabindex="-1"></a>  <span class="at">getTerminalBonusFundBase =</span> PP.base.totalProfitAssignment,</span>
<span id="cb69-11"><a href="#cb69-11" tabindex="-1"></a>  </span>
<span id="cb69-12"><a href="#cb69-12" tabindex="-1"></a>  <span class="at">mortalityProfitRate =</span> <span class="fl">0.15</span>,</span>
<span id="cb69-13"><a href="#cb69-13" tabindex="-1"></a>  <span class="at">expenseProfitRate =</span> <span class="fl">0.01</span>,</span>
<span id="cb69-14"><a href="#cb69-14" tabindex="-1"></a>  <span class="at">sumProfitRate =</span> <span class="cf">function</span>(params, ...) {<span class="cf">if</span> (params<span class="sc">$</span>ContractData<span class="sc">$</span>sumInsured <span class="sc">&gt;</span> <span class="dv">1000000</span>) <span class="fl">0.005</span> <span class="cf">else</span> <span class="dv">0</span>;},</span>
<span id="cb69-15"><a href="#cb69-15" tabindex="-1"></a>  <span class="at">terminalBonusFundRate =</span> <span class="fl">0.3</span>,</span>
<span id="cb69-16"><a href="#cb69-16" tabindex="-1"></a>  </span>
<span id="cb69-17"><a href="#cb69-17" tabindex="-1"></a>  <span class="at">calculateSurvivalBenefit      =</span> PP.benefit.ProfitPlusTerminalBonusReserve,</span>
<span id="cb69-18"><a href="#cb69-18" tabindex="-1"></a>  </span>
<span id="cb69-19"><a href="#cb69-19" tabindex="-1"></a>  <span class="at">calculateDeathBenefitAccrued  =</span> PP.benefit.ProfitPlusInterestMinGuaranteeTotal,</span>
<span id="cb69-20"><a href="#cb69-20" tabindex="-1"></a>  <span class="at">calculateDeathBenefitTerminal =</span> PP.benefit.TerminalBonus,</span>
<span id="cb69-21"><a href="#cb69-21" tabindex="-1"></a>  <span class="at">calculateSurrenderBenefitAccrued =</span> PP.benefit.ProfitPlusHalfInterestMinGuaranteeTotal,</span>
<span id="cb69-22"><a href="#cb69-22" tabindex="-1"></a>  <span class="at">calculateSurrenderBenefitTerminal =</span> <span class="cf">function</span>(profits, ...) {  profits[, <span class="st">&quot;TBF&quot;</span>] <span class="sc">/</span> <span class="dv">2</span> },</span>
<span id="cb69-23"><a href="#cb69-23" tabindex="-1"></a>  <span class="at">calculatePremiumWaiverBenefitAccrued =</span> PP.benefit.Profit,</span>
<span id="cb69-24"><a href="#cb69-24" tabindex="-1"></a>  <span class="at">calculatePremiumWaiverBenefitTerminal =</span> <span class="cf">function</span>(profits, ...) {  profits[, <span class="st">&quot;TBF&quot;</span>] <span class="sc">/</span> <span class="dv">2</span> },</span>
<span id="cb69-25"><a href="#cb69-25" tabindex="-1"></a>  </span>
<span id="cb69-26"><a href="#cb69-26" tabindex="-1"></a>  <span class="at">profitClass =</span> <span class="cn">NULL</span></span>
<span id="cb69-27"><a href="#cb69-27" tabindex="-1"></a>)</span></code></pre></div>
<p>The calculation functions are not given, as they default to the
correct <code>PP.calculate.RateOnBase</code> anyway. The interest profit
rates are not given, as they will vary over time with no default value.
Rathery, they need to be passed to the call to
<code>InsuranceContract$addProfitScenario()</code> to calculate one
particular profit scenario with given rates. In contrast, the mortality,
expense and sum profit rates are initialized with some default values,
which will be used if a profit scenario does not explicitly give those
profit rates.</p>
</div>
<div id="using-the-profit-scheme-in-a-tariff-or-contract" class="section level3" number="13.2.3">
<h3><span class="header-section-number">13.2.3</span> Using the profit
scheme in a tariff or contract</h3>
<p>The profit scheme defined above can now be used with the
<code>profitParticipationScheme</code> parameter in a tariff or a
contract. Usually, the profit scheme is a property of the product, so it
should be specified in the tariff, but can be overridden in a
contract.</p>
<p>As an example, let us create an endowment contract with 500% death
benefit that uses this profit scheme:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" tabindex="-1"></a>contract.Endow.PP <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb70-2"><a href="#cb70-2" tabindex="-1"></a>  <span class="at">tarif =</span> Tarif.Endowment,</span>
<span id="cb70-3"><a href="#cb70-3" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">10000</span>,</span>
<span id="cb70-4"><a href="#cb70-4" tabindex="-1"></a>  <span class="at">deathBenefit =</span> <span class="dv">5</span>,</span>
<span id="cb70-5"><a href="#cb70-5" tabindex="-1"></a>  <span class="at">age =</span> <span class="dv">50</span>, <span class="at">policyPeriod =</span> <span class="dv">15</span>,</span>
<span id="cb70-6"><a href="#cb70-6" tabindex="-1"></a>  </span>
<span id="cb70-7"><a href="#cb70-7" tabindex="-1"></a>  <span class="at">profitParticipationScheme =</span> ProfitScheme.example,</span>
<span id="cb70-8"><a href="#cb70-8" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-09-01&quot;</span>)</span>
<span id="cb70-9"><a href="#cb70-9" tabindex="-1"></a>)</span></code></pre></div>
<p>In contrast to the guaranteed values, which can and will be
calculated as soon as the contract is created, the profit participation
needs to be explicitly called with the desired rates. A contract can
store multiple different profit scenarios, which can be added with the
<code>addProfitScenario()</code> method. This method can also be chained
to add multiple scenarios (e.g. )</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" tabindex="-1"></a>contract.Endow.PP<span class="sc">$</span></span>
<span id="cb71-2"><a href="#cb71-2" tabindex="-1"></a>  <span class="fu">addProfitScenario</span>(<span class="at">id =</span> <span class="st">&quot;Current total credited rate&quot;</span>, <span class="at">guaranteedInterest =</span> <span class="fl">0.005</span>, <span class="at">interestProfitRate =</span> <span class="fl">0.02</span>, <span class="at">totalInterest =</span> <span class="fl">0.025</span>)<span class="sc">$</span></span>
<span id="cb71-3"><a href="#cb71-3" tabindex="-1"></a>  <span class="fu">addProfitScenario</span>(<span class="at">id =</span> <span class="st">&quot;Current TCR-1%&quot;</span>, <span class="at">guaranteedInterest =</span> <span class="fl">0.005</span>, <span class="at">interestProfitRate =</span> <span class="fl">0.01</span>, <span class="at">totalInterest =</span> <span class="fl">0.015</span>)<span class="sc">$</span></span>
<span id="cb71-4"><a href="#cb71-4" tabindex="-1"></a>  <span class="fu">addProfitScenario</span>(<span class="at">id =</span> <span class="st">&quot;Current TCR+1%&quot;</span>, <span class="at">guaranteedInterest =</span> <span class="fl">0.005</span>, <span class="at">interestProfitRate =</span> <span class="fl">0.03</span>, <span class="at">totalInterest =</span> <span class="fl">0.035</span>)</span>
<span id="cb71-5"><a href="#cb71-5" tabindex="-1"></a>  </span></code></pre></div>
<p>All profit scenarios are stored in the
<code>InsuranceContract$Values$profitScenarios</code> list indexed with
the id given in the call.</p>
<p>The array containing all values of the profit scenario first holds
the calculation basis and the rate for each of the profit
components:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" tabindex="-1"></a>contract.Endow.PP<span class="sc">$</span>Values<span class="sc">$</span>profitScenarios<span class="sc">$</span><span class="st">`</span><span class="at">Current total credited rate</span><span class="st">`</span> <span class="sc">%&gt;%</span></span>
<span id="cb72-2"><a href="#cb72-2" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb72-3"><a href="#cb72-3" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">&quot;Base&quot;</span>), <span class="fu">ends_with</span>(<span class="st">&quot;Interest&quot;</span>), <span class="fu">ends_with</span>(<span class="st">&quot;Rate&quot;</span>), <span class="sc">-</span>TBFRate, <span class="sc">-</span>TBFBase, <span class="sc">-</span>totalInterest) <span class="sc">%&gt;%</span></span>
<span id="cb72-4"><a href="#cb72-4" tabindex="-1"></a>  <span class="fu">rowid_to_column</span>(<span class="st">&quot;t&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">t =</span> t <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">kable</span>()</span></code></pre></div>
<table>
<colgroup>
<col width="1%" />
<col width="8%" />
<col width="5%" />
<col width="7%" />
<col width="5%" />
<col width="12%" />
<col width="12%" />
<col width="9%" />
<col width="11%" />
<col width="9%" />
<col width="13%" />
</colgroup>
<thead>
<tr class="header">
<th align="right">t</th>
<th align="right">interestBase</th>
<th align="right">riskBase</th>
<th align="right">expenseBase</th>
<th align="right">sumBase</th>
<th align="right">guaranteedInterest</th>
<th align="right">interestProfitRate</th>
<th align="right">riskProfitRate</th>
<th align="right">expenseProfitRate</th>
<th align="right">sumProfitRate</th>
<th align="right">interestOnProfitRate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="right">0.00000</td>
<td align="right">0.0000</td>
<td align="right">10000</td>
<td align="right">10000</td>
<td align="right">0.000</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">18.56845</td>
<td align="right">139.2892</td>
<td align="right">10000</td>
<td align="right">10000</td>
<td align="right">0.005</td>
<td align="right">0.02</td>
<td align="right">0.15</td>
<td align="right">0.01</td>
<td align="right">0</td>
<td align="right">0.025</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="right">803.01905</td>
<td align="right">151.7772</td>
<td align="right">10000</td>
<td align="right">10000</td>
<td align="right">0.005</td>
<td align="right">0.02</td>
<td align="right">0.15</td>
<td align="right">0.01</td>
<td align="right">0</td>
<td align="right">0.025</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="right">1578.39853</td>
<td align="right">165.1467</td>
<td align="right">10000</td>
<td align="right">10000</td>
<td align="right">0.005</td>
<td align="right">0.02</td>
<td align="right">0.15</td>
<td align="right">0.01</td>
<td align="right">0</td>
<td align="right">0.025</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="right">2343.76130</td>
<td align="right">179.4261</td>
<td align="right">10000</td>
<td align="right">10000</td>
<td align="right">0.005</td>
<td align="right">0.02</td>
<td align="right">0.15</td>
<td align="right">0.01</td>
<td align="right">0</td>
<td align="right">0.025</td>
</tr>
<tr class="even">
<td align="right">5</td>
<td align="right">3098.03332</td>
<td align="right">194.8334</td>
<td align="right">10000</td>
<td align="right">10000</td>
<td align="right">0.005</td>
<td align="right">0.02</td>
<td align="right">0.15</td>
<td align="right">0.01</td>
<td align="right">0</td>
<td align="right">0.025</td>
</tr>
<tr class="odd">
<td align="right">6</td>
<td align="right">3839.92597</td>
<td align="right">211.5669</td>
<td align="right">10000</td>
<td align="right">10000</td>
<td align="right">0.005</td>
<td align="right">0.02</td>
<td align="right">0.15</td>
<td align="right">0.01</td>
<td align="right">0</td>
<td align="right">0.025</td>
</tr>
<tr class="even">
<td align="right">7</td>
<td align="right">4567.84836</td>
<td align="right">230.0169</td>
<td align="right">10000</td>
<td align="right">10000</td>
<td align="right">0.005</td>
<td align="right">0.02</td>
<td align="right">0.15</td>
<td align="right">0.01</td>
<td align="right">0</td>
<td align="right">0.025</td>
</tr>
<tr class="odd">
<td align="right">8</td>
<td align="right">5280.07413</td>
<td align="right">250.0469</td>
<td align="right">10000</td>
<td align="right">10000</td>
<td align="right">0.005</td>
<td align="right">0.02</td>
<td align="right">0.15</td>
<td align="right">0.01</td>
<td align="right">0</td>
<td align="right">0.025</td>
</tr>
<tr class="even">
<td align="right">9</td>
<td align="right">5975.02268</td>
<td align="right">271.4863</td>
<td align="right">10000</td>
<td align="right">10000</td>
<td align="right">0.005</td>
<td align="right">0.02</td>
<td align="right">0.15</td>
<td align="right">0.01</td>
<td align="right">0</td>
<td align="right">0.025</td>
</tr>
<tr class="odd">
<td align="right">10</td>
<td align="right">6651.23186</td>
<td align="right">294.2541</td>
<td align="right">10000</td>
<td align="right">10000</td>
<td align="right">0.005</td>
<td align="right">0.02</td>
<td align="right">0.15</td>
<td align="right">0.01</td>
<td align="right">0</td>
<td align="right">0.025</td>
</tr>
<tr class="even">
<td align="right">11</td>
<td align="right">7307.44935</td>
<td align="right">317.9992</td>
<td align="right">10000</td>
<td align="right">10000</td>
<td align="right">0.005</td>
<td align="right">0.02</td>
<td align="right">0.15</td>
<td align="right">0.01</td>
<td align="right">0</td>
<td align="right">0.025</td>
</tr>
<tr class="odd">
<td align="right">12</td>
<td align="right">7942.76663</td>
<td align="right">342.3761</td>
<td align="right">10000</td>
<td align="right">10000</td>
<td align="right">0.005</td>
<td align="right">0.02</td>
<td align="right">0.15</td>
<td align="right">0.01</td>
<td align="right">0</td>
<td align="right">0.025</td>
</tr>
<tr class="even">
<td align="right">13</td>
<td align="right">8556.80171</td>
<td align="right">366.6734</td>
<td align="right">10000</td>
<td align="right">10000</td>
<td align="right">0.005</td>
<td align="right">0.02</td>
<td align="right">0.15</td>
<td align="right">0.01</td>
<td align="right">0</td>
<td align="right">0.025</td>
</tr>
<tr class="odd">
<td align="right">14</td>
<td align="right">9149.32455</td>
<td align="right">391.2964</td>
<td align="right">10000</td>
<td align="right">10000</td>
<td align="right">0.005</td>
<td align="right">0.02</td>
<td align="right">0.15</td>
<td align="right">0.01</td>
<td align="right">0</td>
<td align="right">0.025</td>
</tr>
<tr class="even">
<td align="right">15</td>
<td align="right">9720.07684</td>
<td align="right">415.8936</td>
<td align="right">10000</td>
<td align="right">10000</td>
<td align="right">0.005</td>
<td align="right">0.02</td>
<td align="right">0.15</td>
<td align="right">0.01</td>
<td align="right">0</td>
<td align="right">0.025</td>
</tr>
</tbody>
</table>
<p>The base for interest profit is the average of the reserve:</p>
<table style="width:58%;">
<colgroup>
<col width="6%" />
<col width="18%" />
<col width="15%" />
<col width="18%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">t</th>
<th align="center">SumInsured</th>
<th align="center">Zillmer</th>
<th align="center">AvgZillmer</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">10000</td>
<td align="center">-375.81</td>
<td align="center">-187.90</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">10000</td>
<td align="center">412.95</td>
<td align="center">18.57</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="center">10000</td>
<td align="center">1193.09</td>
<td align="center">803.02</td>
</tr>
<tr class="even">
<td align="center">3</td>
<td align="center">10000</td>
<td align="center">1963.70</td>
<td align="center">1578.40</td>
</tr>
<tr class="odd">
<td align="center">4</td>
<td align="center">10000</td>
<td align="center">2723.82</td>
<td align="center">2343.76</td>
</tr>
<tr class="even">
<td align="center">5</td>
<td align="center">10000</td>
<td align="center">3472.25</td>
<td align="center">3098.03</td>
</tr>
<tr class="odd">
<td align="center">6</td>
<td align="center">10000</td>
<td align="center">4207.60</td>
<td align="center">3839.93</td>
</tr>
<tr class="even">
<td align="center">7</td>
<td align="center">10000</td>
<td align="center">4928.09</td>
<td align="center">4567.85</td>
</tr>
<tr class="odd">
<td align="center">8</td>
<td align="center">10000</td>
<td align="center">5632.06</td>
<td align="center">5280.07</td>
</tr>
<tr class="even">
<td align="center">9</td>
<td align="center">10000</td>
<td align="center">6317.99</td>
<td align="center">5975.02</td>
</tr>
<tr class="odd">
<td align="center">10</td>
<td align="center">10000</td>
<td align="center">6984.47</td>
<td align="center">6651.23</td>
</tr>
<tr class="even">
<td align="center">11</td>
<td align="center">10000</td>
<td align="center">7630.43</td>
<td align="center">7307.45</td>
</tr>
<tr class="odd">
<td align="center">12</td>
<td align="center">10000</td>
<td align="center">8255.11</td>
<td align="center">7942.77</td>
</tr>
<tr class="even">
<td align="center">13</td>
<td align="center">10000</td>
<td align="center">8858.50</td>
<td align="center">8556.80</td>
</tr>
<tr class="odd">
<td align="center">14</td>
<td align="center">10000</td>
<td align="center">9440.15</td>
<td align="center">9149.32</td>
</tr>
<tr class="even">
<td align="center">15</td>
<td align="center">10000</td>
<td align="center">10000.00</td>
<td align="center">9720.08</td>
</tr>
</tbody>
</table>
<p>From the bases and rates, the calculation function (in our case
simply the multiplication of rate and base) is applied to arrive at the
yearly profit allocation of each component:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" tabindex="-1"></a>contract.Endow.PP<span class="sc">$</span>Values<span class="sc">$</span>profitScenarios<span class="sc">$</span><span class="st">`</span><span class="at">Current total credited rate</span><span class="st">`</span> <span class="sc">%&gt;%</span></span>
<span id="cb73-2"><a href="#cb73-2" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb73-3"><a href="#cb73-3" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">&quot;Profit&quot;</span>), totalProfitAssignment, <span class="sc">-</span>totalProfit) <span class="sc">%&gt;%</span></span>
<span id="cb73-4"><a href="#cb73-4" tabindex="-1"></a>  <span class="fu">rowid_to_column</span>(<span class="st">&quot;t&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">t =</span> t <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb73-5"><a href="#cb73-5" tabindex="-1"></a>  pander</span></code></pre></div>
<table>
<colgroup>
<col width="4%" />
<col width="13%" />
<col width="10%" />
<col width="12%" />
<col width="9%" />
<col width="15%" />
<col width="15%" />
<col width="19%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">t</th>
<th align="center">interestProfit</th>
<th align="center">riskProfit</th>
<th align="center">expenseProfit</th>
<th align="center">sumProfit</th>
<th align="center">componentsProfit</th>
<th align="center">interestOnProfit</th>
<th align="center">totalProfitAssignment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">0.37</td>
<td align="center">20.89</td>
<td align="center">100</td>
<td align="center">0</td>
<td align="center">121.26</td>
<td align="center">0.00</td>
<td align="center">121.26</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="center">16.06</td>
<td align="center">22.77</td>
<td align="center">100</td>
<td align="center">0</td>
<td align="center">138.83</td>
<td align="center">3.03</td>
<td align="center">141.86</td>
</tr>
<tr class="even">
<td align="center">3</td>
<td align="center">31.57</td>
<td align="center">24.77</td>
<td align="center">100</td>
<td align="center">0</td>
<td align="center">156.34</td>
<td align="center">6.58</td>
<td align="center">162.92</td>
</tr>
<tr class="odd">
<td align="center">4</td>
<td align="center">46.88</td>
<td align="center">26.91</td>
<td align="center">100</td>
<td align="center">0</td>
<td align="center">173.79</td>
<td align="center">10.65</td>
<td align="center">184.44</td>
</tr>
<tr class="even">
<td align="center">5</td>
<td align="center">61.96</td>
<td align="center">29.23</td>
<td align="center">100</td>
<td align="center">0</td>
<td align="center">191.19</td>
<td align="center">15.26</td>
<td align="center">206.45</td>
</tr>
<tr class="odd">
<td align="center">6</td>
<td align="center">76.80</td>
<td align="center">31.74</td>
<td align="center">100</td>
<td align="center">0</td>
<td align="center">208.53</td>
<td align="center">20.42</td>
<td align="center">228.96</td>
</tr>
<tr class="even">
<td align="center">7</td>
<td align="center">91.36</td>
<td align="center">34.50</td>
<td align="center">100</td>
<td align="center">0</td>
<td align="center">225.86</td>
<td align="center">26.15</td>
<td align="center">252.01</td>
</tr>
<tr class="odd">
<td align="center">8</td>
<td align="center">105.60</td>
<td align="center">37.51</td>
<td align="center">100</td>
<td align="center">0</td>
<td align="center">243.11</td>
<td align="center">32.45</td>
<td align="center">275.56</td>
</tr>
<tr class="even">
<td align="center">9</td>
<td align="center">119.50</td>
<td align="center">40.72</td>
<td align="center">100</td>
<td align="center">0</td>
<td align="center">260.22</td>
<td align="center">39.34</td>
<td align="center">299.56</td>
</tr>
<tr class="odd">
<td align="center">10</td>
<td align="center">133.02</td>
<td align="center">44.14</td>
<td align="center">100</td>
<td align="center">0</td>
<td align="center">277.16</td>
<td align="center">46.83</td>
<td align="center">323.99</td>
</tr>
<tr class="even">
<td align="center">11</td>
<td align="center">146.15</td>
<td align="center">47.70</td>
<td align="center">100</td>
<td align="center">0</td>
<td align="center">293.85</td>
<td align="center">54.92</td>
<td align="center">348.77</td>
</tr>
<tr class="odd">
<td align="center">12</td>
<td align="center">158.86</td>
<td align="center">51.36</td>
<td align="center">100</td>
<td align="center">0</td>
<td align="center">310.21</td>
<td align="center">63.64</td>
<td align="center">373.86</td>
</tr>
<tr class="even">
<td align="center">13</td>
<td align="center">171.14</td>
<td align="center">55.00</td>
<td align="center">100</td>
<td align="center">0</td>
<td align="center">326.14</td>
<td align="center">72.99</td>
<td align="center">399.13</td>
</tr>
<tr class="odd">
<td align="center">14</td>
<td align="center">182.99</td>
<td align="center">58.69</td>
<td align="center">100</td>
<td align="center">0</td>
<td align="center">341.68</td>
<td align="center">82.97</td>
<td align="center">424.65</td>
</tr>
<tr class="even">
<td align="center">15</td>
<td align="center">194.40</td>
<td align="center">62.38</td>
<td align="center">100</td>
<td align="center">0</td>
<td align="center">356.79</td>
<td align="center">93.59</td>
<td align="center">450.37</td>
</tr>
</tbody>
</table>
<p>The <code>totalProfitAssignment</code> column is the sum of all
component allocations in the given year (the <span class="math inline">\(Prof_t\)</span> in the formulas above).</p>
<p>After all components are calculated, the yearly profit assignment is
split into the part that is accrued in the regular bonus and the part
that is placed in the terminal bonus fund, using the terminal bonus fund
rate. Finally, the yearly regular and terminal bonus assignments can be
summed up to the regular and the terminal bonus:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" tabindex="-1"></a>contract.Endow.PP<span class="sc">$</span>Values<span class="sc">$</span>profitScenarios<span class="sc">$</span><span class="st">`</span><span class="at">Current total credited rate</span><span class="st">`</span> <span class="sc">%&gt;%</span></span>
<span id="cb74-2"><a href="#cb74-2" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb74-3"><a href="#cb74-3" tabindex="-1"></a>  <span class="fu">select</span>(TBFBase, TBFRate, TBFBonusAssignment, regularBonusAssignment, TBF, regularBonus, totalProfit) <span class="sc">%&gt;%</span></span>
<span id="cb74-4"><a href="#cb74-4" tabindex="-1"></a>  <span class="fu">rowid_to_column</span>(<span class="st">&quot;t&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">t =</span> t <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb74-5"><a href="#cb74-5" tabindex="-1"></a>  pander</span></code></pre></div>
<table>
<colgroup>
<col width="4%" />
<col width="9%" />
<col width="9%" />
<col width="18%" />
<col width="22%" />
<col width="9%" />
<col width="13%" />
<col width="13%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">t</th>
<th align="center">TBFBase</th>
<th align="center">TBFRate</th>
<th align="center">TBFBonusAssignment</th>
<th align="center">regularBonusAssignment</th>
<th align="center">TBF</th>
<th align="center">regularBonus</th>
<th align="center">totalProfit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">0.00</td>
<td align="center">0.0</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">121.26</td>
<td align="center">0.3</td>
<td align="center">36.38</td>
<td align="center">84.89</td>
<td align="center">36.38</td>
<td align="center">84.89</td>
<td align="center">121.26</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="center">141.86</td>
<td align="center">0.3</td>
<td align="center">42.56</td>
<td align="center">99.30</td>
<td align="center">78.94</td>
<td align="center">184.19</td>
<td align="center">263.12</td>
</tr>
<tr class="even">
<td align="center">3</td>
<td align="center">162.92</td>
<td align="center">0.3</td>
<td align="center">48.88</td>
<td align="center">114.04</td>
<td align="center">127.81</td>
<td align="center">298.23</td>
<td align="center">426.04</td>
</tr>
<tr class="odd">
<td align="center">4</td>
<td align="center">184.44</td>
<td align="center">0.3</td>
<td align="center">55.33</td>
<td align="center">129.11</td>
<td align="center">183.14</td>
<td align="center">427.34</td>
<td align="center">610.48</td>
</tr>
<tr class="even">
<td align="center">5</td>
<td align="center">206.45</td>
<td align="center">0.3</td>
<td align="center">61.93</td>
<td align="center">144.51</td>
<td align="center">245.08</td>
<td align="center">571.85</td>
<td align="center">816.93</td>
</tr>
<tr class="odd">
<td align="center">6</td>
<td align="center">228.96</td>
<td align="center">0.3</td>
<td align="center">68.69</td>
<td align="center">160.27</td>
<td align="center">313.77</td>
<td align="center">732.12</td>
<td align="center">1045.89</td>
</tr>
<tr class="even">
<td align="center">7</td>
<td align="center">252.01</td>
<td align="center">0.3</td>
<td align="center">75.60</td>
<td align="center">176.40</td>
<td align="center">389.37</td>
<td align="center">908.52</td>
<td align="center">1297.89</td>
</tr>
<tr class="odd">
<td align="center">8</td>
<td align="center">275.56</td>
<td align="center">0.3</td>
<td align="center">82.67</td>
<td align="center">192.89</td>
<td align="center">472.03</td>
<td align="center">1101.41</td>
<td align="center">1573.45</td>
</tr>
<tr class="even">
<td align="center">9</td>
<td align="center">299.56</td>
<td align="center">0.3</td>
<td align="center">89.87</td>
<td align="center">209.69</td>
<td align="center">561.90</td>
<td align="center">1311.11</td>
<td align="center">1873.01</td>
</tr>
<tr class="odd">
<td align="center">10</td>
<td align="center">323.99</td>
<td align="center">0.3</td>
<td align="center">97.20</td>
<td align="center">226.79</td>
<td align="center">659.10</td>
<td align="center">1537.90</td>
<td align="center">2197.00</td>
</tr>
<tr class="even">
<td align="center">11</td>
<td align="center">348.77</td>
<td align="center">0.3</td>
<td align="center">104.63</td>
<td align="center">244.14</td>
<td align="center">763.73</td>
<td align="center">1782.04</td>
<td align="center">2545.77</td>
</tr>
<tr class="odd">
<td align="center">12</td>
<td align="center">373.86</td>
<td align="center">0.3</td>
<td align="center">112.16</td>
<td align="center">261.70</td>
<td align="center">875.89</td>
<td align="center">2043.74</td>
<td align="center">2919.63</td>
</tr>
<tr class="even">
<td align="center">13</td>
<td align="center">399.13</td>
<td align="center">0.3</td>
<td align="center">119.74</td>
<td align="center">279.39</td>
<td align="center">995.63</td>
<td align="center">2323.13</td>
<td align="center">3318.75</td>
</tr>
<tr class="odd">
<td align="center">14</td>
<td align="center">424.65</td>
<td align="center">0.3</td>
<td align="center">127.39</td>
<td align="center">297.25</td>
<td align="center">1123.02</td>
<td align="center">2620.38</td>
<td align="center">3743.40</td>
</tr>
<tr class="even">
<td align="center">15</td>
<td align="center">450.37</td>
<td align="center">0.3</td>
<td align="center">135.11</td>
<td align="center">315.26</td>
<td align="center">1258.13</td>
<td align="center">2935.64</td>
<td align="center">4193.77</td>
</tr>
</tbody>
</table>
<p>The last step in the calculation of a scenario is to calculate the
benefits for each of the possible types of payout:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" tabindex="-1"></a>contract.Endow.PP<span class="sc">$</span>Values<span class="sc">$</span>profitScenarios<span class="sc">$</span><span class="st">`</span><span class="at">Current total credited rate</span><span class="st">`</span> <span class="sc">%&gt;%</span></span>
<span id="cb75-2"><a href="#cb75-2" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb75-3"><a href="#cb75-3" tabindex="-1"></a>  <span class="fu">select</span>(survival, deathAccrued, death, surrenderAccrued, surrender, premiumWaiverAccrued, premiumWaiver) <span class="sc">%&gt;%</span></span>
<span id="cb75-4"><a href="#cb75-4" tabindex="-1"></a>  <span class="fu">rowid_to_column</span>(<span class="st">&quot;t&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">t =</span> t <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb75-5"><a href="#cb75-5" tabindex="-1"></a>  pander</span></code></pre></div>
<table>
<colgroup>
<col width="4%" />
<col width="9%" />
<col width="13%" />
<col width="9%" />
<col width="17%" />
<col width="10%" />
<col width="20%" />
<col width="14%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">t</th>
<th align="center">survival</th>
<th align="center">deathAccrued</th>
<th align="center">death</th>
<th align="center">surrenderAccrued</th>
<th align="center">surrender</th>
<th align="center">premiumWaiverAccrued</th>
<th align="center">premiumWaiver</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
<td align="center">0.00</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">121.26</td>
<td align="center">87.01</td>
<td align="center">123.39</td>
<td align="center">85.95</td>
<td align="center">104.14</td>
<td align="center">84.89</td>
<td align="center">103.08</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="center">263.12</td>
<td align="center">188.79</td>
<td align="center">267.73</td>
<td align="center">186.49</td>
<td align="center">225.96</td>
<td align="center">184.19</td>
<td align="center">223.65</td>
</tr>
<tr class="even">
<td align="center">3</td>
<td align="center">426.04</td>
<td align="center">305.68</td>
<td align="center">433.50</td>
<td align="center">301.96</td>
<td align="center">365.86</td>
<td align="center">298.23</td>
<td align="center">362.14</td>
</tr>
<tr class="odd">
<td align="center">4</td>
<td align="center">610.48</td>
<td align="center">438.02</td>
<td align="center">621.16</td>
<td align="center">432.68</td>
<td align="center">524.25</td>
<td align="center">427.34</td>
<td align="center">518.91</td>
</tr>
<tr class="even">
<td align="center">5</td>
<td align="center">816.93</td>
<td align="center">586.15</td>
<td align="center">831.23</td>
<td align="center">579.00</td>
<td align="center">701.54</td>
<td align="center">571.85</td>
<td align="center">694.39</td>
</tr>
<tr class="odd">
<td align="center">6</td>
<td align="center">1045.89</td>
<td align="center">750.42</td>
<td align="center">1064.19</td>
<td align="center">741.27</td>
<td align="center">898.15</td>
<td align="center">732.12</td>
<td align="center">889.00</td>
</tr>
<tr class="even">
<td align="center">7</td>
<td align="center">1297.89</td>
<td align="center">931.24</td>
<td align="center">1320.61</td>
<td align="center">919.88</td>
<td align="center">1114.57</td>
<td align="center">908.52</td>
<td align="center">1103.21</td>
</tr>
<tr class="odd">
<td align="center">8</td>
<td align="center">1573.45</td>
<td align="center">1128.95</td>
<td align="center">1600.98</td>
<td align="center">1115.18</td>
<td align="center">1351.20</td>
<td align="center">1101.41</td>
<td align="center">1337.43</td>
</tr>
<tr class="even">
<td align="center">9</td>
<td align="center">1873.01</td>
<td align="center">1343.88</td>
<td align="center">1905.79</td>
<td align="center">1327.49</td>
<td align="center">1608.45</td>
<td align="center">1311.11</td>
<td align="center">1592.06</td>
</tr>
<tr class="odd">
<td align="center">10</td>
<td align="center">2197.00</td>
<td align="center">1576.34</td>
<td align="center">2235.44</td>
<td align="center">1557.12</td>
<td align="center">1886.67</td>
<td align="center">1537.90</td>
<td align="center">1867.45</td>
</tr>
<tr class="even">
<td align="center">11</td>
<td align="center">2545.77</td>
<td align="center">1826.59</td>
<td align="center">2590.32</td>
<td align="center">1804.31</td>
<td align="center">2186.18</td>
<td align="center">1782.04</td>
<td align="center">2163.90</td>
</tr>
<tr class="odd">
<td align="center">12</td>
<td align="center">2919.63</td>
<td align="center">2094.83</td>
<td align="center">2970.72</td>
<td align="center">2069.28</td>
<td align="center">2507.23</td>
<td align="center">2043.74</td>
<td align="center">2481.68</td>
</tr>
<tr class="even">
<td align="center">13</td>
<td align="center">3318.75</td>
<td align="center">2381.21</td>
<td align="center">3376.83</td>
<td align="center">2352.17</td>
<td align="center">2849.98</td>
<td align="center">2323.13</td>
<td align="center">2820.94</td>
</tr>
<tr class="odd">
<td align="center">14</td>
<td align="center">3743.40</td>
<td align="center">2685.89</td>
<td align="center">3808.91</td>
<td align="center">2653.14</td>
<td align="center">3214.65</td>
<td align="center">2620.38</td>
<td align="center">3181.89</td>
</tr>
<tr class="even">
<td align="center">15</td>
<td align="center">4193.77</td>
<td align="center">3009.03</td>
<td align="center">4267.17</td>
<td align="center">2972.34</td>
<td align="center">3601.40</td>
<td align="center">2935.64</td>
<td align="center">3564.71</td>
</tr>
</tbody>
</table>
<p>One can add as many profit scenarios as desired. Each of the rates in
the <code>addProfitScenario</code>-call can also be a vector giving the
corresponding rate for each year of the contract:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" tabindex="-1"></a>contract.Endow.PP<span class="sc">$</span></span>
<span id="cb76-2"><a href="#cb76-2" tabindex="-1"></a>  <span class="fu">addProfitScenario</span>(<span class="at">id =</span> <span class="st">&quot;decreasing TCR&quot;</span>, <span class="at">guaranteedInterest =</span> <span class="fl">0.005</span>, </span>
<span id="cb76-3"><a href="#cb76-3" tabindex="-1"></a>                    <span class="at">interestProfitRate =</span> (<span class="dv">15</span><span class="sc">:</span><span class="dv">0</span>)<span class="sc">/</span><span class="dv">15</span> <span class="sc">*</span> <span class="fl">0.02</span>, </span>
<span id="cb76-4"><a href="#cb76-4" tabindex="-1"></a>                    <span class="at">expenseProfitRate =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="fl">0.01</span>, <span class="dv">5</span>), <span class="fu">rep</span>(<span class="fl">0.005</span>, <span class="dv">5</span>), <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">6</span>)))</span>
<span id="cb76-5"><a href="#cb76-5" tabindex="-1"></a></span>
<span id="cb76-6"><a href="#cb76-6" tabindex="-1"></a>contract.Endow.PP<span class="sc">$</span>Values<span class="sc">$</span>profitScenarios<span class="sc">$</span><span class="st">`</span><span class="at">decreasing TCR</span><span class="st">`</span> <span class="sc">%&gt;%</span></span>
<span id="cb76-7"><a href="#cb76-7" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb76-8"><a href="#cb76-8" tabindex="-1"></a>  <span class="fu">select</span>(interestBase, expenseBase, interestProfitRate, expenseProfitRate, interestOnProfitRate, interestProfit, expenseProfit, totalProfit) <span class="sc">%&gt;%</span></span>
<span id="cb76-9"><a href="#cb76-9" tabindex="-1"></a>  <span class="fu">rowid_to_column</span>(<span class="st">&quot;t&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">t =</span> t <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb76-10"><a href="#cb76-10" tabindex="-1"></a>  kable</span></code></pre></div>
<table>
<colgroup>
<col width="2%" />
<col width="10%" />
<col width="9%" />
<col width="14%" />
<col width="14%" />
<col width="16%" />
<col width="11%" />
<col width="11%" />
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th align="right">t</th>
<th align="right">interestBase</th>
<th align="right">expenseBase</th>
<th align="right">interestProfitRate</th>
<th align="right">expenseProfitRate</th>
<th align="right">interestOnProfitRate</th>
<th align="right">interestProfit</th>
<th align="right">expenseProfit</th>
<th align="right">totalProfit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="right">0.00000</td>
<td align="right">10000</td>
<td align="right">0.0000000</td>
<td align="right">0.000</td>
<td align="right">0.0000000</td>
<td align="right">0.000000</td>
<td align="right">0</td>
<td align="right">0.0000</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">18.56845</td>
<td align="right">10000</td>
<td align="right">0.0186667</td>
<td align="right">0.010</td>
<td align="right">0.0236667</td>
<td align="right">0.346611</td>
<td align="right">100</td>
<td align="right">121.2400</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="right">803.01905</td>
<td align="right">10000</td>
<td align="right">0.0173333</td>
<td align="right">0.010</td>
<td align="right">0.0223333</td>
<td align="right">13.918997</td>
<td align="right">100</td>
<td align="right">260.6333</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="right">1578.39853</td>
<td align="right">10000</td>
<td align="right">0.0160000</td>
<td align="right">0.010</td>
<td align="right">0.0210000</td>
<td align="right">25.254376</td>
<td align="right">100</td>
<td align="right">416.1329</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="right">2343.76130</td>
<td align="right">10000</td>
<td align="right">0.0146667</td>
<td align="right">0.010</td>
<td align="right">0.0196667</td>
<td align="right">34.375166</td>
<td align="right">100</td>
<td align="right">585.6060</td>
</tr>
<tr class="even">
<td align="right">5</td>
<td align="right">3098.03332</td>
<td align="right">10000</td>
<td align="right">0.0133333</td>
<td align="right">0.005</td>
<td align="right">0.0183333</td>
<td align="right">41.307111</td>
<td align="right">50</td>
<td align="right">716.8742</td>
</tr>
<tr class="odd">
<td align="right">6</td>
<td align="right">3839.92597</td>
<td align="right">10000</td>
<td align="right">0.0120000</td>
<td align="right">0.005</td>
<td align="right">0.0170000</td>
<td align="right">46.079112</td>
<td align="right">50</td>
<td align="right">856.8752</td>
</tr>
<tr class="even">
<td align="right">7</td>
<td align="right">4567.84836</td>
<td align="right">10000</td>
<td align="right">0.0106667</td>
<td align="right">0.005</td>
<td align="right">0.0156667</td>
<td align="right">48.723716</td>
<td align="right">50</td>
<td align="right">1003.5258</td>
</tr>
<tr class="odd">
<td align="right">8</td>
<td align="right">5280.07413</td>
<td align="right">10000</td>
<td align="right">0.0093333</td>
<td align="right">0.005</td>
<td align="right">0.0143333</td>
<td align="right">49.280692</td>
<td align="right">50</td>
<td align="right">1154.6974</td>
</tr>
<tr class="even">
<td align="right">9</td>
<td align="right">5975.02268</td>
<td align="right">10000</td>
<td align="right">0.0080000</td>
<td align="right">0.005</td>
<td align="right">0.0130000</td>
<td align="right">47.800181</td>
<td align="right">50</td>
<td align="right">1308.2316</td>
</tr>
<tr class="odd">
<td align="right">10</td>
<td align="right">6651.23186</td>
<td align="right">10000</td>
<td align="right">0.0066667</td>
<td align="right">0.000</td>
<td align="right">0.0116667</td>
<td align="right">44.341546</td>
<td align="right">0</td>
<td align="right">1411.9740</td>
</tr>
<tr class="even">
<td align="right">11</td>
<td align="right">7307.44935</td>
<td align="right">10000</td>
<td align="right">0.0053333</td>
<td align="right">0.000</td>
<td align="right">0.0103333</td>
<td align="right">38.973063</td>
<td align="right">0</td>
<td align="right">1513.2373</td>
</tr>
<tr class="odd">
<td align="right">12</td>
<td align="right">7942.76663</td>
<td align="right">10000</td>
<td align="right">0.0040000</td>
<td align="right">0.000</td>
<td align="right">0.0090000</td>
<td align="right">31.771066</td>
<td align="right">0</td>
<td align="right">1609.9840</td>
</tr>
<tr class="even">
<td align="right">13</td>
<td align="right">8556.80171</td>
<td align="right">10000</td>
<td align="right">0.0026667</td>
<td align="right">0.000</td>
<td align="right">0.0076667</td>
<td align="right">22.818138</td>
<td align="right">0</td>
<td align="right">1700.1463</td>
</tr>
<tr class="odd">
<td align="right">14</td>
<td align="right">9149.32455</td>
<td align="right">10000</td>
<td align="right">0.0013333</td>
<td align="right">0.000</td>
<td align="right">0.0063333</td>
<td align="right">12.199099</td>
<td align="right">0</td>
<td align="right">1781.8075</td>
</tr>
<tr class="even">
<td align="right">15</td>
<td align="right">9720.07684</td>
<td align="right">10000</td>
<td align="right">0.0000000</td>
<td align="right">0.000</td>
<td align="right">0.0050000</td>
<td align="right">0.000000</td>
<td align="right">0</td>
<td align="right">1853.1005</td>
</tr>
</tbody>
</table>
<p>In the Excel export, a separate tab of the Excel file will hold all
profit scenarios added to the contract.</p>
</div>
</div>
</div>
<div id="modifying-the-default-calculation-approach" class="section level1" number="14">
<h1><span class="header-section-number">14</span> Modifying the default
calculation approach</h1>
<p>While the cash-flow approach described above and based on the
<code>type</code> parameter of the <code>InsuranceTarif</code> works
very well for all standart types of life insurance, sometimes a tariff
does not follow the standard behaviour exactly. The valuation approach
with all-determining cash flows is still correct, but the cash flows
might need to be adjusted. For this, some hook functions are provided
that allow modification of the contract’s internals (e.g. cash flows)
before all other calculations commence.</p>
<p>Two hooks are provided, which allow modifications of the cash flow
profiles before present values, premiums and reserves are
calculated:</p>
<table>
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<tbody>
<tr class="odd">
<td align="left"><code>adjustCashFlows</code></td>
<td align="left">Adjust the premium and benefit cash flows of the
contract</td>
</tr>
<tr class="even">
<td align="left"><code>adjustCashFlowsCosts</code></td>
<td align="left">Adjust the cost cash flows</td>
</tr>
<tr class="odd">
<td align="left"><code>adjustPremiumCoefficients</code></td>
<td align="left">Adjust the coefficients of the premium calculation
formulas</td>
</tr>
</tbody>
</table>
<p>The function signature is
<code>function(x, params, values, ...)</code>, where <code>x</code> is
the object holding the standard cash flows determined for the contract.
The return value of the hook function will be used instead of
<code>x</code>.</p>
<p>The hook has a slightly extended function signature .</p>
<p>An example where the cash-flow-approach solely based on
<code>type</code> does not immediately work is a waiting period of 3
years for the death benefit. In particular, if a person dies during the
first 3 years of the contract, no death benefit is paid out.</p>
<p>The easiest way to implement such cash flows is to let the
<code>InsuranceTarif</code> first create the standard cash flows (with
benefits during the first three years) and then provide a hook function
that nullifies the benefits in the waiting period, before all present
values, premiums and reserves are calculated.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" tabindex="-1"></a>contract.Endow.Waiting <span class="ot">=</span> InsuranceContract<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb77-2"><a href="#cb77-2" tabindex="-1"></a>  <span class="at">tarif =</span> Tarif.Endowment,</span>
<span id="cb77-3"><a href="#cb77-3" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">10000</span>,</span>
<span id="cb77-4"><a href="#cb77-4" tabindex="-1"></a>  <span class="at">age =</span> <span class="dv">50</span>, <span class="at">policyPeriod =</span> <span class="dv">15</span>,</span>
<span id="cb77-5"><a href="#cb77-5" tabindex="-1"></a>  </span>
<span id="cb77-6"><a href="#cb77-6" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-09-01&quot;</span>),</span>
<span id="cb77-7"><a href="#cb77-7" tabindex="-1"></a>  <span class="at">adjustCashFlows =</span> <span class="cf">function</span>(x, ...) { x[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="st">&quot;death_SumInsured&quot;</span>] <span class="ot">=</span> <span class="dv">0</span>; x }</span>
<span id="cb77-8"><a href="#cb77-8" tabindex="-1"></a>)</span>
<span id="cb77-9"><a href="#cb77-9" tabindex="-1"></a></span>
<span id="cb77-10"><a href="#cb77-10" tabindex="-1"></a>contract.Endow.Waiting<span class="sc">$</span>Values<span class="sc">$</span>cashFlows[,<span class="fu">c</span>(<span class="st">&quot;premiums_advance&quot;</span>, <span class="st">&quot;survival_advance&quot;</span>, <span class="st">&quot;death_SumInsured&quot;</span>)] <span class="sc">%&gt;%</span> pander</span></code></pre></div>
<table style="width:92%;">
<colgroup>
<col width="12%" />
<col width="26%" />
<col width="26%" />
<col width="26%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">premiums_advance</th>
<th align="center">survival_advance</th>
<th align="center">death_SumInsured</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>0</strong></td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>1</strong></td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>3</strong></td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center"><strong>5</strong></td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center"><strong>6</strong></td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center"><strong>7</strong></td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center"><strong>8</strong></td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center"><strong>9</strong></td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center"><strong>10</strong></td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center"><strong>11</strong></td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center"><strong>12</strong></td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center"><strong>13</strong></td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center"><strong>14</strong></td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center"><strong>15</strong></td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" tabindex="-1"></a></span>
<span id="cb78-2"><a href="#cb78-2" tabindex="-1"></a><span class="fu">contractGridPremium</span>(</span>
<span id="cb78-3"><a href="#cb78-3" tabindex="-1"></a>  <span class="at">axes =</span> <span class="fu">list</span>(<span class="at">age =</span> <span class="fu">seq</span>(<span class="dv">20</span>, <span class="dv">80</span>, <span class="dv">10</span>), <span class="at">adjustCashFlows =</span> <span class="fu">c</span>(<span class="cf">function</span>(x, ...) x, <span class="cf">function</span>(x, ...) { x[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="st">&quot;death_SumInsured&quot;</span>] <span class="ot">=</span> <span class="dv">0</span>; x })),</span>
<span id="cb78-4"><a href="#cb78-4" tabindex="-1"></a>  <span class="at">tarif =</span> Tarif.Endowment,</span>
<span id="cb78-5"><a href="#cb78-5" tabindex="-1"></a>  <span class="at">sumInsured =</span> <span class="dv">10000</span>,</span>
<span id="cb78-6"><a href="#cb78-6" tabindex="-1"></a>  <span class="at">policyPeriod =</span> <span class="dv">15</span>,</span>
<span id="cb78-7"><a href="#cb78-7" tabindex="-1"></a>  </span>
<span id="cb78-8"><a href="#cb78-8" tabindex="-1"></a>  <span class="at">contractClosing =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-09-01&quot;</span>)</span>
<span id="cb78-9"><a href="#cb78-9" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="st">`</span><span class="at">colnames&lt;-</span><span class="st">`</span>(<span class="fu">c</span>(<span class="st">&quot;Full benefit&quot;</span>, <span class="st">&quot;Waiting period&quot;</span>))</span>
<span id="cb78-10"><a href="#cb78-10" tabindex="-1"></a><span class="co">#&gt;     adjustCashFlows</span></span>
<span id="cb78-11"><a href="#cb78-11" tabindex="-1"></a><span class="co">#&gt; age  Full benefit Waiting period</span></span>
<span id="cb78-12"><a href="#cb78-12" tabindex="-1"></a><span class="co">#&gt;   20     757.7664       756.5401</span></span>
<span id="cb78-13"><a href="#cb78-13" tabindex="-1"></a><span class="co">#&gt;   30     758.5546       757.3658</span></span>
<span id="cb78-14"><a href="#cb78-14" tabindex="-1"></a><span class="co">#&gt;   40     764.1524       761.6906</span></span>
<span id="cb78-15"><a href="#cb78-15" tabindex="-1"></a><span class="co">#&gt;   50     781.2534       773.6785</span></span>
<span id="cb78-16"><a href="#cb78-16" tabindex="-1"></a><span class="co">#&gt;   60     818.9056       798.1579</span></span>
<span id="cb78-17"><a href="#cb78-17" tabindex="-1"></a><span class="co">#&gt;   70     916.0787       867.0739</span></span>
<span id="cb78-18"><a href="#cb78-18" tabindex="-1"></a><span class="co">#&gt;   80    1330.8063      1121.3076</span></span></code></pre></div>
<p>Another example are term-fixe insurances where the Zillmer premium
also includes the administration (gamma) costs over the whole contract
period.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" tabindex="-1"></a>  costs <span class="ot">=</span> <span class="fu">initializeCosts</span>(<span class="at">alpha =</span> <span class="fl">0.04</span>, <span class="at">Zillmer =</span> <span class="fl">0.035</span>, <span class="at">gamma =</span> <span class="fl">0.0015</span>, <span class="at">gamma.fullcontract =</span> <span class="fl">0.001</span>),</span>
<span id="cb79-2"><a href="#cb79-2" tabindex="-1"></a>  adjustPremiumCoefficients <span class="ot">=</span> <span class="cf">function</span>(coeff, type, premiums, params, values, premiumCalculationTime) {</span>
<span id="cb79-3"><a href="#cb79-3" tabindex="-1"></a>    <span class="cf">if</span> (type <span class="sc">==</span> <span class="st">&quot;Zillmer&quot;</span>) {</span>
<span id="cb79-4"><a href="#cb79-4" tabindex="-1"></a>      coeff[[<span class="st">&quot;SumInsured&quot;</span>]][[<span class="st">&quot;costs&quot;</span>]][<span class="st">&quot;gamma&quot;</span>, <span class="st">&quot;SumInsured&quot;</span>, <span class="st">&quot;guaranteed&quot;</span>] <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb79-5"><a href="#cb79-5" tabindex="-1"></a>    }</span>
<span id="cb79-6"><a href="#cb79-6" tabindex="-1"></a>    coeff</span>
<span id="cb79-7"><a href="#cb79-7" tabindex="-1"></a>  },</span></code></pre></div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
